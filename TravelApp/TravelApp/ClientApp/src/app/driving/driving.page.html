<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>

    <ion-title>
      <ion-label>{{'Orders' | translate}}</ion-label>
    </ion-title>

    <ion-buttons slot="end">
      <ion-icon (click)='openLanguagePopover($event)' id="toolbarIcon" name="language-outline"></ion-icon>
    </ion-buttons>
  </ion-toolbar>
</ion-header>
<ion-content padding class="background">
  <div class="row mt-2">
    <div class="col">
      <div class="row">
        <div class="col-md-12 text-center">
          <ion-text class="centered" color="dark">
            <h2 class="fonted blink_me">{{'Waiting for orders' | translate}}</h2>
            <hr>
          </ion-text>
        </div>

        <!-- style="display: none;" -- for distributing orders -->

        <div class="col-md-10">
          <div *ngFor="let oldOrder of orders" id="orderDiv" class="list-group mt-2">

            <a class="text list-group-item list-group-item-action flex-column align-items-start">
              <div class="d-flex w-100 justify-content-between">
                <h5 class="mb-1 fonted">{{'Order' | translate}}</h5>
                <small>{{oldOrder.createdOn | date:'MM/dd/yyyy h:mm'}}</small>
              </div>
              <p class="mb-1 fonted">{{'Location' | translate}}: {{oldOrder.location}}</p>
              <hr />
              <p class="mb-1 fonted">{{'Destination' | translate}}: {{oldOrder.destination}}</p>
              <div class="row">
                <div class="col">
                  <small
                    *ngIf="oldOrder.withPets == true || oldOrder.withStroller == true || oldOrder.special == true">{{'Additional
                    options' | translate}}:</small>
                  <ul>
                    <li *ngIf="oldOrder.withPets == true">{{'With pets' | translate}}</li>
                    <li *ngIf="oldOrder.withStroller == true">{{'With stroller' | translate}}</li>
                    <li *ngIf="oldOrder.special == true">{{'Special needs' | translate}}</li>
                  </ul>

                  <small *ngIf="oldOrder.carType">Desired car type:</small>
                  <ul *ngIf="oldOrder.carType">
                    <li>{{oldOrder.carType}}</li>
                  </ul>

                  <div class="w-100">
                    <h5>{{'Trip distance' | translate}}: {{oldOrder.tripDistance}} km</h5>
                    <br>
                    <h5 class="fonted">Distance to user: 
                      <small *ngIf="oldOrder.distanceText == 'Calculating...'" class="blink_me fonted">{{oldOrder.distanceText}}</small> 
                      <small *ngIf="oldOrder.distanceText != 'Calculating...'" class="fonted">{{oldOrder.distanceText}}</small>
                    </h5>
                  </div>

                  <div class="d-flex w-100 justify-content-between">

                    <small class="fonted">{{'Total cost' | translate}}: {{oldOrder.totalPrice}}$</small>
                    <ion-button [disabled]="oldOrder.distanceText == 'Calculating...'" class="fonted" (click)="acceptOrder(oldOrder)" type="submit" color="light">{{'Accept' |
                      translate}}</ion-button>
                  </div>
                </div>

              </div>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>


</ion-content>