<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>

    <ion-title *ngIf="isDrivingNow == false">
        <ion-label>Orders</ion-label>
    </ion-title>

    <ion-title *ngIf="isDrivingNow == true">
      <ion-label>Accepted order</ion-label>
  </ion-title>

    <ion-buttons slot="end">
      <ion-icon id="toolbarIcon" name="language-outline"></ion-icon>
    </ion-buttons>
  </ion-toolbar>
</ion-header>
<ion-content padding class="background" *ngIf="isDrivingNow == false">
  <div class="row mt-2">
    <div class="col">
      <div class="row">
        <div class="col-md-12 text-center">
          <ion-text class="centered" color="light">
            <h2 class="text">Driving</h2>
            <hr>
          </ion-text>

          <div *ngIf="this.orders.length == 0">
            <ion-text class="centered" color="light">
              <h2 class="text">We are sorry, currently there are no orders!</h2>
            </ion-text>
          </div>
        </div>

       

        <div class="col-md-10">
          <div *ngFor="let oldOrder of orders" class="list-group mt-2">

            <a class="text list-group-item list-group-item-action flex-column align-items-start">
              <div class="d-flex w-100 justify-content-between">
                <h5 class="mb-1">Order</h5>
                <small>{{oldOrder.createdOn | date:'MM/dd/yyyy h:mm'}}</small>
              </div>
              <p class="mb-1">Location: {{oldOrder.location}}</p>
              <p class="mb-1">Destination: {{oldOrder.destination}}</p>

              <div class="row">
                <div class="col">
                  <div class="d-flex w-100 justify-content-between">
                    <small>Distance: 25 km (coming soon...)</small>
                    <ion-button (click)="acceptOrder(oldOrder)" type="submit" color="light">Accept</ion-button>
                  </div>
                </div>
                <div class="col-md-12">
                  <small>Total cost: {{oldOrder.totalPrice}}$</small>
                </div>
              </div>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>


</ion-content>


<ion-content padding class="noScroll" *ngIf="isDrivingNow == true">
  <div #map id="map"></div>
  <!-- <div class="row">
    <div class="col">

      <div class="row">
        <div class="col text-center">

          <ion-content class="noScroll">
          </ion-content>
          <ion-button  (click)="navigateToUserAndCalculateDistance()" type="submit"
          color="success">Navigate to user</ion-button>
          <ion-button  (click)="navigateToPointAndCalculateDistance()" type="submit"
          color="success">Start trip</ion-button>
          <div class="row">
            <div class="col">
              <div class="d-flex w-100 justify-content-between">
                <ion-text class="centered" color="light">
                  <h2 class="text">Location: {{this.location}}</h2>
                  <h2 class="text">Destination: {{this.destination}}</h2>
                  <h3 class="text">Total price: {{this.totalPrice}}$</h3>
                  <div class="row">
                    <div class="col">
                      <div class="d-flex w-100 justify-content-between">
                        <ion-button [disabled]="tripStatus=='Started'" (click)="startTrip()" type="submit"
                          color="success">Go!</ion-button>
                      </div>
                      <div class="d-flex w-100 justify-content-between">
                        <ion-button [disabled]="tripStatus=='Started'" (click)="cancelTrip()" type="submit"
                          color="danger">Cancel</ion-button>
                      </div>
                      <div class="d-flex w-100 justify-content-between">
                        <ion-button [disabled]="tripStatus=='Started'" (click)="reportProblem()" type="submit"
                          color="danger">Report</ion-button>
                      </div>
                    </div>
                  </div>
                </ion-text>


                <ion-button [disabled]="tripStatus=='Processing'" (click)="finishTrip()" type="submit" color="light">
                  Finish</ion-button>
              </div>
            </div>
          </div>

         

          


    </div>
  </div> -->

</ion-content>


<ion-footer class="ion-no-border" *ngIf="isDrivingNow == true">
  <ion-toolbar class="text-center">
    <ion-text class="textTravel">
      <ion-title>Pick up address <ion-label>(15km from you)</ion-label></ion-title>
      <ion-label >{{this.location}}</ion-label>
    </ion-text>
  </ion-toolbar>
</ion-footer>


<ion-footer class="ion-no-border" *ngIf="isDrivingNow == true">
  <ion-toolbar class="text-center">
    <ion-text class="textTravel">
      <ion-button  (click)="navigateToUserAndCalculateDistance()" type="submit"
      [disabled]="tripStatus=='Started'" color="primary">Navigate to user</ion-button>
          <ion-button (click)="navigateToPointAndCalculateDistance()" type="submit"
          color="primary" [disabled]="tripStatus=='!Processing'">Start trip</ion-button>
          <ion-title>Drop off address<ion-label>(15km trip)</ion-label></ion-title>
          <ion-label >{{this.destination}}</ion-label>
    </ion-text>
  </ion-toolbar>
</ion-footer>

<ion-footer class="ion-no-border"  *ngIf="isDrivingNow == true">
  <ion-toolbar class="text-center">
    <ion-button [disabled]="tripStatus=='Processing'" (click)="finishTrip()" type="submit" color="light">
      Finish trip</ion-button>
  </ion-toolbar>
  
  <div class="row chat">
            
    <div class="col">
      <ion-card>
        <ion-card-header class="text-center">
          <ion-card-subtitle>Chat</ion-card-subtitle>
        </ion-card-header>
      </ion-card>

      <ion-card>
          
          <div class="msg-box">
            <ul *ngFor="let mObj of msgInboxArray">
              <li [ngClass]="mObj.user === msgDto.user ? 'in-msg' : 'ex-msg'">
                {{mObj.user}}:  <br />
                {{mObj.text}}
                <hr />
            </li>
              
            </ul>
          </div>
      </ion-card>

      <ion-card>
        <ion-item>
          <ion-textarea [(ngModel)]="msgDto.text" placeholder="Type your message...">

          </ion-textarea>
          <button class="send-btn" (click)="send()">
            <ion-icon name="pin"></ion-icon>
          </button>
        </ion-item>
      </ion-card>
    </div>
    
  </div>
</ion-footer>