(self.webpackChunkcsharpcornerauthor=self.webpackChunkcsharpcornerauthor||[]).push([[8985],{297:function(e,r,t){"use strict";t.d(r,{p:function(){return h}});var o=t(205),n=t(5304),i=t(3342),a=t(2340),s=t(3018),d=t(1841),p=t(728);let h=(()=>{class e{constructor(e,r){this.http=e,this.sharedService=r,this.orders=[],this.completedOrder=!1}createOrder(e){const r=this.sharedService.headerGerneration();return this.http.post(`${a.N.apiUrl}/api/order`,e,{headers:r,responseType:"text"}).pipe((0,n.K)(this.handleError))}addToFavourites(e){const r=this.sharedService.headerGerneration();return this.http.post(`${a.N.apiUrl}/api/order/favourites`,e,{headers:r,responseType:"text"}).pipe((0,n.K)(this.handleError))}getMyFavourites(e){const r=this.sharedService.headerGerneration();return this.http.get(`${a.N.apiUrl}/api/order/favourites/${e}`,{headers:r}).pipe((0,n.K)(this.handleError))}deleteFavouriteOrder(e){const r=this.sharedService.headerGerneration();return this.http.delete(`${a.N.apiUrl}/api/order/favourites/${e}`,{headers:r}).pipe((0,i.b)(e=>console.log("deleted favourite order: ",JSON.stringify(e))),(0,n.K)(this.handleError))}getDirections(e,r,t,o){const i=this.sharedService.headerGerneration();return this.http.post(`https://maps.googleapis.com/maps/api/distancematrix/json?units=imperial&origins=${e},${r}&destinations=${t}%2C${o}%7C&key=AIzaSyAEvlXdM4joG4bNVT5l-tJSk9lUSGhxMNw`,{headers:i,responseType:"text"}).pipe((0,n.K)(this.handleError))}getOrderById(e){const r=this.sharedService.headerGerneration();return this.http.get(`${a.N.apiUrl}/api/order/id/${e}`,{headers:r}).pipe((0,i.b)(e=>this.order=e))}getCanceledOrderById(e){const r=this.sharedService.headerGerneration();return this.http.get(`${a.N.apiUrl}/api/order/canceled/${e}`,{headers:r}).pipe((0,i.b)(e=>this.order=e))}getLastCompletedOrder(e){const r=this.sharedService.headerGerneration();return this.http.get(`${a.N.apiUrl}/api/order/completed/${e}`,{headers:r}).pipe((0,n.K)(this.handleError))}getMyOrder(e){const r=this.sharedService.headerGerneration();return this.http.get(`${a.N.apiUrl}/api/order/${e}`,{headers:r}).pipe((0,n.K)(this.handleError))}getOrderForChat(e){const r=this.sharedService.headerGerneration();return this.http.get(`${a.N.apiUrl}/api/order/chat/${e}`,{headers:r}).pipe((0,n.K)(this.handleError))}getAllOrders(){const e=this.sharedService.headerGerneration();return this.http.get(`${a.N.apiUrl}/api/order`,{headers:e}).pipe((0,n.K)(this.handleError))}getNormalOrders(){const e=this.sharedService.headerGerneration();return this.http.get(`${a.N.apiUrl}/api/order/normal`,{headers:e}).pipe((0,n.K)(this.handleError))}getComfortOrders(){const e=this.sharedService.headerGerneration();return this.http.get(`${a.N.apiUrl}/api/order/comfort`,{headers:e}).pipe((0,n.K)(this.handleError))}acceptOrder(e,r){const t=this.sharedService.headerGerneration();return this.http.put(`${a.N.apiUrl}/api/order/${e}/${r}`,{headers:t,responseType:"json"}).pipe((0,i.b)(e=>this.driverId=r),(0,n.K)(this.handleError))}updateOrderEta(e,r){const t=this.sharedService.headerGerneration();return this.http.put(`${a.N.apiUrl}/api/order/eta/${e}/${r}`,{headers:t,responseType:"json"}).pipe((0,n.K)(this.handleError))}updateDriverArrived(e){const r=this.sharedService.headerGerneration();return this.http.put(`${a.N.apiUrl}/api/order/arrived/${e}`,{headers:r,responseType:"json"}).pipe((0,n.K)(this.handleError))}rateOrder(e){const r=this.sharedService.headerGerneration();return this.http.put(`${a.N.apiUrl}/api/order/rate/${e}`,{headers:r,responseType:"json"}).pipe((0,n.K)(this.handleError))}increaseOrderPrice(e,r){const t=this.sharedService.headerGerneration();return this.http.put(`${a.N.apiUrl}/api/order/increase/${e}/${r}`,{headers:t,responseType:"json"}).pipe((0,n.K)(this.handleError))}completeOrder(e){const r=this.sharedService.headerGerneration();return this.http.put(`${a.N.apiUrl}/api/order/${e}`,{headers:r,responseType:"json"}).pipe((0,n.K)(this.handleError))}deleteOrder(e){const r=this.sharedService.headerGerneration();return this.http.delete(`${a.N.apiUrl}/api/order/${e}`,{headers:r}).pipe((0,i.b)(e=>console.log("deleted order: ",JSON.stringify(e))),(0,n.K)(this.handleError))}driverIncreaseOrderPrice(e,r,t){const o=this.sharedService.headerGerneration();return this.http.put(`${a.N.apiUrl}/api/order/increased/${e}/${r}/${t}`,{headers:o,responseType:"json"}).pipe((0,n.K)(this.handleError))}resetIncreasing(e){const r=this.sharedService.headerGerneration();return this.http.put(`${a.N.apiUrl}/api/order/reset/${e}`,{headers:r,responseType:"json"}).pipe((0,n.K)(this.handleError))}increasedOrderAccept(e,r){const t=this.sharedService.headerGerneration();return this.http.put(`${a.N.apiUrl}/api/order/accepted/increase/${e}/${r}`,{headers:t,responseType:"json"}).pipe((0,n.K)(this.handleError))}incrementOrderPrice(e){const r=this.sharedService.headerGerneration();return this.http.put(`${a.N.apiUrl}/api/order/increment/${e}`,{headers:r,responseType:"json"}).pipe((0,n.K)(this.handleError))}decrementOrderPrice(e){const r=this.sharedService.headerGerneration();return this.http.put(`${a.N.apiUrl}/api/order/decrement/${e}`,{headers:r,responseType:"json"}).pipe((0,n.K)(this.handleError))}handleError(e){let r="";return e.error instanceof ErrorEvent?(console.log("Client side error."),r=`Error: ${e.error.message}`):(console.log("Server side error."),r=`Error Code: ${e.status}\nMessage: ${e.message}`),console.log(r),(0,o._)(r)}}return e.\u0275fac=function(r){return new(r||e)(s.LFG(d.eN),s.LFG(p.F))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},8985:function(e,r,t){"use strict";t.r(r),t.d(r,{HttpLoaderFactory:function(){return b},LocationPageModule:function(){return G}});var o=t(8583),n=t(3679),i=t(7823),a=t(4481),s=t(4762),d=t(3018),p=t(8442),h=t(6522),c=t(297),l=t(7800),u=t(5056);const g=["map"],m=["myButton"],{Geolocation:v}=p.Vn,f=[{path:"",component:(()=>{class e{constructor(e,r,t,o,n,i){this.route=e,this.orderService=r,this.navCtrl=t,this.translate=o,this.popoverController=n,this.accountService=i,this.markerUrl="../../assets/location.png",this.translate.setDefaultLang(this.accountService.userValue.choosenLanguage)}ngOnInit(){}ionViewDidEnter(){this.getLocation(),this.loadMap(this.mapRef)}onSubmit(){this.orderService.chosenLocation=this.address,this.route.navigate(["menu/destination"])}loadMap(e){return(0,s.mG)(this,void 0,void 0,function*(){const r=yield v.getCurrentPosition(),t={lat:r.coords.latitude,lng:r.coords.longitude};this.orderService.userLocationLat=t.lat,this.orderService.userLocationLong=t.lng;const o={center:new google.maps.LatLng(t.lat,t.lng),zoom:15,disableDefaultUI:!0,mapTypeId:google.maps.MapTypeId.ROADMAP};this.map=new google.maps.Map(e.nativeElement,o);var n=new google.maps.Marker({position:new google.maps.LatLng(t),icon:this.markerUrl,map:this.map}),i=document.getElementById("searchTextField").getElementsByTagName("input")[0],a=new google.maps.places.SearchBox(i);this.orderService.selectedFavourite=null,this.map.addListener("bounds_changed",()=>{a.setBounds(this.map.getBounds())}),a.addListener("places_changed",()=>{const e=a.getPlaces();if(0!=e.length){var r=new google.maps.LatLngBounds;e.forEach(e=>{e.geometry?(n.setMap(null),n=new google.maps.Marker({position:e.geometry.location,map:this.map}),e.geometry.viewport?r.union(e.geometry.viewport):r.extend(e.geometry.location)):console.log("No Geometry")}),this.map.fitBounds(r)}});let d=new google.maps.Geocoder;google.maps.event.addListener(this.map,"idle",()=>(0,s.mG)(this,void 0,void 0,function*(){var e=this.map.getCenter();const r={lat:e.lat(),lng:e.lng()};n&&n.setMap&&n.setMap(null),this.orderService.userLocationLat=r.lat,this.orderService.userLocationLong=r.lng,d.geocode({location:r},(e,r)=>{"OK"==r&&e[0]&&(this.address=e[0].formatted_address)})}))})}destination(){this.route.navigate(["menu/destination"])}getLocation(){navigator.geolocation?navigator.geolocation.getCurrentPosition(e=>{this.longitude=e.coords.longitude,this.latitude=e.coords.latitude,this.callApi(this.longitude,this.latitude)}):console.log("No support for geolocation")}callApi(e,r){}openLanguagePopover(e){return(0,s.mG)(this,void 0,void 0,function*(){const r=yield this.popoverController.create({component:h.m,event:e});yield r.present()})}}return e.\u0275fac=function(r){return new(r||e)(d.Y36(a.F0),d.Y36(c.p),d.Y36(i.SH),d.Y36(l.sK),d.Y36(i.Dh),d.Y36(u.B))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-location"]],viewQuery:function(e,r){if(1&e&&(d.Gf(g,3,d.SBq),d.Gf(m,1)),2&e){let e;d.iGM(e=d.CRH())&&(r.mapRef=e.first),d.iGM(e=d.CRH())&&(r.myButton=e.first)}},decls:27,vars:10,consts:[["slot","start"],["slot","end"],["id","toolbarIcon","name","language-outline",3,"click"],["id","searchTextField","type","text","clearInput","",3,"placeholder"],[1,"noScroll"],["id","map"],["map",""],["id","marker"],["marker",""],[1,"text-center"],[1,"btn","btn-info","text-center",3,"click"]],template:function(e,r){1&e&&(d.TgZ(0,"ion-header"),d.TgZ(1,"ion-toolbar"),d.TgZ(2,"ion-buttons",0),d._UZ(3,"ion-menu-button"),d.qZA(),d.TgZ(4,"ion-title"),d.TgZ(5,"ion-label"),d._uU(6),d.ALo(7,"translate"),d.qZA(),d.qZA(),d.TgZ(8,"ion-buttons",1),d.TgZ(9,"ion-icon",2),d.NdJ("click",function(e){return r.openLanguagePopover(e)}),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(10,"ion-item"),d._UZ(11,"ion-input",3),d.ALo(12,"translate"),d.qZA(),d.TgZ(13,"ion-content",4),d._UZ(14,"div",5,6),d._UZ(16,"div",7,8),d.qZA(),d.TgZ(18,"ion-footer"),d.TgZ(19,"ion-toolbar",9),d.TgZ(20,"button",10),d.NdJ("click",function(){return r.onSubmit()}),d._uU(21),d.ALo(22,"translate"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(23,"ion-footer"),d.TgZ(24,"ion-toolbar",9),d.TgZ(25,"p"),d._uU(26),d.qZA(),d.qZA(),d.qZA()),2&e&&(d.xp6(6),d.Oqu(d.lcZ(7,4,"Choose starting point")),d.xp6(5),d.Q6J("placeholder",d.lcZ(12,6,"Search location")),d.xp6(10),d.Oqu(d.lcZ(22,8,"Take me from here")),d.xp6(5),d.Oqu(r.address))},directives:[i.Gu,i.sr,i.Sm,i.fG,i.wd,i.Q$,i.gu,i.Ie,i.pK,i.j9,i.W2,i.fr],pipes:[l.X$],styles:[".noScroll[_ngcontent-%COMP%]{overflow:hidden}#marker[_ngcontent-%COMP%]{position:absolute;background:url(location.png) no-repeat;top:50%;left:50%;z-index:1;margin-left:-10px;margin-top:-34px;height:34px;width:20px;cursor:pointer}#map[_ngcontent-%COMP%]{height:100%;width:100%}ion-card[_ngcontent-%COMP%]{max-height:200px;overflow:scroll;position:absolute;z-index:1}ion-toolbar[_ngcontent-%COMP%]{--ion-background-color:#eee}ion-title[_ngcontent-%COMP%]{text-align:center}#toolbarIcon[_ngcontent-%COMP%]{font-size:1.7em}#toolbarIcon1[_ngcontent-%COMP%]{font-size:3em}.centered[_ngcontent-%COMP%]{text-align:center}.text[_ngcontent-%COMP%]{font-size:2.4em;font-family:Open Sans Light}i[_ngcontent-%COMP%]{color:#eee}.my-custom-class[_ngcontent-%COMP%]{--background:#e5e5e5}ion-select[_ngcontent-%COMP%]{color:#383838;background-color:#fff;border-radius:10px;border:3px solid #eee}.blink_me[_ngcontent-%COMP%]{-webkit-animation:blinker 1s linear infinite;animation:blinker 1s linear infinite}@-webkit-keyframes blinker{50%{opacity:0}}@keyframes blinker{50%{opacity:0}}.backIcon[_ngcontent-%COMP%]{font-size:150%}.back[_ngcontent-%COMP%], .backIcon[_ngcontent-%COMP%]{color:#ffae00}"]}),e})()}];let $=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({imports:[[a.Bz.forChild(f)],a.Bz]}),e})();var S=t(1841),y=t(2472),O=t(3577);function b(e){return new y.w(e)}let G=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({imports:[[o.ez,n.u5,i.Pc,$,l.aw.forChild({loader:{provide:l.Zw,useFactory:b,deps:[S.eN]}}),O.LanguagePopoverPageModule]]}),e})()}}]);