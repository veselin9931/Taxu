{"version":3,"sources":["webpack:///src/app/driver-profile/driver-profile.module.ts","webpack:///src/app/driver-profile/driver-profile.page.scss","webpack:///src/app/driver-profile/driver-profile-routing.module.ts","webpack:///src/app/driver-profile/driver-profile.page.ts","webpack:///src/app/driver-profile/driver-profile.page.html"],"names":["HttpLoaderFactory","http","DriverProfilePageModule","imports","forChild","loader","provide","useFactory","deps","declarations","providers","routes","path","component","DriverProfilePageRoutingModule","exports","DriverProfilePage","accountService","driverService","route","location","alertController","walletService","imageService","translate","popoverController","subscriptions","user","userValue","driverId","carsCount","folderName","imgType","setDefaultLang","choosenLanguage","getDriver","getProfilePicture","getWalletAmount","getCars","connection","configureLogging","Information","withUrl","signalRUrl","build","start","then","console","log","err","on","userId","referral","push","getMyPicture","id","subscribe","x","imgPath","files","length","fileToUpload","formData","FormData","append","name","upload","event","type","UploadProgress","progress","Math","round","loaded","total","Response","message","d","driver","rating","toFixed","driverCommission","comission","referal","getMyWallet","ammount","walletAmount","getDriverCars","driverCars","navigate","car","isActive","confirmation","presentAlert","activeCar","isActiveCar","deleteCarConfirmation","back","ev","create","popover","present","get","text","cssClass","header","buttons","alert","handler","deleteCar","popup","selector","template"],"mappings":"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","file":"driver-profile-driver-profile-module-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { DriverProfilePageRoutingModule } from './driver-profile-routing.module';\r\n\r\nimport { DriverProfilePage } from './driver-profile.page';\r\n\r\nimport { TranslateLoader, TranslateModule, TranslateService } from '@ngx-translate/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { TranslateHttpLoader } from '@ngx-translate/http-loader';\r\nimport { LanguagePopoverPageModule } from '../language-popover/language-popover.module';\r\n\r\nexport function HttpLoaderFactory(http: HttpClient) {\r\n  return new TranslateHttpLoader(http);\r\n}\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    DriverProfilePageRoutingModule,\r\n    TranslateModule.forChild({\r\n      loader: {\r\n        provide: TranslateLoader,\r\n        useFactory: HttpLoaderFactory,\r\n        deps: [HttpClient]\r\n      }\r\n    }),\r\n    LanguagePopoverPageModule\r\n  ],\r\n  declarations: [DriverProfilePage],\r\n  providers:[TranslateService],\r\n})\r\nexport class DriverProfilePageModule {}\r\n","export default \"ion-content {\\n  --ion-background-color:#353535;\\n}\\n\\nion-toolbar {\\n  --ion-background-color:#eeeeee;\\n}\\n\\nion-title {\\n  text-align: center;\\n}\\n\\n#toolbarIcon {\\n  font-size: 1.7em;\\n}\\n\\na {\\n  text-decoration: none;\\n  color: black;\\n}\\n\\n.centered {\\n  text-align: center;\\n}\\n\\n.text {\\n  font-family: Open Sans Light;\\n}\\n\\nhr {\\n  background: #eeeeee;\\n  width: 70% !important;\\n}\\n\\n.my-label {\\n  font-family: Open Sans Light;\\n}\\n\\n.backIcon {\\n  color: #ffae00;\\n  font-size: 150%;\\n}\\n\\n.back {\\n  color: #ffae00;\\n}\\n\\n.car {\\n  color: green;\\n}\\n\\n.card-transparent {\\n  margin: 0 auto;\\n}\\n\\n.card-transparent .header-transparent {\\n  height: 150px;\\n}\\n\\n.card-transparent .header-transparent .avatar {\\n  width: 160px;\\n  height: 120px;\\n  position: relative;\\n  margin: 0 auto;\\n}\\n\\n.card-transparent .header-transparent .avatar img {\\n  height: 130px;\\n  display: block;\\n  border-radius: 50%;\\n  position: absolute;\\n  bottom: calc(-1*(80px + 8px));\\n  background-color: #fff;\\n  margin-left: 20px;\\n}\\n\\n.my-custom-class {\\n  --background: #e5e5e5;\\n}\\n\\n.card-body {\\n  background-color: #ffffff;\\n  padding: 30px;\\n  height: 100%;\\n  overflow: hidden;\\n}\\n\\n.card-body .user-meta {\\n  padding-top: 40px;\\n}\\n\\n.card-body .user-meta .playername {\\n  font-size: 24px;\\n  font-weight: 600;\\n  color: #303940;\\n}\\n\\n.card-body .user-meta .country {\\n  font-size: 90%;\\n  color: #949ea6;\\n  text-transform: uppercase;\\n  margin: 0 auto;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uXFwuLlxcLi5cXGRyaXZlci1wcm9maWxlLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUVJLDhCQUFBO0FBQUo7O0FBR0E7RUFDSSw4QkFBQTtBQUFKOztBQUdBO0VBQ0ksa0JBQUE7QUFBSjs7QUFHQTtFQUNJLGdCQUFBO0FBQUo7O0FBR0E7RUFDSSxxQkFBQTtFQUNBLFlBQUE7QUFBSjs7QUFHQTtFQUNJLGtCQUFBO0FBQUo7O0FBR0E7RUFDSSw0QkFBQTtBQUFKOztBQUlBO0VBQ0ksbUJBQUE7RUFDQSxxQkFBQTtBQURKOztBQUtBO0VBQ0ksNEJBQUE7QUFGSjs7QUFLQTtFQUNJLGNBQUE7RUFDQSxlQUFBO0FBRko7O0FBS0E7RUFDSSxjQUFBO0FBRko7O0FBSUM7RUFDSSxZQUFBO0FBREw7O0FBSUE7RUFDSSxjQUFBO0FBREo7O0FBR0k7RUFDSSxhQUFBO0FBRFI7O0FBR1E7RUFDSSxZQUFBO0VBQ0EsYUFBQTtFQUNBLGtCQUFBO0VBQ0EsY0FBQTtBQURaOztBQUVZO0VBQ0ksYUFBQTtFQUNBLGNBQUE7RUFDQSxrQkFBQTtFQUNBLGtCQUFBO0VBQ0EsNkJBQUE7RUFDQSxzQkFBQTtFQUNBLGlCQUFBO0FBQWhCOztBQUtBO0VBQ0kscUJBQUE7QUFGSjs7QUFLQTtFQUNJLHlCQUFBO0VBQ0EsYUFBQTtFQUNBLFlBQUE7RUFDQSxnQkFBQTtBQUZKOztBQUlJO0VBQ0ksaUJBQUE7QUFGUjs7QUFJUTtFQUNJLGVBQUE7RUFDQSxnQkFBQTtFQUNBLGNBQUE7QUFGWjs7QUFLUTtFQUNJLGNBQUE7RUFDQSxjQUFBO0VBQ0EseUJBQUE7RUFDQSxjQUFBO0FBSFoiLCJmaWxlIjoiZHJpdmVyLXByb2ZpbGUucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiaW9uLWNvbnRlbnR7XHJcbiAgICAvLy0tYmFja2dyb3VuZDogdXJsKC4uLy4uL2Fzc2V0cy93cDQ3OTI3ODAtZGFyay1waG9uZS13YWxscGFwZXJzLmpwZykgMCAwLzEwMCUgMTAwJSBuby1yZXBlYXQ7XHJcbiAgICAtLWlvbi1iYWNrZ3JvdW5kLWNvbG9yOiMzNTM1MzU7XHJcbn1cclxuXHJcbmlvbi10b29sYmFye1xyXG4gICAgLS1pb24tYmFja2dyb3VuZC1jb2xvcjojZWVlZWVlO1xyXG59XHJcblxyXG5pb24tdGl0bGUge1xyXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG59XHJcblxyXG4jdG9vbGJhckljb257XHJcbiAgICBmb250LXNpemU6IDEuN2VtO1xyXG59XHJcblxyXG5he1xyXG4gICAgdGV4dC1kZWNvcmF0aW9uOm5vbmU7XHJcbiAgICBjb2xvcjogYmxhY2s7XHJcbn1cclxuXHJcbi5jZW50ZXJlZHtcclxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxufVxyXG5cclxuLnRleHQge1xyXG4gICAgZm9udC1mYW1pbHk6IE9wZW4gU2FucyBMaWdodDtcclxufVxyXG5cclxuXHJcbmhye1xyXG4gICAgYmFja2dyb3VuZDojZWVlZWVlO1xyXG4gICAgd2lkdGg6IDcwJSAhaW1wb3J0YW50O1xyXG59XHJcblxyXG5cclxuLm15LWxhYmVse1xyXG4gICAgZm9udC1mYW1pbHk6IE9wZW4gU2FucyBMaWdodDtcclxufVxyXG5cclxuLmJhY2tJY29uIHtcclxuICAgIGNvbG9yOiByZ2IoMjU1LCAxNzQsIDApO1xyXG4gICAgZm9udC1zaXplOiAxNTAlO1xyXG59XHJcblxyXG4uYmFjayB7XHJcbiAgICBjb2xvcjogcmdiKDI1NSwgMTc0LCAwKTtcclxufVxyXG4gLmNhciB7XHJcbiAgICAgY29sb3I6IGdyZWVuO1xyXG4gfVxyXG5cclxuLmNhcmQtdHJhbnNwYXJlbnQge1xyXG4gICAgbWFyZ2luOiAwIGF1dG87XHJcblxyXG4gICAgLmhlYWRlci10cmFuc3BhcmVudCB7XHJcbiAgICAgICAgaGVpZ2h0OiAxNTBweDsgIFxyXG5cclxuICAgICAgICAuYXZhdGFyIHtcclxuICAgICAgICAgICAgd2lkdGg6IDE2MHB4O1xyXG4gICAgICAgICAgICBoZWlnaHQ6IDEyMHB4O1xyXG4gICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XHJcbiAgICAgICAgICAgIG1hcmdpbjogMCBhdXRvO1xyXG4gICAgICAgICAgICBpbWcge1xyXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAxMzBweDtcclxuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xyXG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlO1xyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgICAgICAgICAgICAgYm90dG9tOiBjYWxjKC0xKig4MHB4ICsgOHB4KSk7XHJcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xyXG4gICAgICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IDIwcHg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuLm15LWN1c3RvbS1jbGFzcyB7XHJcbiAgICAtLWJhY2tncm91bmQ6ICNlNWU1ZTU7XHJcbiAgfVxyXG5cclxuLmNhcmQtYm9keSB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmZmZmO1xyXG4gICAgcGFkZGluZzogMzBweDtcclxuICAgIGhlaWdodDogMTAwJTtcclxuICAgIG92ZXJmbG93OiBoaWRkZW47XHJcblxyXG4gICAgLnVzZXItbWV0YSB7XHJcbiAgICAgICAgcGFkZGluZy10b3A6IDQwcHg7XHJcblxyXG4gICAgICAgIC5wbGF5ZXJuYW1lIHtcclxuICAgICAgICAgICAgZm9udC1zaXplOiAyNHB4O1xyXG4gICAgICAgICAgICBmb250LXdlaWdodDogNjAwO1xyXG4gICAgICAgICAgICBjb2xvcjogIzMwMzk0MDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC5jb3VudHJ5IHtcclxuICAgICAgICAgICAgZm9udC1zaXplOiA5MCU7XHJcbiAgICAgICAgICAgIGNvbG9yOiAjOTQ5ZWE2O1xyXG4gICAgICAgICAgICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlO1xyXG4gICAgICAgICAgICBtYXJnaW46IDAgYXV0bztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIl19 */\";","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { DriverProfilePage } from './driver-profile.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: DriverProfilePage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class DriverProfilePageRoutingModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { AccountService } from 'src/_services';\r\nimport { Location } from '@angular/common';\r\nimport { DriverService } from 'src/_services/driver/driver.service';\r\nimport { Car } from 'src/_models/car';\r\nimport * as signalR from '@aspnet/signalr';\r\nimport { AlertController, PopoverController } from '@ionic/angular';\r\nimport { WalletService } from 'src/_services/wallet/wallet.service';\r\nimport { Driver } from 'src/_models';\r\nimport { ImageService } from 'src/_services/image/image.service';\r\nimport { HttpEventType } from '@angular/common/http';\r\nimport { environment } from 'src/environments/environment';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { LanguagePopoverPage } from '../language-popover/language-popover.page';\r\nimport { Subscription } from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'app-driver-profile',\r\n  templateUrl: './driver-profile.page.html',\r\n  styleUrls: ['./driver-profile.page.scss'],\r\n})\r\nexport class DriverProfilePage implements OnInit {\r\n  private subscriptions: Subscription[] = [];\r\n  user = this.accountService.userValue;\r\n  private driverId = this.user.driverId;\r\n  referral: string;\r\n  driverCars: Car[];\r\n  carsCount = 0;\r\n  walletAmount: number;\r\n  isActiveCar: boolean;\r\n  driver: Driver;\r\n  rating: string;\r\n  driverCommission: number;\r\n  folderName = \"driverFacePic\";\r\n  imgPath: string;\r\n  imgType = \"profile\";\r\n  public progress: number;\r\n  public message: string;\r\n\r\n  constructor(private accountService: AccountService,\r\n    private driverService: DriverService,\r\n    private route: Router,\r\n    private location: Location,\r\n    private alertController: AlertController,\r\n    private walletService: WalletService,\r\n    private imageService: ImageService,\r\n    private translate: TranslateService,\r\n    private popoverController: PopoverController) {\r\n    this.translate.setDefaultLang(this.accountService.userValue.choosenLanguage);\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.getDriver();\r\n    this.getProfilePicture();\r\n    this.getWalletAmount();\r\n    this.getCars();\r\n    const connection = new signalR.HubConnectionBuilder()\r\n      .configureLogging(signalR.LogLevel.Information)\r\n      .withUrl(`${environment.signalRUrl}/orderHub`)\r\n      .build();\r\n\r\n    // const connection = new signalR.HubConnectionBuilder()\r\n    //    .configureLogging(signalR.LogLevel.Information)\r\n    //    .withUrl(`${environment.signalRUrl}/orderHub`, {\r\n    //     skipNegotiation: true,\r\n    //     transport: signalR.HttpTransportType.WebSockets})\r\n    //    .build();\r\n\r\n    connection.start().then(function () {\r\n      console.log('signalR Connected in profile');\r\n    }).catch(function (err) {\r\n      return console.log(err);\r\n    });\r\n\r\n    connection.on('Voted', (driverId) => {\r\n      if (this.driverId == driverId) {\r\n        this.getDriver();\r\n      }\r\n    });\r\n\r\n    connection.on('CarAction', (driverId) => {\r\n      if (this.driverId == driverId) {\r\n        this.getCars();\r\n      }\r\n    });\r\n\r\n    connection.on('WalletAction', (userId) => {\r\n      this.getWalletAmount();\r\n    });\r\n\r\n    connection.on('BroadcastMessage', () => {\r\n      this.getProfilePicture();\r\n    });\r\n  }\r\n\r\n  copy(referral: string) {\r\n    console.log(referral)\r\n  }\r\n\r\n  getProfilePicture() {\r\n    this.subscriptions.push(this.imageService.getMyPicture(this.user.id)\r\n      .subscribe(x => {\r\n        if (x == null) {\r\n          return;\r\n        }\r\n        this.imgPath = x.path;\r\n      }))\r\n  }\r\n\r\n  upload(files) {\r\n    if (files.length === 0) {\r\n      return;\r\n    }\r\n\r\n    let fileToUpload = <File>files[0];\r\n    const formData = new FormData();\r\n    formData.append('file', fileToUpload, fileToUpload.name);\r\n\r\n    this.subscriptions.push(this.imageService.upload(formData, this.folderName, this.user.id, this.imgType)\r\n      .subscribe(event => {\r\n        if (event.type === HttpEventType.UploadProgress)\r\n          this.progress = Math.round(100 * event.loaded / event.total);\r\n        else if (event.type === HttpEventType.Response) {\r\n          this.message = 'Upload success.';\r\n        }\r\n      }))\r\n  }\r\n\r\n  getDriver() {\r\n    this.subscriptions.push(this.driverService.getDriver(this.driverId)\r\n      .subscribe(d => {\r\n        if (d == null) {\r\n          console.log('No driver');\r\n          return;\r\n        }\r\n        this.driver = d;\r\n        this.rating = d.rating.toFixed(2);\r\n        this.driverCommission = d.comission;\r\n        (Math.round(this.driverCommission * 100) / 100).toFixed(2);\r\n        this.referral = this.driver.referal;\r\n      }))\r\n  }\r\n\r\n  getWalletAmount() {\r\n    this.subscriptions.push(this.walletService.getMyWallet(this.user.id)\r\n      .subscribe(x => {\r\n        if (x.ammount) {\r\n          this.walletAmount = x.ammount;\r\n        } else {\r\n          this.walletAmount = 0;\r\n        }\r\n      }))\r\n  }\r\n\r\n  getCars() {\r\n    this.subscriptions.push(this.driverService.getDriverCars(this.driverId)\r\n      .subscribe(d => {\r\n        if (d == null) {\r\n          console.log('No cars');\r\n          return;\r\n        }\r\n        this.driverCars = d;\r\n        this.carsCount = this.driverCars.length;\r\n      }))\r\n  }\r\n\r\n  openHistory() {\r\n    this.route.navigate(['menu/driver-history']);\r\n  }\r\n\r\n  addNewCar() {\r\n    this.route.navigate(['menu/car-register'])\r\n  }\r\n\r\n  active(car: Car) {\r\n    if (car.isActive) {\r\n      return;\r\n    }\r\n\r\n    if (car.confirmation == false) {\r\n      this.presentAlert();\r\n      return;\r\n    }\r\n\r\n    this.subscriptions.push(this.driverService.activeCar(car.id, car.driverId)\r\n      .subscribe(x => {\r\n        this.isActiveCar = x.isActive;\r\n        console.log(x);\r\n      }))\r\n  }\r\n\r\n  deleteCar(id: string) {\r\n   this.deleteCarConfirmation(id);\r\n  }\r\n\r\n  goBack() {\r\n    this.location.back();\r\n  }\r\n\r\n  async openLanguagePopover(ev) {\r\n    const popover = await this.popoverController.create({\r\n      component: LanguagePopoverPage,\r\n      event: ev\r\n    });\r\n    await popover.present();\r\n  }\r\n\r\n  async presentAlert() {\r\n    this.translate.get(['Confirmation', 'Your car is not confirmet yet.'])\r\n    .subscribe(async text => {\r\n      const alert = await this.alertController.create({\r\n        cssClass: 'my-custom-class',\r\n        header: text['Confirmation'],\r\n        message: text['Your car is not confirmet yet.'],\r\n        buttons: ['OK']\r\n      });\r\n  \r\n      await alert.present();\r\n    })\r\n    \r\n  }\r\n\r\n  async deleteCarConfirmation(id: string) {\r\n    this.translate.get(['Delete the car?', 'Yes', 'No'])\r\n      .subscribe(async text => {\r\n        const popup = await this.alertController.create({\r\n          header: text['Delete the car?'],\r\n\r\n          buttons: [\r\n            {\r\n              text: text['Yes'],\r\n              handler: () => {\r\n                this.subscriptions.push(this.driverService.deleteCar(id)\r\n                .subscribe(x => {\r\n                  console.log(x);\r\n                }))\r\n              }\r\n            },\r\n            {\r\n              text: text['No'],\r\n              \r\n            }\r\n          ]\r\n        });\r\n        await popup.present();\r\n      })\r\n  }\r\n\r\n  chargeCash() {\r\n    this.route.navigate(['menu/payments'])\r\n    }\r\n\r\n    reservation() {\r\n        this.route.navigate(['menu/reservations'])\r\n    }\r\n}\r\n","export default \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-menu-button></ion-menu-button>\\r\\n    </ion-buttons>\\r\\n\\r\\n    <ion-title>\\r\\n      <ion-label>{{'Profile' | translate}}</ion-label>\\r\\n    </ion-title>\\r\\n\\r\\n    <ion-buttons slot=\\\"end\\\">\\r\\n      <ion-icon (click)='openLanguagePopover($event)' id=\\\"toolbarIcon\\\" name=\\\"language-outline\\\"></ion-icon>\\r\\n    </ion-buttons>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n<ion-content padding class=\\\"background\\\">\\r\\n  <div class=\\\"row mt-2\\\">\\r\\n    <div class=\\\"col\\\">\\r\\n      <div class=\\\"card-transparent\\\">\\r\\n        <div class=\\\"header-transparent\\\">\\r\\n          <div class=\\\"avatar\\\">\\r\\n            <img src={{imgPath}} onerror=\\\"this.onerror=null; this.src='../assets/default.png'\\\" alt=\\\"\\\">\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n      \\r\\n\\r\\n      <div class=\\\"card-body\\\">\\r\\n\\r\\n\\r\\n          <div class=\\\"user-meta ion-text-center\\\">\\r\\n              <h3 class=\\\"playername my-label text\\\">{{user.firstName}} {{user.lastName}}</h3>\\r\\n              <h4 class=\\\"playername my-label text\\\">{{user.phone}}</h4>\\r\\n\\r\\n              <h6 class=\\\"ranking my-label text\\\">\\r\\n                  {{'Wallet ballance' | translate}}: <ion-chip>\\r\\n                      <ion-label>{{walletAmount}} лв.</ion-label>\\r\\n                  </ion-chip>\\r\\n              </h6>\\r\\n              <ion-chip (click)=\\\"chargeCash()\\\">\\r\\n                  <ion-label class=\\\"my-label text\\\">\\r\\n                      <a href=\\\"https://www.mycybercab.com/#/payments\\\">{{'Click to charge your account' | translate}}</a>\\r\\n                  </ion-label>\\r\\n              </ion-chip>\\r\\n              <h6 class=\\\"ranking my-label text\\\">\\r\\n                  {{'My rating' | translate}}: <ion-chip>\\r\\n                      <ion-label>{{rating}}</ion-label>\\r\\n                  </ion-chip>\\r\\n              </h6>\\r\\n          </div>\\r\\n\\r\\n          <input type=\\\"file\\\" #file placeholder=\\\"Choose file\\\" (change)=\\\"upload(file.files)\\\" style=\\\"display:none;\\\">\\r\\n          <button class=\\\"my-label btn btn-info btn-block mb-1\\\" (click)=\\\"file.click()\\\">{{'Upload picture' | translate}}</button>\\r\\n\\r\\n          <div class=\\\"col-md-4\\\">\\r\\n              <span class=\\\"upload\\\" *ngIf=\\\"progress > 0\\\">\\r\\n                  {{progress}}%\\r\\n              </span>\\r\\n              <span class=\\\"upload\\\" *ngIf=\\\"message\\\">\\r\\n                  {{message}}\\r\\n              </span>\\r\\n          </div>\\r\\n          <button class=\\\"my-label text btn btn-info btn-block\\\" (click)=\\\"openHistory()\\\">{{'Drive history' | translate}}</button>\\r\\n          <button class=\\\"my-label mt-1 text btn btn-info btn-block\\\" (click)=\\\"addNewCar()\\\">{{'Add new car' | translate}}</button>\\r\\n          <button class=\\\"my-label mt-1 text btn btn-info btn-block\\\" (click)=\\\"reservation()\\\">{{'Suburban reservations' | translate}}</button>\\r\\n\\r\\n          <h6 *ngIf=\\\"carsCount > 0\\\" class=\\\"ranking ion-text-center\\\">\\r\\n              <ion-chip>\\r\\n                  <ion-label class=\\\"my-label text\\\">{{'Choose your car for today' | translate}}:</ion-label>\\r\\n              </ion-chip>\\r\\n          </h6>\\r\\n\\r\\n          <h6 *ngIf=\\\"carsCount == 0\\\" class=\\\"ranking ion-text-center\\\">\\r\\n              <ion-chip>\\r\\n                  <ion-label class=\\\"my-label text\\\">{{'You must add car' | translate}}</ion-label>\\r\\n              </ion-chip>\\r\\n          </h6>\\r\\n          <div *ngFor=\\\"let car of driverCars\\\">\\r\\n              <div class=\\\"row\\\">\\r\\n                  <div class=\\\"col-10\\\">\\r\\n                      <button class=\\\"my-label text btn btn-dark btn-block mt-1\\\" *ngIf=\\\"car.isActive == false && car.typeId == 2\\\" (click)=\\\"active(car)\\\">\\r\\n                          {{car.model}}\\r\\n                          - Comfort\\r\\n                      </button>\\r\\n\\r\\n                      <button class=\\\"my-label text btn btn-dark btn-block mt-1\\\" *ngIf=\\\"car.isActive == false && car.typeId == 1\\\" (click)=\\\"active(car)\\\">\\r\\n                          {{car.model}}\\r\\n                          - Normal\\r\\n                      </button>\\r\\n\\r\\n                      <button class=\\\"my-label text btn btn-success btn-block mt-1\\\" *ngIf=\\\"car.isActive == true && car.typeId == 2\\\" (click)=\\\"active(car)\\\">\\r\\n                          {{car.model}}\\r\\n                          - Comfort\\r\\n                      </button>\\r\\n\\r\\n                      <button class=\\\"my-label text btn-success btn-block mt-1\\\" *ngIf=\\\"car.isActive == true && car.typeId == 1\\\" (click)=\\\"active(car)\\\">\\r\\n                          {{car.model}}\\r\\n                          - Normal\\r\\n                      </button>\\r\\n                  </div>\\r\\n                  <div class=\\\"col-2\\\">\\r\\n                      <button class=\\\"my-label text btn btn-danger mt-1\\\" (click)=\\\"deleteCar(car.id)\\\" style=\\\"float: right\\\" expand=\\\"full\\\"\\r\\n                              color=\\\"danger\\\">\\r\\n                          {{'Delete'| translate}}\\r\\n                      </button>\\r\\n\\r\\n                  </div>\\r\\n\\r\\n              </div>\\r\\n\\r\\n          </div>\\r\\n\\r\\n          <!-- <div class=\\\"text-center ranking my-label text\\\">\\r\\n      {{'My referral'| translate}}\\r\\n      <ion-chip (click)=\\\"copy(referral)\\\">\\r\\n        <ion-label>{{referral}}</ion-label>\\r\\n      </ion-chip>\\r\\n    </div> -->\\r\\n\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n\\r\\n</ion-content>\";"]}