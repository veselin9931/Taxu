!function(){function n(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function e(n,e){for(var t=0;t<e.length;t++){var o=e[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}function t(n,t,o){return t&&e(n.prototype,t),o&&e(n,o),n}(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{wZQh:function(e,o,r){"use strict";r.r(o),r.d(o,"HttpLoaderFactory",function(){return R}),r.d(o,"OutOfTownPageModule",function(){return K});var i,a,c=r("ofXK"),s=r("3Pt+"),b=r("TEn/"),u=r("tyNb"),l=r("mrSG"),d=r("Gpoy"),p=r("AytR"),f=r("oXKM"),h=r("fXoL"),g=r("z6cu"),m=r("JIr8"),v=r("tk/3"),M=r("Dsd+"),y=((a=function(){function e(t,o){n(this,e),this.http=t,this.sharedService=o,this.orders=[]}return t(e,[{key:"getOptions",value:function(){var n=this.sharedService.headerGerneration();return this.http.get("".concat(p.a.apiUrl,"/api/suborder/options"),{headers:n}).pipe(Object(m.a)(this.handleError))}},{key:"handleError",value:function(n){var e="";return n.error instanceof ErrorEvent?(console.log("Client side error."),e="Error: ".concat(n.error.message)):(console.log("Server side error."),e="Error Code: ".concat(n.status,"\nMessage: ").concat(n.message)),console.log(e),Object(g.a)(e)}}]),e}()).\u0275fac=function(n){return new(n||a)(h.Rb(v.a),h.Rb(M.a))},a.\u0275prov=h.Gb({token:a,factory:a.\u0275fac,providedIn:"root"}),a),O=((i=function(){function e(t,o){n(this,e),this.http=t,this.sharedService=o}return t(e,[{key:"createSubOrder",value:function(n){var e=this.sharedService.headerGerneration();return this.http.post("".concat(p.a.apiUrl,"/api/suborder"),n,{headers:e,responseType:"text"}).pipe(Object(m.a)(this.handleError))}},{key:"handleError",value:function(n){var e="";return n.error instanceof ErrorEvent?(console.log("Client side error."),e="Error: ".concat(n.error.message)):(console.log("Server side error."),e="Error Code: ".concat(n.status,"\nMessage: ").concat(n.message)),console.log(e),Object(g.a)(e)}}]),e}()).\u0275fac=function(n){return new(n||i)(h.Rb(v.a),h.Rb(M.a))},i.\u0275prov=h.Gb({token:i,factory:i.\u0275fac,providedIn:"root"}),i),k=r("8Xdb"),w=r("sYmb");function C(n,e){if(1&n&&(h.Nb(0,"ion-select-option",13),h.pc(1),h.Mb()),2&n){var t=e.$implicit;h.ec("value",t.id),h.zb(1),h.tc("",t.location," --\x3e ",t.destination," | ",t.totalPrice," BGN")}}function N(n,e){1&n&&h.Lb(0,"span",14)}function S(n,e){1&n&&(h.Nb(0,"button",21),h.pc(1," {{'Cost'| translate'}} : {{orderTotalPrice | number : '1.2-2'}} \ufffd\ufffd. "),h.Mb())}function I(n,e){1&n&&(h.Nb(0,"button",22),h.pc(1),h.Yb(2,"translate"),h.Mb()),2&n&&(h.zb(1),h.rc(" ",h.Zb(2,1,"Cancel")," "))}function P(n,e){if(1&n&&(h.Nb(0,"ion-footer",15),h.Nb(1,"ion-toolbar"),h.Nb(2,"div",16),h.Nb(3,"div",17),h.Nb(4,"div",18),h.oc(5,S,2,0,"button",19),h.oc(6,I,3,3,"button",20),h.Mb(),h.Mb(),h.Mb(),h.Mb(),h.Mb()),2&n){var t=h.Xb();h.zb(5),h.dc("ngIf",1==t.isCompleted),h.zb(1),h.dc("ngIf",1==t.isCompleted)}}var E,z,L=[{path:"",component:(E=function(){function e(t,o,r,i,a){n(this,e),this.popoverController=t,this.optionService=o,this.formBuilder=r,this.subOrderService=i,this.accountService=a,this.options=[],this.subscriptions=[],this.user=this.accountService.userValue,this.status="",this.isSubmitted=!1,this.isCompleted=!1}return t(e,[{key:"ngOnInit",value:function(){this.form=this.formBuilder.group({applicationUserId:[""],status:"Waiting",info:"",date:"",time:"",optionId:""});var n=(new d.b).configureLogging(d.c.Information).withUrl("".concat(p.a.signalRUrl,"/orderHub")).build();n.start().then(function(){console.log("signalR Connected in travelling")}).catch(function(n){return console.log(n)}),n.on("CreatedSubOrder",function(){}),this.getMyOptions()}},{key:"getMyOptions",value:function(){var n=this;this.subscriptions.push(this.optionService.getOptions().subscribe(function(e){n.options=e}))}},{key:"onSubmit",value:function(){var n=this;this.isSubmitted=!0,this.form.valid&&(this.subscriptions.push(this.subOrderService.createSubOrder(this.form.value).subscribe(function(e){n.status=n.form.value.status})),console.log(this.subOrder))}},{key:"openLanguagePopover",value:function(n){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.popoverController.create({component:f.a,event:n});case 2:return t=e.sent,e.next=5,t.present();case 5:case"end":return e.stop()}},e,this)}))}}]),e}(),E.\u0275fac=function(n){return new(n||E)(h.Kb(b.H),h.Kb(y),h.Kb(s.b),h.Kb(O),h.Kb(k.a))},E.\u0275cmp=h.Eb({type:E,selectors:[["app-out-of-town"]],decls:35,vars:11,consts:[["slot","start"],["slot","end"],["id","toolbarIcon","name","language-outline",3,"click"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["displayFormat","MM-DD","placeholder","Select date"],["displayFormat","THH:m\ufffd","placeholder","Select time"],["position","floating"],[1,"row","text-center","pt-4"],[1,"col-md-12"],["type","button",1,"mt-1","btn","btn-warning","fonted",3,"disabled","click"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],["class","ion-no-border",4,"ngIf"],[3,"value"],[1,"spinner-border","spinner-border-sm","mr-1"],[1,"ion-no-border"],[1,"row"],[1,"col"],[1,"d-flex","w-100","justify-content-between"],["class","ml-3 btn btn-info fonted",4,"ngIf"],["class","mr-3 btn btn-danger fonted",4,"ngIf"],[1,"ml-3","btn","btn-info","fonted"],[1,"mr-3","btn","btn-danger","fonted"]],template:function(n,e){1&n&&(h.Nb(0,"ion-header"),h.Nb(1,"ion-toolbar"),h.Nb(2,"ion-buttons",0),h.Lb(3,"ion-menu-button"),h.Mb(),h.Nb(4,"ion-title"),h.Nb(5,"ion-label"),h.pc(6),h.Yb(7,"translate"),h.Mb(),h.Mb(),h.Nb(8,"ion-buttons",1),h.Nb(9,"ion-icon",2),h.Vb("click",function(n){return e.openLanguagePopover(n)}),h.Mb(),h.Mb(),h.Mb(),h.Mb(),h.Nb(10,"ion-content"),h.Nb(11,"ion-item"),h.Nb(12,"ion-label"),h.pc(13,"Trip"),h.Mb(),h.Nb(14,"ion-select",3),h.Vb("ngModelChange",function(n){return e.options=n}),h.oc(15,C,2,4,"ion-select-option",4),h.Mb(),h.Mb(),h.Nb(16,"ion-item"),h.Nb(17,"ion-label"),h.pc(18,"Data"),h.Mb(),h.Lb(19,"ion-datetime",5),h.Mb(),h.Nb(20,"ion-item"),h.Nb(21,"ion-label"),h.pc(22,"Time"),h.Mb(),h.Lb(23,"ion-datetime",6),h.Mb(),h.Nb(24,"ion-item"),h.Nb(25,"ion-label",7),h.pc(26,"Info"),h.Mb(),h.Lb(27,"ion-input"),h.Mb(),h.Nb(28,"div",8),h.Nb(29,"div",9),h.Nb(30,"button",10),h.Vb("click",function(){return e.onSubmit()}),h.pc(31),h.Yb(32,"translate"),h.oc(33,N,1,0,"span",11),h.Mb(),h.Mb(),h.Mb(),h.Mb(),h.oc(34,P,7,2,"ion-footer",12)),2&n&&(h.zb(6),h.qc(h.Zb(7,7,"Out of town")),h.zb(8),h.dc("ngModel",e.options),h.zb(1),h.dc("ngForOf",e.options),h.zb(15),h.dc("disabled",e.isSubmitted),h.zb(1),h.rc(" ",h.Zb(32,9,"Make a order")," "),h.zb(2),h.dc("ngIf",e.isSubmitted),h.zb(1),h.dc("ngIf",1==e.isCompleted))},directives:[b.l,b.B,b.e,b.s,b.A,b.p,b.m,b.i,b.o,b.w,b.J,s.h,s.j,c.k,b.j,b.n,b.K,c.l,b.x,b.k],pipes:[w.c],styles:["ion-content[_ngcontent-%COMP%]{--ion-background-color:#e9e9e9}ion-toolbar[_ngcontent-%COMP%]{--ion-background-color:#eee}#map[_ngcontent-%COMP%]{height:100%;width:100%}ion-title[_ngcontent-%COMP%]{text-align:center}h5[_ngcontent-%COMP%]{font-size:.9em}#toolbarIcon[_ngcontent-%COMP%]{font-size:1.7em}.fonted[_ngcontent-%COMP%]{font-family:Open Sans Light}.centered[_ngcontent-%COMP%]{text-align:center}.text[_ngcontent-%COMP%]{font-family:Open Sans Light}hr[_ngcontent-%COMP%]{background:#eee;width:70%!important}.blink_me[_ngcontent-%COMP%]{-webkit-animation:blinker 1s linear infinite;animation:blinker 1s linear infinite}@-webkit-keyframes blinker{50%{opacity:0}}@keyframes blinker{50%{opacity:0}}"]}),E)}],_=((z=function e(){n(this,e)}).\u0275fac=function(n){return new(n||z)},z.\u0275mod=h.Ib({type:z}),z.\u0275inj=h.Hb({imports:[[u.h.forChild(L)],u.h]}),z),j=r("mqiu"),x=r("QhVT");function R(n){return new j.a(n)}var T,K=((T=function e(){n(this,e)}).\u0275fac=function(n){return new(n||T)},T.\u0275mod=h.Ib({type:T}),T.\u0275inj=h.Hb({imports:[[c.b,s.e,b.C,_,w.b.forChild({loader:{provide:w.a,useFactory:R,deps:[v.a]}}),x.LanguagePopoverPageModule]]}),T)}}])}();