!function(){function e(e,n){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return t(e,n)}(e))||n&&e&&"number"==typeof e.length){i&&(e=i);var o=0,r=function(){};return{s:r,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,l=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return a=e.done,e},e:function(e){l=!0,s=e},f:function(){try{a||null==i.return||i.return()}finally{if(l)throw s}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}(self.webpackChunkcsharpcornerauthor=self.webpackChunkcsharpcornerauthor||[]).push([[4488],{4488:function(t,i,r){"use strict";r.r(i),r.d(i,{BecomeDriverPageModule:function(){return L},HttpLoaderFactory:function(){return D}});var s=r(8583),a=r(3679),l=r(7823),u=r(4481),c=r(4762),p=r(1841),d=r(3018),f=function(){function e(t){var i;n(this,e),this.rawFile=t;var o=(i=t)&&(i.nodeName||i.prop&&i.attr&&i.find)?t.value:t;this["_createFrom"+("string"==typeof o?"FakePath":"Object")](o)}return o(e,[{key:"_createFromFakePath",value:function(e){this.lastModifiedDate=void 0,this.size=void 0,this.type="like/"+e.slice(e.lastIndexOf(".")+1).toLowerCase(),this.name=e.slice(e.lastIndexOf("/")+e.lastIndexOf("\\")+2)}},{key:"_createFromObject",value:function(e){this.size=e.size,this.type=e.type,this.name=e.name}}]),e}(),h=function(){function e(t,i,o){n(this,e),this.url="/",this.headers=[],this.withCredentials=!0,this.formData=[],this.isReady=!1,this.isUploading=!1,this.isUploaded=!1,this.isSuccess=!1,this.isCancel=!1,this.isError=!1,this.progress=0,this.index=void 0,this.uploader=t,this.some=i,this.options=o,this.file=new f(i),this._file=i,t.options&&(this.method=t.options.method||"POST",this.alias=t.options.itemAlias||"file"),this.url=t.options.url}return o(e,[{key:"upload",value:function(){try{this.uploader.uploadItem(this)}catch(e){this.uploader._onCompleteItem(this,"",0,{}),this.uploader._onErrorItem(this,"",0,{})}}},{key:"cancel",value:function(){this.uploader.cancelItem(this)}},{key:"remove",value:function(){this.uploader.removeFromQueue(this)}},{key:"onBeforeUpload",value:function(){}},{key:"onBuildForm",value:function(e){return{form:e}}},{key:"onProgress",value:function(e){return{progress:e}}},{key:"onSuccess",value:function(e,t,n){return{response:e,status:t,headers:n}}},{key:"onError",value:function(e,t,n){return{response:e,status:t,headers:n}}},{key:"onCancel",value:function(e,t,n){return{response:e,status:t,headers:n}}},{key:"onComplete",value:function(e,t,n){return{response:e,status:t,headers:n}}},{key:"_onBeforeUpload",value:function(){this.isReady=!0,this.isUploading=!0,this.isUploaded=!1,this.isSuccess=!1,this.isCancel=!1,this.isError=!1,this.progress=0,this.onBeforeUpload()}},{key:"_onBuildForm",value:function(e){this.onBuildForm(e)}},{key:"_onProgress",value:function(e){this.progress=e,this.onProgress(e)}},{key:"_onSuccess",value:function(e,t,n){this.isReady=!1,this.isUploading=!1,this.isUploaded=!0,this.isSuccess=!0,this.isCancel=!1,this.isError=!1,this.progress=100,this.index=void 0,this.onSuccess(e,t,n)}},{key:"_onError",value:function(e,t,n){this.isReady=!1,this.isUploading=!1,this.isUploaded=!0,this.isSuccess=!1,this.isCancel=!1,this.isError=!0,this.progress=0,this.index=void 0,this.onError(e,t,n)}},{key:"_onCancel",value:function(e,t,n){this.isReady=!1,this.isUploading=!1,this.isUploaded=!1,this.isSuccess=!1,this.isCancel=!0,this.isError=!1,this.progress=0,this.index=void 0,this.onCancel(e,t,n)}},{key:"_onComplete",value:function(e,t,n){this.onComplete(e,t,n),this.uploader.options.removeAfterUpload&&this.remove()}},{key:"_prepareToUploading",value:function(){this.index=this.index||++this.uploader._nextIndex,this.isReady=!0}}]),e}(),m=function(){var e=function(){function e(){n(this,e)}return o(e,null,[{key:"getMimeClass",value:function(e){var t="application";return-1!==this.mime_psd.indexOf(e.type)||e.type.match("image.*")?t="image":e.type.match("video.*")?t="video":e.type.match("audio.*")?t="audio":"application/pdf"===e.type?t="pdf":-1!==this.mime_compress.indexOf(e.type)?t="compress":-1!==this.mime_doc.indexOf(e.type)?t="doc":-1!==this.mime_xsl.indexOf(e.type)?t="xls":-1!==this.mime_ppt.indexOf(e.type)&&(t="ppt"),"application"===t&&(t=this.fileTypeDetection(e.name)),t}},{key:"fileTypeDetection",value:function(e){var t={jpg:"image",jpeg:"image",tif:"image",psd:"image",bmp:"image",png:"image",nef:"image",tiff:"image",cr2:"image",dwg:"image",cdr:"image",ai:"image",indd:"image",pin:"image",cdp:"image",skp:"image",stp:"image","3dm":"image",mp3:"audio",wav:"audio",wma:"audio",mod:"audio",m4a:"audio",compress:"compress",zip:"compress",rar:"compress","7z":"compress",lz:"compress",z01:"compress",bz2:"compress",gz:"compress",pdf:"pdf",xls:"xls",xlsx:"xls",ods:"xls",mp4:"video",avi:"video",wmv:"video",mpg:"video",mts:"video",flv:"video","3gp":"video",vob:"video",m4v:"video",mpeg:"video",m2ts:"video",mov:"video",doc:"doc",docx:"doc",eps:"doc",txt:"doc",odt:"doc",rtf:"doc",ppt:"ppt",pptx:"ppt",pps:"ppt",ppsx:"ppt",odp:"ppt"},n=e.split(".");if(n.length<2)return"application";var i=n[n.length-1].toLowerCase();return void 0===t[i]?"application":t[i]}}]),e}();return e.mime_doc=["application/msword","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.wordprocessingml.template","application/vnd.ms-word.document.macroEnabled.12","application/vnd.ms-word.template.macroEnabled.12"],e.mime_xsl=["application/vnd.ms-excel","application/vnd.ms-excel","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.openxmlformats-officedocument.spreadsheetml.template","application/vnd.ms-excel.sheet.macroEnabled.12","application/vnd.ms-excel.template.macroEnabled.12","application/vnd.ms-excel.addin.macroEnabled.12","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],e.mime_ppt=["application/vnd.ms-powerpoint","application/vnd.ms-powerpoint","application/vnd.ms-powerpoint","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.presentationml.template","application/vnd.openxmlformats-officedocument.presentationml.slideshow","application/vnd.ms-powerpoint.addin.macroEnabled.12","application/vnd.ms-powerpoint.presentation.macroEnabled.12","application/vnd.ms-powerpoint.presentation.macroEnabled.12","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],e.mime_psd=["image/photoshop","image/x-photoshop","image/psd","application/photoshop","application/psd","zz-application/zz-winassoc-psd"],e.mime_compress=["application/x-gtar","application/x-gcompress","application/compress","application/x-tar","application/x-rar-compressed","application/octet-stream","application/x-zip-compressed","application/zip-compressed","application/x-7z-compressed","application/gzip","application/x-bzip2"],e}(),g=function(){function t(e){n(this,t),this.isUploading=!1,this.queue=[],this.progress=0,this._nextIndex=0,this.options={autoUpload:!1,isHTML5:!0,filters:[],removeAfterUpload:!1,disableMultipart:!1,formatDataFunction:function(e){return e._file},formatDataFunctionIsAsync:!1},this.setOptions(e),this.response=new d.vpe}return o(t,[{key:"setOptions",value:function(e){this.options=Object.assign(this.options,e),this.authToken=this.options.authToken,this.authTokenHeader=this.options.authTokenHeader||"Authorization",this.autoUpload=this.options.autoUpload,this.options.filters.unshift({name:"queueLimit",fn:this._queueLimitFilter}),this.options.maxFileSize&&this.options.filters.unshift({name:"fileSize",fn:this._fileSizeFilter}),this.options.allowedFileType&&this.options.filters.unshift({name:"fileType",fn:this._fileTypeFilter}),this.options.allowedMimeType&&this.options.filters.unshift({name:"mimeType",fn:this._mimeTypeFilter});for(var t=0;t<this.queue.length;t++)this.queue[t].url=this.options.url}},{key:"addToQueue",value:function(t,n,i){var o,r=this,s=[],a=e(t);try{for(a.s();!(o=a.n()).done;){var l=o.value;s.push(l)}}catch(d){a.e(d)}finally{a.f()}var u=this._getFilters(i),c=this.queue.length,p=[];s.map(function(e){n||(n=r.options);var t=new f(e);if(r._isValidFile(t,u,n)){var i=new h(r,e,n);p.push(i),r.queue.push(i),r._onAfterAddingFile(i)}else r._onWhenAddingFileFailed(t,u[r._failFilterIndex],n)}),this.queue.length!==c&&(this._onAfterAddingAll(p),this.progress=this._getTotalProgress()),this._render(),this.options.autoUpload&&this.uploadAll()}},{key:"removeFromQueue",value:function(e){var t=this.getIndexOfItem(e),n=this.queue[t];n.isUploading&&n.cancel(),this.queue.splice(t,1),this.progress=this._getTotalProgress()}},{key:"clearQueue",value:function(){for(;this.queue.length;)this.queue[0].remove();this.progress=0}},{key:"uploadItem",value:function(e){var t=this.getIndexOfItem(e),n=this.queue[t],i=this.options.isHTML5?"_xhrTransport":"_iframeTransport";n._prepareToUploading(),this.isUploading||(this.isUploading=!0,this[i](n))}},{key:"cancelItem",value:function(e){var t=this.getIndexOfItem(e),n=this.queue[t];n&&n.isUploading&&(this.options.isHTML5?n._xhr:n._form).abort()}},{key:"uploadAll",value:function(){var e=this.getNotUploadedItems().filter(function(e){return!e.isUploading});e.length&&(e.map(function(e){return e._prepareToUploading()}),e[0].upload())}},{key:"cancelAll",value:function(){this.getNotUploadedItems().map(function(e){return e.cancel()})}},{key:"isFile",value:function(e){return function(e){return File&&e instanceof File}(e)}},{key:"isFileLikeObject",value:function(e){return e instanceof f}},{key:"getIndexOfItem",value:function(e){return"number"==typeof e?e:this.queue.indexOf(e)}},{key:"getNotUploadedItems",value:function(){return this.queue.filter(function(e){return!e.isUploaded})}},{key:"getReadyItems",value:function(){return this.queue.filter(function(e){return e.isReady&&!e.isUploading}).sort(function(e,t){return e.index-t.index})}},{key:"destroy",value:function(){}},{key:"onAfterAddingAll",value:function(e){return{fileItems:e}}},{key:"onBuildItemForm",value:function(e,t){return{fileItem:e,form:t}}},{key:"onAfterAddingFile",value:function(e){return{fileItem:e}}},{key:"onWhenAddingFileFailed",value:function(e,t,n){return{item:e,filter:t,options:n}}},{key:"onBeforeUploadItem",value:function(e){return{fileItem:e}}},{key:"onProgressItem",value:function(e,t){return{fileItem:e,progress:t}}},{key:"onProgressAll",value:function(e){return{progress:e}}},{key:"onSuccessItem",value:function(e,t,n,i){return{item:e,response:t,status:n,headers:i}}},{key:"onErrorItem",value:function(e,t,n,i){return{item:e,response:t,status:n,headers:i}}},{key:"onCancelItem",value:function(e,t,n,i){return{item:e,response:t,status:n,headers:i}}},{key:"onCompleteItem",value:function(e,t,n,i){return{item:e,response:t,status:n,headers:i}}},{key:"onCompleteAll",value:function(){}},{key:"_mimeTypeFilter",value:function(e){return!(this.options.allowedMimeType&&-1===this.options.allowedMimeType.indexOf(e.type))}},{key:"_fileSizeFilter",value:function(e){return!(this.options.maxFileSize&&e.size>this.options.maxFileSize)}},{key:"_fileTypeFilter",value:function(e){return!(this.options.allowedFileType&&-1===this.options.allowedFileType.indexOf(m.getMimeClass(e)))}},{key:"_onErrorItem",value:function(e,t,n,i){e._onError(t,n,i),this.onErrorItem(e,t,n,i)}},{key:"_onCompleteItem",value:function(e,t,n,i){e._onComplete(t,n,i),this.onCompleteItem(e,t,n,i);var o=this.getReadyItems()[0];this.isUploading=!1,o?o.upload():(this.onCompleteAll(),this.progress=this._getTotalProgress(),this._render())}},{key:"_headersGetter",value:function(e){return function(t){return t?e[t.toLowerCase()]||void 0:e}}},{key:"_xhrTransport",value:function(t){var n,i=this,o=this,r=t._xhr=new XMLHttpRequest;if(this._onBeforeUploadItem(t),"number"!=typeof t._file.size)throw new TypeError("The file specified is no longer valid");if(this.options.disableMultipart)n=this.options.formatDataFunction(t);else{n=new FormData,this._onBuildItemForm(t,n);var s=function(){return n.append(t.alias,t._file,t.file.name)};this.options.parametersBeforeFiles||s(),void 0!==this.options.additionalParameter&&Object.keys(this.options.additionalParameter).forEach(function(e){var o=i.options.additionalParameter[e];"string"==typeof o&&o.indexOf("{{file_name}}")>=0&&(o=o.replace("{{file_name}}",t.file.name)),n.append(e,o)}),this.options.parametersBeforeFiles&&s()}if(r.upload.onprogress=function(e){var n=Math.round(e.lengthComputable?100*e.loaded/e.total:0);i._onProgressItem(t,n)},r.onload=function(){var e=i._parseHeaders(r.getAllResponseHeaders()),n=i._transformResponse(r.response,e);i["_on"+(i._isSuccessCode(r.status)?"Success":"Error")+"Item"](t,n,r.status,e),i._onCompleteItem(t,n,r.status,e)},r.onerror=function(){var e=i._parseHeaders(r.getAllResponseHeaders()),n=i._transformResponse(r.response,e);i._onErrorItem(t,n,r.status,e),i._onCompleteItem(t,n,r.status,e)},r.onabort=function(){var e=i._parseHeaders(r.getAllResponseHeaders()),n=i._transformResponse(r.response,e);i._onCancelItem(t,n,r.status,e),i._onCompleteItem(t,n,r.status,e)},r.open(t.method,t.url,!0),r.withCredentials=t.withCredentials,this.options.headers){var a,l=e(this.options.headers);try{for(l.s();!(a=l.n()).done;){var u=a.value;r.setRequestHeader(u.name,u.value)}}catch(f){l.e(f)}finally{l.f()}}if(t.headers.length){var c,p=e(t.headers);try{for(p.s();!(c=p.n()).done;){var d=c.value;r.setRequestHeader(d.name,d.value)}}catch(f){p.e(f)}finally{p.f()}}this.authToken&&r.setRequestHeader(this.authTokenHeader,this.authToken),r.onreadystatechange=function(){r.readyState==XMLHttpRequest.DONE&&o.response.emit(r.responseText)},this.options.formatDataFunctionIsAsync?n.then(function(e){return r.send(JSON.stringify(e))}):r.send(n),this._render()}},{key:"_getTotalProgress",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this.options.removeAfterUpload)return e;var t=this.getNotUploadedItems().length,n=100/this.queue.length;return Math.round((t?this.queue.length-t:this.queue.length)*n+e*n/100)}},{key:"_getFilters",value:function(e){if(!e)return this.options.filters;if(Array.isArray(e))return e;if("string"==typeof e){var t=e.match(/[^\s,]+/g);return this.options.filters.filter(function(e){return-1!==t.indexOf(e.name)})}return this.options.filters}},{key:"_render",value:function(){}},{key:"_queueLimitFilter",value:function(){return void 0===this.options.queueLimit||this.queue.length<this.options.queueLimit}},{key:"_isValidFile",value:function(e,t,n){var i=this;return this._failFilterIndex=-1,!t.length||t.every(function(t){return i._failFilterIndex++,t.fn.call(i,e,n)})}},{key:"_isSuccessCode",value:function(e){return e>=200&&e<300||304===e}},{key:"_transformResponse",value:function(e,t){return e}},{key:"_parseHeaders",value:function(e){var t,n,i,o={};return e?(e.split("\n").map(function(e){i=e.indexOf(":"),t=e.slice(0,i).trim().toLowerCase(),n=e.slice(i+1).trim(),t&&(o[t]=o[t]?o[t]+", "+n:n)}),o):o}},{key:"_onWhenAddingFileFailed",value:function(e,t,n){this.onWhenAddingFileFailed(e,t,n)}},{key:"_onAfterAddingFile",value:function(e){this.onAfterAddingFile(e)}},{key:"_onAfterAddingAll",value:function(e){this.onAfterAddingAll(e)}},{key:"_onBeforeUploadItem",value:function(e){e._onBeforeUpload(),this.onBeforeUploadItem(e)}},{key:"_onBuildItemForm",value:function(e,t){e._onBuildForm(t),this.onBuildItemForm(e,t)}},{key:"_onProgressItem",value:function(e,t){var n=this._getTotalProgress(t);this.progress=n,e._onProgress(t),this.onProgressItem(e,t),this.onProgressAll(n),this._render()}},{key:"_onSuccessItem",value:function(e,t,n,i){e._onSuccess(t,n,i),this.onSuccessItem(e,t,n,i)}},{key:"_onCancelItem",value:function(e,t,n,i){e._onCancel(t,n,i),this.onCancelItem(e,t,n,i)}}]),t}(),v=function(){var e=function(){function e(t){n(this,e),this.onFileSelected=new d.vpe,this.element=t}return o(e,[{key:"getOptions",value:function(){return this.uploader.options}},{key:"getFilters",value:function(){return{}}},{key:"isEmptyAfterSelection",value:function(){return!!this.element.nativeElement.attributes.multiple}},{key:"onChange",value:function(){var e=this.element.nativeElement.files,t=this.getOptions(),n=this.getFilters();this.uploader.addToQueue(e,t,n),this.onFileSelected.emit(e),this.isEmptyAfterSelection()&&(this.element.nativeElement.value="")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(d.Y36(d.SBq))},e.\u0275dir=d.lG2({type:e,selectors:[["","ng2FileSelect",""]],hostBindings:function(e,t){1&e&&d.NdJ("change",function(){return t.onChange()})},inputs:{uploader:"uploader"},outputs:{onFileSelected:"onFileSelected"}}),e}(),y=function(){var e=function e(){n(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({imports:[[s.ez]]}),e}(),k=function(){var e=function(){function e(){n(this,e),this.uploader=new g({}),this.hasBaseDropZoneOver=!1}return o(e,[{key:"getFiles",value:function(){return this.uploader.queue.map(function(e){return e.file})}},{key:"fileOverBase",value:function(e){this.hasBaseDropZoneOver=e}},{key:"reorderFiles",value:function(e){var t=this.uploader.queue.splice(e.detail.from,1)[0];this.uploader.queue.splice(e.detail.to,0,t)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-multi-file-upload"]],decls:5,vars:1,consts:[[1,"file-input-container"],["type","file","ng2FileSelect","","multiple","",3,"uploader"],["name","add-outline","color","dark"]],template:function(e,t){1&e&&(d.TgZ(0,"div",0),d.TgZ(1,"label"),d._UZ(2,"input",1),d._UZ(3,"ion-icon",2),d.qZA(),d.qZA(),d._UZ(4,"br")),2&e&&(d.xp6(2),d.Q6J("uploader",t.uploader))},directives:[v,l.gu],styles:[".file-input-container[_ngcontent-%COMP%]{text-align:right}input[type=file][_ngcontent-%COMP%]{display:none}label[_ngcontent-%COMP%]{border:1px solid #ccc;padding:8px 15px;cursor:pointer}.nv-file-over[_ngcontent-%COMP%]{border:3px dotted red}"]}),e}(),Z=r(4426),_=r(2340),x=r(6522),A=r(5056),b=r(292),T=r(1799),q=r(7800);function I(e,t){if(1&e&&(d.TgZ(0,"ion-item"),d.TgZ(1,"ion-label"),d._uU(2),d.qZA(),d.qZA()),2&e){var n=t.$implicit;d.xp6(2),d.hij(" ",null==n||null==n.file?null:n.file.name," ")}}function w(e,t){if(1&e&&(d.TgZ(0,"div",29),d._UZ(1,"div",30),d.qZA()),2&e){var n=d.oxw(2);d.xp6(1),d.Udp("width",n.progress,"%")}}function F(e,t){if(1&e&&(d.TgZ(0,"span",31),d._uU(1),d.qZA()),2&e){var n=d.oxw(2);d.xp6(1),d.hij(" ",n.progress,"% ")}}function C(e,t){if(1&e&&(d.TgZ(0,"span",31),d._uU(1),d.qZA()),2&e){var n=d.oxw(2);d.xp6(1),d.hij(" ",n.message," ")}}function U(e,t){if(1&e&&(d.TgZ(0,"div"),d.TgZ(1,"div",26),d.YNc(2,w,2,2,"div",27),d.YNc(3,F,2,1,"span",28),d.YNc(4,C,2,1,"span",28),d.qZA(),d.qZA()),2&e){var n=d.oxw();d.xp6(2),d.Q6J("ngIf",n.progress>0),d.xp6(1),d.Q6J("ngIf",n.progress>0),d.xp6(1),d.Q6J("ngIf",n.message)}}function O(e,t){if(1&e){var n=d.EpF();d.TgZ(0,"ion-item"),d.TgZ(1,"a",32),d.TgZ(2,"p"),d._UZ(3,"img",33),d.qZA(),d.TgZ(4,"div",34),d._UZ(5,"h5",35),d.TgZ(6,"button",36),d.NdJ("click",function(){d.CHM(n);var e=t.$implicit;return d.oxw().removePicture(e.id)}),d._uU(7),d.ALo(8,"translate"),d.qZA(),d.qZA(),d.qZA(),d.qZA()}if(2&e){var i=t.$implicit;d.xp6(3),d.s9C("src",i.path,d.LSH),d.xp6(4),d.Oqu(d.lcZ(8,2,"Delete"))}}var S,M=[{path:"",component:(S=function(){function e(t,i,o,r,s,a,l,u){n(this,e),this.route=t,this.accountService=i,this.location=o,this.imageService=r,this.driverService=s,this.alertController=a,this.popoverController=l,this.translate=u,this.folderName="driverFacePic",this.imgType="personalImg",this.uploader=new g({}),this.hasBaseDropZoneOver=!1,this.applicationUserId=this.accountService.userValue.id,this.translate.setDefaultLang(this.accountService.userValue.choosenLanguage)}return o(e,[{key:"ngOnInit",value:function(){var e=this;this.getDocs(),this.getDocs.length>=4&&(this.checker=!0),this.checker=!1;var t=(new Z.su).configureLogging(Z.in.Information).withUrl("".concat(_.N.signalRUrl,"/orderHub")).build();t.start().then(function(){console.log("signalR Connected in menu")}).catch(function(e){console.log("Reconnecting in 1 sec."),setTimeout(function(){return t.start()},1e3)}),t.on("OnUpload",function(t){e.getDocs()})}},{key:"getFiles",value:function(){return this.uploader.queue.map(function(e){return e.file})}},{key:"getDocs",value:function(){var e=this;this.imageService.getUserDocuments(this.applicationUserId).subscribe(function(t){console.log(t),e.pics=t,4!==e.pics.length&&(e.isDisabled=!0)})}},{key:"upload",value:function(e){var t=this;if(0!==e){var n=e[0],i=new FormData;i.append("file",n,n.name),this.imageService.upload(i,this.folderName,this.applicationUserId,this.imgType).subscribe(function(e){switch(e.type===p.dt.UploadProgress?t.progress=Math.round(100*e.loaded/e.total):e.type===p.dt.Response&&(t.message="Documents uploaded successfully."),e.type){case p.dt.Sent:console.log("Request has been made!");break;case p.dt.ResponseHeader:console.log("Response header has been received!");break;case p.dt.UploadProgress:t.progress=Math.round(e.loaded/e.total*100);break;case p.dt.Response:setTimeout(function(){t.progress=0},1500)}})}}},{key:"removePicture",value:function(e){this.picDelete(e)}},{key:"goBack",value:function(){this.location.back()}},{key:"onSubmit",value:function(){var e=this;this.imageService.getUserDocuments(this.applicationUserId).subscribe(function(t){e.pics.length>=4?e.driverService.createDriver({ApplicationUserId:e.applicationUserId}).subscribe(function(){e.route.navigate(["menu/car-register"])}):null==t.id?e.notEnoughImages():e.message="Please upload your documents!"})}},{key:"openLanguagePopover",value:function(e){return(0,c.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.popoverController.create({component:x.m,event:e});case 2:return n=t.sent,t.next=5,n.present();case 5:case"end":return t.stop()}},t,this)}))}},{key:"notEnoughImages",value:function(){return(0,c.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.translate.get(["You have to upload 4 document pictures."]).subscribe(function(e){return(0,c.mG)(t,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.alertController.create({header:e["You have to upload 4 document pictures."],buttons:[{text:"Ok",role:"Ok"}]});case 2:return n=t.sent,t.next=5,n.present();case 5:case"end":return t.stop()}},t,this)}))});case 1:case"end":return e.stop()}},e,this)}))}},{key:"picDelete",value:function(e){return(0,c.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.translate.get(["Delete the picture?","Yes","No"]).subscribe(function(t){return(0,c.mG)(n,void 0,void 0,regeneratorRuntime.mark(function n(){var i,o=this;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.alertController.create({header:t["Delete the picture?"],buttons:[{text:t.Yes,handler:function(){o.imageService.removeDocument(e).subscribe(function(e){console.log("Image removed sucessfully")})}},{text:t.No,role:"no"}]});case 2:return i=n.sent,n.next=5,i.present();case 5:case"end":return n.stop()}},n,this)}))});case 1:case"end":return t.stop()}},t,this)}))}}]),e}(),S.\u0275fac=function(e){return new(e||S)(d.Y36(u.F0),d.Y36(A.B),d.Y36(s.Ye),d.Y36(b.A),d.Y36(T.F),d.Y36(l.Br),d.Y36(l.Dh),d.Y36(q.sK))},S.\u0275cmp=d.Xpm({type:S,selectors:[["app-become-driver"]],viewQuery:function(e,t){var n;1&e&&d.Gf(k,1),2&e&&d.iGM(n=d.CRH())&&(t.fileField=n.first)},decls:73,vars:25,consts:[["slot","start"],["slot","end"],["id","toolbarIcon","name","language-outline",3,"click"],["padding","",1,"background"],[1,"row","mt-2"],[1,"col"],["padding",""],[1,"col","text-center"],["color","dark",1,"centered"],[1,"text"],[1,"text","mb-3"],[1,"input-group"],[1,"input-group","mb-1"],["type","text",1,"form-control"],[1,"input-group-append"],["type","file","placeholder","Choose file",2,"display","none",3,"change"],["file1",""],["name","add-outline","color","dark",3,"click"],["file2",""],["file3",""],["file4",""],["disabled","false"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"text-center","mb-3"],["type","submit",1,"btn","btn-dark",3,"disabled","click"],[1,"col-md-4","mt-2"],["class","progress form-group",4,"ngIf"],["class","upload",4,"ngIf"],[1,"progress","form-group"],["role","progressbar",1,"progress-bar","progress-bar-striped","bg-success"],[1,"upload"],[1,"text","list-group-item","list-group-item-action","flex-column","align-items-start"],[3,"src"],[1,"text-center"],[1,"mb-1","fonted"],[1,"btn","btn-danger",3,"click"]],template:function(e,t){if(1&e){var n=d.EpF();d.TgZ(0,"ion-header"),d.TgZ(1,"ion-toolbar"),d.TgZ(2,"ion-buttons",0),d._UZ(3,"ion-menu-button"),d.qZA(),d.TgZ(4,"ion-title"),d.TgZ(5,"ion-label"),d._uU(6,"Cyber"),d.qZA(),d.qZA(),d.TgZ(7,"ion-buttons",1),d.TgZ(8,"ion-icon",2),d.NdJ("click",function(e){return t.openLanguagePopover(e)}),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(9,"ion-content",3),d.TgZ(10,"div",4),d._UZ(11,"div",5),d.qZA(),d.TgZ(12,"ion-content",6),d.TgZ(13,"div",7),d.TgZ(14,"ion-text",8),d.TgZ(15,"h3",9),d._uU(16),d.ALo(17,"translate"),d.qZA(),d._UZ(18,"hr"),d.TgZ(19,"h5",10),d._uU(20),d.ALo(21,"translate"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(22,"div",11),d.TgZ(23,"div",12),d.TgZ(24,"label",13),d._uU(25),d.ALo(26,"translate"),d.qZA(),d.TgZ(27,"div",14),d.TgZ(28,"span"),d.TgZ(29,"input",15,16),d.NdJ("change",function(){d.CHM(n);var e=d.MAs(30);return t.upload(e.files)}),d.qZA(),d.TgZ(31,"label"),d.TgZ(32,"ion-icon",17),d.NdJ("click",function(){return d.CHM(n),d.MAs(30).click()}),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(33,"div",12),d.TgZ(34,"label",13),d._uU(35),d.ALo(36,"translate"),d.qZA(),d.TgZ(37,"div",14),d.TgZ(38,"span"),d.TgZ(39,"input",15,18),d.NdJ("change",function(){d.CHM(n);var e=d.MAs(40);return t.upload(e.files)}),d.qZA(),d.TgZ(41,"label"),d.TgZ(42,"ion-icon",17),d.NdJ("click",function(){return d.CHM(n),d.MAs(40).click()}),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(43,"div",12),d.TgZ(44,"label",13),d._uU(45),d.ALo(46,"translate"),d.qZA(),d.TgZ(47,"div",14),d.TgZ(48,"span"),d.TgZ(49,"input",15,19),d.NdJ("change",function(){d.CHM(n);var e=d.MAs(50);return t.upload(e.files)}),d.qZA(),d.TgZ(51,"label"),d.TgZ(52,"ion-icon",17),d.NdJ("click",function(){return d.CHM(n),d.MAs(50).click()}),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(53,"div",12),d.TgZ(54,"label",13),d._uU(55),d.ALo(56,"translate"),d.qZA(),d.TgZ(57,"div",14),d.TgZ(58,"span"),d.TgZ(59,"input",15,20),d.NdJ("change",function(){d.CHM(n);var e=d.MAs(60);return t.upload(e.files)}),d.qZA(),d.TgZ(61,"label"),d.TgZ(62,"ion-icon",17),d.NdJ("click",function(){return d.CHM(n),d.MAs(60).click()}),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(63,"ion-list"),d.TgZ(64,"ion-reorder-group",21),d.YNc(65,I,3,1,"ion-item",22),d.qZA(),d.qZA(),d.YNc(66,U,5,3,"div",23),d.TgZ(67,"ion-list"),d.YNc(68,O,9,4,"ion-item",22),d.qZA(),d.TgZ(69,"div",24),d.TgZ(70,"button",25),d.NdJ("click",function(){return t.onSubmit()}),d._uU(71),d.ALo(72,"translate"),d.qZA(),d.qZA(),d.qZA(),d.qZA()}2&e&&(d.xp6(16),d.Oqu(d.lcZ(17,11,"Become a driver")),d.xp6(4),d.hij("",d.lcZ(21,13,"Please upload pictures of the following documents"),":"),d.xp6(5),d.hij("1. ",d.lcZ(26,15,"ID card front"),""),d.xp6(10),d.hij("2. ",d.lcZ(36,17,"ID card back"),""),d.xp6(10),d.hij("3. ",d.lcZ(46,19,"Driver license front"),""),d.xp6(10),d.hij("4. ",d.lcZ(56,21,"Driver license back"),""),d.xp6(10),d.Q6J("ngForOf",t.uploader.queue),d.xp6(1),d.Q6J("ngIf",t.checker),d.xp6(2),d.Q6J("ngForOf",t.pics),d.xp6(2),d.Q6J("disabled",0==t.isDisabled),d.xp6(1),d.Oqu(d.lcZ(72,23,"Submit")))},directives:[l.Gu,l.sr,l.Sm,l.fG,l.wd,l.Q$,l.gu,l.W2,l.yW,l.q_,l.oz,s.sg,s.O5,l.Ie],pipes:[q.X$],styles:["ion-content[_ngcontent-%COMP%]{--ion-background-color:#e9e9e9}ion-toolbar[_ngcontent-%COMP%]{--ion-background-color:#eee}ion-title[_ngcontent-%COMP%]{text-align:center}.file-input-container[_ngcontent-%COMP%]{text-align:right}input[type=file][_ngcontent-%COMP%]{display:none}label[_ngcontent-%COMP%]{border:1px solid #ccc;padding:8px 15px;cursor:pointer}.nv-file-over[_ngcontent-%COMP%]{border:3px dotted red}.text[_ngcontent-%COMP%]{font-family:Open Sans Light}#toolbarIcon[_ngcontent-%COMP%]{font-size:1.7em}span[_ngcontent-%COMP%]{color:#fff}.centered[_ngcontent-%COMP%]{text-align:center}hr[_ngcontent-%COMP%]{background:#eee;width:70%!important}.backIcon[_ngcontent-%COMP%]{font-size:150%}.back[_ngcontent-%COMP%], .backIcon[_ngcontent-%COMP%]{color:#ffae00}"]}),S)}],P=function(){var e=function e(){n(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({imports:[[u.Bz.forChild(M)],u.Bz]}),e}(),R=r(2472),E=r(3577);function D(e){return new R.w(e)}var B,L=((B=function e(t,i,o){n(this,e),this.accountService=t,this.imageService=i,this.driverService=o,this.folderName="driverFacePic",this.imgType="personalImg",this.applicationUserId=this.accountService.userValue.id}).\u0275fac=function(e){return new(e||B)(d.LFG(A.B),d.LFG(b.A),d.LFG(T.F))},B.\u0275mod=d.oAB({type:B}),B.\u0275inj=d.cJS({imports:[[s.ez,a.u5,y,l.Pc,P,a.UX,q.aw.forChild({loader:{provide:q.Zw,useFactory:D,deps:[p.eN]}}),E.LanguagePopoverPageModule]]}),B)}}])}();