{"version":3,"sources":["webpack:///src/app/location/location.module.ts","webpack:///src/app/location/location.page.html","webpack:///src/app/location/location.page.scss","webpack:///src/app/location/location-routing.module.ts","webpack:///src/app/location/location.page.ts"],"names":["HttpLoaderFactory","http","LocationPageModule","imports","forChild","loader","provide","useFactory","deps","declarations","routes","path","component","LocationPageRoutingModule","exports","Geolocation","LocationPage","route","orderService","navCtrl","translate","popoverController","accountService","markerUrl","setDefaultLang","userValue","choosenLanguage","getLocation","loadMap","mapRef","chosenLocation","address","navigate","getCurrentPosition","coordinates","myLatLng","lat","coords","latitude","lng","longitude","userLocationLat","userLocationLong","options","center","google","maps","LatLng","zoom","disableDefaultUI","mapTypeId","MapTypeId","ROADMAP","map","Map","nativeElement","marker","Marker","position","icon","input","document","getElementById","getElementsByTagName","searchbox","places","SearchBox","selectedFavourite","addListener","setBounds","getBounds","getPlaces","length","bounds","LatLngBounds","forEach","place","geometry","console","log","setMap","location","viewport","union","extend","fitBounds","geocoder","Geocoder","event","getCenter","geocode","results","status","formatted_address","navigator","geolocation","callApi","Longitude","Latitude","url","ev","create","popover","present","read","selector","template"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAcO,eAASA,iBAAT,CAA2BC,IAA3B,EAA6C;AAClD,eAAO,IAAI,8EAAJ,CAAwBA,IAAxB,CAAP;AACD;;UAoBYC,kBAAkB;AAAA;AAAA,O;;AAAlBA,wBAAkB,6DAjB9B,+DAAS;AACRC,eAAO,EAAE,CACP,4DADO,EAEP,0DAFO,EAGP,0DAHO,EAIP,kFAJO,EAKP,oEAAgBC,QAAhB,CAAyB;AACvBC,gBAAM,EAAE;AACNC,mBAAO,EAAE,mEADH;AAENC,sBAAU,EAAEP,iBAFN;AAGNQ,gBAAI,EAAE,CAAC,+DAAD;AAHA;AADe,SAAzB,CALO,EAYP,oGAZO,CADD;AAeRC,oBAAY,EAAE,CAAC,2DAAD;AAfN,OAAT,CAiB8B,GAAlBP,kBAAkB,CAAlB;;;;;;;;;;;;;;;;ACpCb;AAAe;;;AAAA;;;;;;;;;;;;;;;;ACAf;AAAe;;;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACKf,UAAMQ,MAAM,GAAW,CACrB;AACEC,YAAI,EAAE,EADR;AAEEC,iBAAS,EAAE;AAFb,OADqB,CAAvB;;UAWaC,yBAAyB;AAAA;AAAA,O;;AAAzBA,+BAAyB,6DAJrC,+DAAS;AACRV,eAAO,EAAE,CAAC,6DAAaC,QAAb,CAAsBM,MAAtB,CAAD,CADD;AAERI,eAAO,EAAE,CAAC,4DAAD;AAFD,OAAT,CAIqC,GAAzBD,yBAAyB,CAAzB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACNb,UAAQE,WAAR,GAAwB,uDAAxB,CAAQA,WAAR;;UAQaC,YAAY;AAavB,8BAAoBC,KAApB,EACUC,YADV,EAESC,OAFT,EAGUC,SAHV,EAIUC,iBAJV,EAKUC,cALV,EAK0C;AAAA;;AALtB,eAAAL,KAAA,GAAAA,KAAA;AACV,eAAAC,YAAA,GAAAA,YAAA;AACD,eAAAC,OAAA,GAAAA,OAAA;AACC,eAAAC,SAAA,GAAAA,SAAA;AACA,eAAAC,iBAAA,GAAAA,iBAAA;AACA,eAAAC,cAAA,GAAAA,cAAA,CAAgC,CAZ1C;AACA;;AACA,eAAAC,SAAA,GAAY,2BAAZ;AAWI,eAAKH,SAAL,CAAeI,cAAf,CAA8B,KAAKF,cAAL,CAAoBG,SAApB,CAA8BC,eAA5D;AACH;;AApBsB;AAAA;AAAA,iBAsBvB,oBAAQ,CAEP;AAxBsB;AAAA;AAAA,iBA0BvB,2BAAkB;AAChB,iBAAKC,WAAL;AAEA,iBAAKC,OAAL,CAAa,KAAKC,MAAlB;AACD;AA9BsB;AAAA;AAAA,iBAgCvB,oBAAW;AACT,iBAAKX,YAAL,CAAkBY,cAAlB,GAAmC,KAAKC,OAAxC;AACA,iBAAKd,KAAL,CAAWe,QAAX,CAAoB,CAAC,kBAAD,CAApB;AACD;AAnCsB;AAAA;AAAA,iBAqCjB,iBAAQH,MAAR,EAA4B;;;;;;;;;;AACZ,6BAAMd,WAAW,CAACkB,kBAAZ,EAAN;;;AAAdC,iC;AACAC,8B,GAAW;AAAEC,2BAAG,EAAEF,WAAW,CAACG,MAAZ,CAAmBC,QAA1B;AAAoCC,2BAAG,EAAEL,WAAW,CAACG,MAAZ,CAAmBG;AAA5D,uB;AACjB,2BAAKtB,YAAL,CAAkBuB,eAAlB,GAAoCN,QAAQ,CAACC,GAA7C;AACA,2BAAKlB,YAAL,CAAkBwB,gBAAlB,GAAqCP,QAAQ,CAACI,GAA9C;AACMI,6B,GAAkC;AACtCC,8BAAM,EAAE,IAAIC,MAAM,CAACC,IAAP,CAAYC,MAAhB,CAAuBZ,QAAQ,CAACC,GAAhC,EAAqCD,QAAQ,CAACI,GAA9C,CAD8B;AAEtCS,4BAAI,EAAE,EAFgC;AAGtCC,wCAAgB,EAAE,IAHoB;AAItCC,iCAAS,EAAEL,MAAM,CAACC,IAAP,CAAYK,SAAZ,CAAsBC;AAJK,uB;AAOxC,2BAAKC,GAAL,GAAW,IAAIR,MAAM,CAACC,IAAP,CAAYQ,GAAhB,CAAoBzB,MAAM,CAAC0B,aAA3B,EAA0CZ,OAA1C,CAAX;AAEIa,4B,GAAS,IAAIX,MAAM,CAACC,IAAP,CAAYW,MAAhB,CAAuB;AAClCC,gCAAQ,EAAE,IAAIb,MAAM,CAACC,IAAP,CAAYC,MAAhB,CAAuBZ,QAAvB,CADwB;AAElCwB,4BAAI,EAAE,KAAKpC,SAFuB;AAGlC8B,2BAAG,EAAE,KAAKA;AAHwB,uBAAvB,C;AAMTO,2B,GAAQC,QAAQ,CAACC,cAAT,CAAwB,iBAAxB,EAA2CC,oBAA3C,CAAgE,OAAhE,EAAyE,CAAzE,C;AACRC,+B,GAAY,IAAInB,MAAM,CAACC,IAAP,CAAYmB,MAAZ,CAAmBC,SAAvB,CAAiCN,KAAjC,C;AAChB,2BAAK1C,YAAL,CAAkBiD,iBAAlB,GAAsC,IAAtC;AACA,2BAAKd,GAAL,CAASe,WAAT,CAAqB,gBAArB,EAAuC,YAAM;AAC3CJ,iCAAS,CAACK,SAAV,CAAoB,KAAI,CAAChB,GAAL,CAASiB,SAAT,EAApB;AACD,uBAFD;AAIAN,+BAAS,CAACI,WAAV,CAAsB,gBAAtB,EAAwC,YAAM;AAC5C,4BAAMH,MAAM,GAAGD,SAAS,CAACO,SAAV,EAAf;;AAEA,4BAAIN,MAAM,CAACO,MAAP,IAAiB,CAArB,EAAwB;AACtB;AACD;;AAED,4BAAIC,MAAM,GAAG,IAAI5B,MAAM,CAACC,IAAP,CAAY4B,YAAhB,EAAb;AAEAT,8BAAM,CAACU,OAAP,CAAe,UAACC,KAAD,EAAW;AACxB,8BAAI,CAACA,KAAK,CAACC,QAAX,EAAqB;AACnBC,mCAAO,CAACC,GAAR,CAAY,aAAZ;AACA;AACD;;AACDvB,gCAAM,CAACwB,MAAP,CAAc,IAAd;AAEAxB,gCAAM,GAAG,IAAIX,MAAM,CAACC,IAAP,CAAYW,MAAhB,CAAuB;AAC9BC,oCAAQ,EAAEkB,KAAK,CAACC,QAAN,CAAeI,QADK;AAE9B5B,+BAAG,EAAE,KAAI,CAACA;AAFoB,2BAAvB,CAAT;;AAKA,8BAAIuB,KAAK,CAACC,QAAN,CAAeK,QAAnB,EAA6B;AAC3BT,kCAAM,CAACU,KAAP,CAAaP,KAAK,CAACC,QAAN,CAAeK,QAA5B;AACD,2BAFD,MAEO;AACLT,kCAAM,CAACW,MAAP,CAAcR,KAAK,CAACC,QAAN,CAAeI,QAA7B;AACD;AAEF,yBAlBD;;AAoBA,6BAAI,CAAC5B,GAAL,CAASgC,SAAT,CAAmBZ,MAAnB;AAED,uBA/BD;AAiCIa,8B,GAAW,IAAIzC,MAAM,CAACC,IAAP,CAAYyC,QAAhB,E;AAEf1C,4BAAM,CAACC,IAAP,CAAY0C,KAAZ,CAAkBpB,WAAlB,CAA8B,KAAKf,GAAnC,EAAwC,MAAxC,EAAgD;AAAA,+BAAY;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AACtDT,wCADsD,GAC7C,KAAKS,GAAL,CAASoC,SAAT,EAD6C;AAEtDrD,qCAFsD,GAEhDQ,MAAM,CAACR,GAAP,EAFgD;AAGtDG,qCAHsD,GAGhDK,MAAM,CAACL,GAAP,EAHgD;AAKpDJ,0CALoD,GAKzC;AAAEC,uCAAG,EAAEA,GAAP;AAAYG,uCAAG,EAAEA;AAAjB,mCALyC;;AAO1D,sCAAIiB,MAAM,IAAIA,MAAM,CAACwB,MAArB,EAA6B;AAC3BxB,0CAAM,CAACwB,MAAP,CAAc,IAAd;AACD;;AAED,uCAAK9D,YAAL,CAAkBuB,eAAlB,GAAoCN,QAAQ,CAACC,GAA7C;AACA,uCAAKlB,YAAL,CAAkBwB,gBAAlB,GAAqCP,QAAQ,CAACI,GAA9C,CAZ0D,CAa1D;;AACA+C,0CAAQ,CAACI,OAAT,CAAiB;AAAET,4CAAQ,EAAE9C;AAAZ,mCAAjB,EACE,UACEwD,OADF,EAEEC,MAFF,EAGK;AACH,wCAAIA,MAAM,IAAI,IAAd,EAAoB;AAClB,0CAAID,OAAO,CAAC,CAAD,CAAX,EAAgB;AACd,8CAAI,CAAC5D,OAAL,GAAe4D,OAAO,CAAC,CAAD,CAAP,CAAWE,iBAA1B,CADc,CAEd;AACA;AACA;AACA;AACD;AACF;AACF,mCAdH;;AAd0D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BAAZ;AAAA,uBAAhD;;;;;;;;;AA8BD;AAjIsB;AAAA;AAAA,iBAmIvB,uBAAc;AACZ,iBAAK5E,KAAL,CAAWe,QAAX,CAAoB,CAAC,kBAAD,CAApB;AACD;AArIsB;AAAA;AAAA,iBAuIvB,uBAAW;AAAA;;AACT,gBAAI8D,SAAS,CAACC,WAAd,EAA2B;AACzBD,uBAAS,CAACC,WAAV,CAAsB9D,kBAAtB,CAAyC,UAACyB,QAAD,EAAc;AACrD,sBAAI,CAAClB,SAAL,GAAiBkB,QAAQ,CAACrB,MAAT,CAAgBG,SAAjC;AACA,sBAAI,CAACF,QAAL,GAAgBoB,QAAQ,CAACrB,MAAT,CAAgBC,QAAhC;;AAEA,sBAAI,CAAC0D,OAAL,CAAa,MAAI,CAACxD,SAAlB,EAA6B,MAAI,CAACF,QAAlC;AACD,eALD;AAMD,aAPD,MAOO;AACLwC,qBAAO,CAACC,GAAR,CAAY,4BAAZ;AACD;AACF;AAlJsB;AAAA;AAAA,iBAoJvB,iBAAQkB,SAAR,EAA2BC,QAA3B,EAA6C;AAC3C,gBAAMC,GAAG,2DAAoDF,SAApD,kBAAqEC,QAArE,CAAT,CAD2C,CAE3C;AACD;AAvJsB;AAAA;AAAA,iBAyJjB,6BAAoBE,EAApB,EAAwB;;;;;;;;AACZ,6BAAM,KAAK/E,iBAAL,CAAuBgF,MAAvB,CAA8B;AAClDzF,iCAAS,EAAE,4FADuC;AAElD4E,6BAAK,EAAEY;AAF2C,uBAA9B,CAAN;;;AAAVE,6B;;AAIN,6BAAMA,OAAO,CAACC,OAAR,EAAN;;;;;;;;;AACD;AA/JsB;;AAAA;AAAA,S;;;;gBAjBhB;;gBAKA;;gBAHA;;gBACA;;gBADe;;gBAEf;;;;;;gBAuBN,uD;AAAS,iBAAC,KAAD,EAAQ;AAAEC,gBAAI,EAAE,wDAAR;AAAoB,sBAAQ;AAA5B,WAAR;;;gBACT,uD;AAAS,iBAAC,UAAD;;;AAXCxF,kBAAY,6DALxB,gEAAU;AACTyF,gBAAQ,EAAE,cADD;AAETC,gBAAQ,EAAR,sEAFS;;AAAA,OAAV,CAKwB,GAAZ1F,YAAY,CAAZ","file":"location-location-module-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { LocationPageRoutingModule } from './location-routing.module';\r\n\r\nimport { LocationPage } from './location.page';\r\n\r\nimport { TranslateLoader, TranslateModule, TranslateService } from '@ngx-translate/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { TranslateHttpLoader } from '@ngx-translate/http-loader';\r\nimport { LanguagePopoverPageModule } from '../language-popover/language-popover.module';\r\n\r\nexport function HttpLoaderFactory(http: HttpClient) {\r\n  return new TranslateHttpLoader(http);\r\n}\r\n\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    LocationPageRoutingModule,\r\n    TranslateModule.forChild({\r\n      loader: {\r\n        provide: TranslateLoader,\r\n        useFactory: HttpLoaderFactory,\r\n        deps: [HttpClient]\r\n      }\r\n    }),\r\n    LanguagePopoverPageModule\r\n  ],\r\n  declarations: [LocationPage]\r\n})\r\nexport class LocationPageModule {}\r\n","export default \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-menu-button></ion-menu-button>\\r\\n    </ion-buttons>\\r\\n    \\r\\n\\r\\n    <ion-title>\\r\\n        <ion-label>{{'Choose starting point' | translate}}</ion-label>\\r\\n    </ion-title>\\r\\n\\r\\n    <ion-buttons slot=\\\"end\\\">\\r\\n      <ion-icon (click)='openLanguagePopover($event)' id=\\\"toolbarIcon\\\" name=\\\"language-outline\\\"></ion-icon>\\r\\n    </ion-buttons>\\r\\n  </ion-toolbar>\\r\\n  \\r\\n</ion-header>\\r\\n<ion-item>\\r\\n  <ion-input id=\\\"searchTextField\\\" type=\\\"text\\\" [placeholder]='\\\"Search location\\\" | translate' clearInput></ion-input>\\r\\n</ion-item>\\r\\n<ion-content class=\\\"noScroll\\\">\\r\\n  <div #map id=\\\"map\\\"></div>\\r\\n  <div #marker id=\\\"marker\\\"></div>\\r\\n  \\r\\n</ion-content>\\r\\n\\r\\n<ion-footer>\\r\\n  <ion-toolbar class=\\\"text-center\\\">\\r\\n    <!-- <ion-title>Choosen location</ion-title> -->\\r\\n    <button (click)=\\\"onSubmit()\\\" class=\\\"btn btn-info text-center\\\">{{'Take me from here' | translate}}</button>\\r\\n    \\r\\n  </ion-toolbar>\\r\\n</ion-footer>\\r\\n\\r\\n<ion-footer>\\r\\n  <ion-toolbar class=\\\"text-center\\\">\\r\\n    <p>{{address}}</p>\\r\\n  </ion-toolbar>\\r\\n\\r\\n  \\r\\n</ion-footer>\\r\\n\";","export default \".noScroll {\\n  overflow: hidden;\\n}\\n\\n#marker {\\n  position: absolute;\\n  /*url of the marker*/\\n  background: url('location.png') no-repeat;\\n  /*center the marker*/\\n  top: 50%;\\n  left: 50%;\\n  z-index: 1;\\n  /*fix offset when needed*/\\n  margin-left: -10px;\\n  margin-top: -34px;\\n  /*size of the image*/\\n  height: 34px;\\n  width: 20px;\\n  cursor: pointer;\\n}\\n\\n#map {\\n  height: 100%;\\n  width: 100%;\\n}\\n\\nion-card {\\n  max-height: 200px;\\n  overflow: scroll;\\n  position: absolute;\\n  z-index: 1;\\n}\\n\\nion-toolbar {\\n  --ion-background-color:#eeeeee;\\n}\\n\\nion-title {\\n  text-align: center;\\n}\\n\\n#toolbarIcon {\\n  font-size: 1.7em;\\n}\\n\\n#toolbarIcon1 {\\n  font-size: 3em;\\n}\\n\\n.centered {\\n  text-align: center;\\n}\\n\\n.text {\\n  font-size: 2.4em;\\n  font-family: Open Sans Light;\\n}\\n\\ni {\\n  color: #eeeeee;\\n}\\n\\n.my-custom-class {\\n  --background: #e5e5e5;\\n}\\n\\nion-select {\\n  color: #383838;\\n  background-color: white;\\n  border-radius: 10px;\\n  border: 3px solid #eeeeee;\\n}\\n\\n.blink_me {\\n  -webkit-animation: blinker 1s linear infinite;\\n          animation: blinker 1s linear infinite;\\n}\\n\\n@-webkit-keyframes blinker {\\n  50% {\\n    opacity: 0;\\n  }\\n}\\n\\n@keyframes blinker {\\n  50% {\\n    opacity: 0;\\n  }\\n}\\n\\n.backIcon {\\n  color: #ffae00;\\n  font-size: 150%;\\n}\\n\\n.back {\\n  color: #ffae00;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uXFwuLlxcLi5cXGxvY2F0aW9uLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGdCQUFBO0FBQ0o7O0FBRUk7RUFDSSxrQkFBQTtFQUNBLG9CQUFBO0VBQ0EseUNBQUE7RUFDQSxvQkFBQTtFQUNBLFFBQUE7RUFBUSxTQUFBO0VBRVIsVUFBQTtFQUNBLHlCQUFBO0VBQ0Esa0JBQUE7RUFDQSxpQkFBQTtFQUNBLG9CQUFBO0VBQ0EsWUFBQTtFQUNBLFdBQUE7RUFFQSxlQUFBO0FBQVI7O0FBR0k7RUFDQSxZQUFBO0VBQ0EsV0FBQTtBQUFKOztBQUdJO0VBQ0ksaUJBQUE7RUFDQSxnQkFBQTtFQUNBLGtCQUFBO0VBQ0EsVUFBQTtBQUFSOztBQUlJO0VBQ0ksOEJBQUE7QUFEUjs7QUFJSTtFQUNJLGtCQUFBO0FBRFI7O0FBSUk7RUFDSSxnQkFBQTtBQURSOztBQUlJO0VBQ0ksY0FBQTtBQURSOztBQUtJO0VBQ0ksa0JBQUE7QUFGUjs7QUFLSTtFQUNJLGdCQUFBO0VBQ0EsNEJBQUE7QUFGUjs7QUFLSTtFQUNJLGNBQUE7QUFGUjs7QUFLSTtFQUNJLHFCQUFBO0FBRlI7O0FBS0k7RUFDSSxjQUFBO0VBQ0EsdUJBQUE7RUFDQSxtQkFBQTtFQUNBLHlCQUFBO0FBRlI7O0FBS0k7RUFDSSw2Q0FBQTtVQUFBLHFDQUFBO0FBRlI7O0FBS007RUFDRTtJQUNFLFVBQUE7RUFGUjtBQUNGOztBQURNO0VBQ0U7SUFDRSxVQUFBO0VBRlI7QUFDRjs7QUFLSTtFQUNJLGNBQUE7RUFDQSxlQUFBO0FBSFI7O0FBTUk7RUFDSSxjQUFBO0FBSFIiLCJmaWxlIjoibG9jYXRpb24ucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLm5vU2Nyb2xsIHtcclxuICAgIG92ZXJmbG93OiBoaWRkZW47XHJcbiAgICB9XHJcblxyXG4gICAgI21hcmtlcntcclxuICAgICAgICBwb3NpdGlvbjphYnNvbHV0ZTtcclxuICAgICAgICAvKnVybCBvZiB0aGUgbWFya2VyKi9cclxuICAgICAgICBiYWNrZ3JvdW5kOnVybCguLi8uLi9hc3NldHMvbG9jYXRpb24ucG5nKSBuby1yZXBlYXQ7XHJcbiAgICAgICAgLypjZW50ZXIgdGhlIG1hcmtlciovXHJcbiAgICAgICAgdG9wOjUwJTtsZWZ0OjUwJTtcclxuICAgICAgXHJcbiAgICAgICAgei1pbmRleDoxO1xyXG4gICAgICAgIC8qZml4IG9mZnNldCB3aGVuIG5lZWRlZCovXHJcbiAgICAgICAgbWFyZ2luLWxlZnQ6LTEwcHg7XHJcbiAgICAgICAgbWFyZ2luLXRvcDotMzRweDtcclxuICAgICAgICAvKnNpemUgb2YgdGhlIGltYWdlKi9cclxuICAgICAgICBoZWlnaHQ6MzRweDtcclxuICAgICAgICB3aWR0aDoyMHB4O1xyXG4gICAgICBcclxuICAgICAgICBjdXJzb3I6cG9pbnRlcjtcclxuICAgICAgfVxyXG4gICAgXHJcbiAgICAjbWFwIHtcclxuICAgIGhlaWdodDogMTAwJTtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgfVxyXG5cclxuICAgIGlvbi1jYXJkIHtcclxuICAgICAgICBtYXgtaGVpZ2h0OiAyMDBweDtcclxuICAgICAgICBvdmVyZmxvdzogc2Nyb2xsO1xyXG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICAgICAgICB6LWluZGV4OiAxO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBcclxuICAgIGlvbi10b29sYmFye1xyXG4gICAgICAgIC0taW9uLWJhY2tncm91bmQtY29sb3I6I2VlZWVlZTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgaW9uLXRpdGxlIHtcclxuICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgICB9XHJcbiAgICBcclxuICAgICN0b29sYmFySWNvbntcclxuICAgICAgICBmb250LXNpemU6IDEuN2VtO1xyXG4gICAgfVxyXG5cclxuICAgICN0b29sYmFySWNvbjF7XHJcbiAgICAgICAgZm9udC1zaXplOiAzZW07XHJcbiAgICAgICAgLy8tLWJhY2tncm91bmQ6IHVybCguLi8uLi9hc3NldHMvRGFjb180Njc0NzM4LnBuZykgMCAwLzEwMCUgMTAwJSBuby1yZXBlYXQ7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC5jZW50ZXJlZHtcclxuICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC50ZXh0eyAgXHJcbiAgICAgICAgZm9udC1zaXplOiAyLjRlbTtcclxuICAgICAgICBmb250LWZhbWlseTogT3BlbiBTYW5zIExpZ2h0O1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBpe1xyXG4gICAgICAgIGNvbG9yOiNlZWVlZWU7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC5teS1jdXN0b20tY2xhc3Mge1xyXG4gICAgICAgIC0tYmFja2dyb3VuZDogI2U1ZTVlNTtcclxuICAgICAgfVxyXG4gICAgXHJcbiAgICBpb24tc2VsZWN0e1xyXG4gICAgICAgIGNvbG9yOiByZ2IoNTYsIDU2LCA1Nik7XHJcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XHJcbiAgICAgICAgYm9yZGVyLXJhZGl1czogMTBweDtcclxuICAgICAgICBib3JkZXI6IDNweCBzb2xpZCAjZWVlZWVlO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAuYmxpbmtfbWUge1xyXG4gICAgICAgIGFuaW1hdGlvbjogYmxpbmtlciAxcyBsaW5lYXIgaW5maW5pdGU7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIEBrZXlmcmFtZXMgYmxpbmtlciB7XHJcbiAgICAgICAgNTAlIHtcclxuICAgICAgICAgIG9wYWNpdHk6IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICBcclxuICAgIC5iYWNrSWNvbiB7XHJcbiAgICAgICAgY29sb3I6IHJnYigyNTUsIDE3NCwgMCk7XHJcbiAgICAgICAgZm9udC1zaXplOiAxNTAlO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAuYmFjayB7XHJcbiAgICAgICAgY29sb3I6IHJnYigyNTUsIDE3NCwgMCk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIFxyXG4gICAiXX0= */\";","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { LocationPage } from './location.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: LocationPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class LocationPageRoutingModule {}\r\n","import { Component, OnInit, ViewChild, ElementRef } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { Plugins } from '@capacitor/core';\r\nimport { NavController, PopoverController } from '@ionic/angular';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { AccountService } from 'src/_services';\r\nimport { OrderService } from 'src/_services/order/order.service';\r\nimport { LanguagePopoverPage } from '../language-popover/language-popover.page';\r\n\r\n\r\nconst { Geolocation } = Plugins;\r\ndeclare var google: any;\r\n\r\n@Component({\r\n  selector: 'app-location',\r\n  templateUrl: './location.page.html',\r\n  styleUrls: ['./location.page.scss'],\r\n})\r\nexport class LocationPage implements OnInit {\r\n  address: string;\r\n  map: any;\r\n  latitude: any;\r\n  longitude: any;\r\n  search: any; \r\n  //markerUrl = 'http://maps.gstatic.com/mapfiles/markers2/marker.png'\r\n  //markerUrl = 'https://image.flaticon.com/icons/png/24/727/727598.png'\r\n  markerUrl = '../../assets/location.png'\r\n\r\n  @ViewChild('map', { read: ElementRef, static: true }) mapRef: ElementRef;\r\n  @ViewChild('myButton') myButton: ElementRef;\r\n\r\n  constructor(private route: Router,\r\n    private orderService: OrderService,\r\n    public navCtrl: NavController,\r\n    private translate: TranslateService,\r\n    private popoverController: PopoverController,\r\n    private accountService: AccountService) {\r\n      this.translate.setDefaultLang(this.accountService.userValue.choosenLanguage);\r\n  }\r\n\r\n  ngOnInit(): void {\r\n\r\n  }\r\n\r\n  ionViewDidEnter() {\r\n    this.getLocation();\r\n\r\n    this.loadMap(this.mapRef);\r\n  }\r\n\r\n  onSubmit() {\r\n    this.orderService.chosenLocation = this.address;\r\n    this.route.navigate(['menu/destination'])\r\n  }\r\n\r\n  async loadMap(mapRef: ElementRef) {\r\n    const coordinates = await Geolocation.getCurrentPosition();\r\n    const myLatLng = { lat: coordinates.coords.latitude, lng: coordinates.coords.longitude };\r\n    this.orderService.userLocationLat = myLatLng.lat;\r\n    this.orderService.userLocationLong = myLatLng.lng;\r\n    const options: google.maps.MapOptions = {\r\n      center: new google.maps.LatLng(myLatLng.lat, myLatLng.lng),\r\n      zoom: 15,\r\n      disableDefaultUI: true,\r\n      mapTypeId: google.maps.MapTypeId.ROADMAP\r\n    };\r\n\r\n    this.map = new google.maps.Map(mapRef.nativeElement, options);\r\n\r\n    var marker = new google.maps.Marker({\r\n      position: new google.maps.LatLng(myLatLng),\r\n      icon: this.markerUrl,\r\n      map: this.map\r\n    });\r\n\r\n    var input = document.getElementById('searchTextField').getElementsByTagName('input')[0];\r\n    var searchbox = new google.maps.places.SearchBox(input);\r\n    this.orderService.selectedFavourite = null;\r\n    this.map.addListener(\"bounds_changed\", () => {\r\n      searchbox.setBounds(this.map.getBounds() as google.maps.LatLngBounds);\r\n    });\r\n\r\n    searchbox.addListener(\"places_changed\", () => {\r\n      const places = searchbox.getPlaces();\r\n\r\n      if (places.length == 0) {\r\n        return;\r\n      }\r\n\r\n      var bounds = new google.maps.LatLngBounds();\r\n\r\n      places.forEach((place) => {\r\n        if (!place.geometry) {\r\n          console.log('No Geometry');\r\n          return;\r\n        }\r\n        marker.setMap(null);\r\n\r\n        marker = new google.maps.Marker({\r\n          position: place.geometry.location,\r\n          map: this.map\r\n        });\r\n\r\n        if (place.geometry.viewport) {\r\n          bounds.union(place.geometry.viewport);\r\n        } else {\r\n          bounds.extend(place.geometry.location)\r\n        }\r\n\r\n      });\r\n\r\n      this.map.fitBounds(bounds);\r\n\r\n    })\r\n\r\n    let geocoder = new google.maps.Geocoder;\r\n\r\n    google.maps.event.addListener(this.map, 'idle', async () => {\r\n      var center = this.map.getCenter();\r\n      var lat = center.lat();\r\n      var lng = center.lng();\r\n\r\n      const myLatLng = { lat: lat, lng: lng };\r\n\r\n      if (marker && marker.setMap) {\r\n        marker.setMap(null);\r\n      }\r\n\r\n      this.orderService.userLocationLat = myLatLng.lat;\r\n      this.orderService.userLocationLong = myLatLng.lng;\r\n      //Get Location\r\n      geocoder.geocode({ location: myLatLng },\r\n        (\r\n          results: google.maps.GeocoderResult[],\r\n          status: google.maps.GeocoderStatus\r\n        ) => {\r\n          if (status == \"OK\") {\r\n            if (results[0]) {\r\n              this.address = results[0].formatted_address;\r\n              // var infowindow = new google.maps.InfoWindow({\r\n              //   content: `${this.address}`\r\n              // });\r\n              // infowindow.open(this.map, marker);\r\n            }\r\n          }\r\n        })\r\n    })\r\n  }\r\n\r\n  destination() {\r\n    this.route.navigate(['menu/destination']);\r\n  }\r\n\r\n  getLocation(): void {\r\n    if (navigator.geolocation) {\r\n      navigator.geolocation.getCurrentPosition((position) => {\r\n        this.longitude = position.coords.longitude;\r\n        this.latitude = position.coords.latitude;\r\n\r\n        this.callApi(this.longitude, this.latitude);\r\n      });\r\n    } else {\r\n      console.log(\"No support for geolocation\")\r\n    }\r\n  }\r\n\r\n  callApi(Longitude: number, Latitude: number) {\r\n    const url = `https://api-adresse.data.gouv.fr/reverse/?lon=${Longitude}&lat=${Latitude}`\r\n    //Call API\r\n  }\r\n\r\n  async openLanguagePopover(ev) {\r\n    const popover = await this.popoverController.create({\r\n      component: LanguagePopoverPage,\r\n      event: ev\r\n    });\r\n    await popover.present();\r\n  }\r\n\r\n}"]}