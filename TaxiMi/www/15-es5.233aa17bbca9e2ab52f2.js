!function(){function e(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function r(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function t(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"8k+r":function(r,n,a){"use strict";a.d(n,"a",function(){return p});var i=a("z6cu"),o=a("JIr8"),c=a("vkgz"),s=a("AytR"),u=a("fXoL"),d=a("tk/3"),h=a("Dsd+"),p=function(){var r=function(){function r(t,n){e(this,r),this.http=t,this.sharedService=n,this.orders=[],this.completedOrder=!1}return t(r,[{key:"createOrder",value:function(e){var r=this.sharedService.headerGerneration();return this.http.post("".concat(s.a.apiUrl,"/api/order"),e,{headers:r,responseType:"text"}).pipe(Object(o.a)(this.handleError))}},{key:"addToFavourites",value:function(e){var r=this.sharedService.headerGerneration();return this.http.post("".concat(s.a.apiUrl,"/api/order/favourites"),e,{headers:r,responseType:"text"}).pipe(Object(o.a)(this.handleError))}},{key:"getMyFavourites",value:function(e){var r=this.sharedService.headerGerneration();return this.http.get("".concat(s.a.apiUrl,"/api/order/favourites/").concat(e),{headers:r}).pipe(Object(o.a)(this.handleError))}},{key:"deleteFavouriteOrder",value:function(e){var r=this.sharedService.headerGerneration();return this.http.delete("".concat(s.a.apiUrl,"/api/order/favourites/").concat(e),{headers:r}).pipe(Object(c.a)(function(e){return console.log("deleted favourite order: ",JSON.stringify(e))}),Object(o.a)(this.handleError))}},{key:"getDirections",value:function(e,r,t,n){var a=this.sharedService.headerGerneration();return this.http.post("https://maps.googleapis.com/maps/api/distancematrix/json?units=imperial&origins=".concat(e,",").concat(r,"&destinations=").concat(t,"%2C").concat(n,"%7C&key=AIzaSyAEvlXdM4joG4bNVT5l-tJSk9lUSGhxMNw"),{headers:a,responseType:"text"}).pipe(Object(o.a)(this.handleError))}},{key:"getOrderById",value:function(e){var r=this,t=this.sharedService.headerGerneration();return this.http.get("".concat(s.a.apiUrl,"/api/order/id/").concat(e),{headers:t}).pipe(Object(c.a)(function(e){return r.order=e}))}},{key:"getCanceledOrderById",value:function(e){var r=this,t=this.sharedService.headerGerneration();return this.http.get("".concat(s.a.apiUrl,"/api/order/canceled/").concat(e),{headers:t}).pipe(Object(c.a)(function(e){return r.order=e}))}},{key:"getLastCompletedOrder",value:function(e){var r=this.sharedService.headerGerneration();return this.http.get("".concat(s.a.apiUrl,"/api/order/completed/").concat(e),{headers:r}).pipe(Object(o.a)(this.handleError))}},{key:"getMyOrder",value:function(e){var r=this.sharedService.headerGerneration();return this.http.get("".concat(s.a.apiUrl,"/api/order/").concat(e),{headers:r}).pipe(Object(o.a)(this.handleError))}},{key:"getOrderForChat",value:function(e){var r=this.sharedService.headerGerneration();return this.http.get("".concat(s.a.apiUrl,"/api/order/chat/").concat(e),{headers:r}).pipe(Object(o.a)(this.handleError))}},{key:"getAllOrders",value:function(){var e=this.sharedService.headerGerneration();return this.http.get("".concat(s.a.apiUrl,"/api/order"),{headers:e}).pipe(Object(o.a)(this.handleError))}},{key:"getNormalOrders",value:function(){var e=this.sharedService.headerGerneration();return this.http.get("".concat(s.a.apiUrl,"/api/order/normal"),{headers:e}).pipe(Object(o.a)(this.handleError))}},{key:"getComfortOrders",value:function(){var e=this.sharedService.headerGerneration();return this.http.get("".concat(s.a.apiUrl,"/api/order/comfort"),{headers:e}).pipe(Object(o.a)(this.handleError))}},{key:"acceptOrder",value:function(e,r){var t=this,n=this.sharedService.headerGerneration();return this.http.put("".concat(s.a.apiUrl,"/api/order/").concat(e,"/").concat(r),{headers:n,responseType:"json"}).pipe(Object(c.a)(function(e){return t.driverId=r}),Object(o.a)(this.handleError))}},{key:"updateOrderEta",value:function(e,r){var t=this.sharedService.headerGerneration();return this.http.put("".concat(s.a.apiUrl,"/api/order/eta/").concat(e,"/").concat(r),{headers:t,responseType:"json"}).pipe(Object(o.a)(this.handleError))}},{key:"updateDriverArrived",value:function(e){var r=this.sharedService.headerGerneration();return this.http.put("".concat(s.a.apiUrl,"/api/order/arrived/").concat(e),{headers:r,responseType:"json"}).pipe(Object(o.a)(this.handleError))}},{key:"rateOrder",value:function(e){var r=this.sharedService.headerGerneration();return this.http.put("".concat(s.a.apiUrl,"/api/order/rate/").concat(e),{headers:r,responseType:"json"}).pipe(Object(o.a)(this.handleError))}},{key:"increaseOrderPrice",value:function(e,r){var t=this.sharedService.headerGerneration();return this.http.put("".concat(s.a.apiUrl,"/api/order/increase/").concat(e,"/").concat(r),{headers:t,responseType:"json"}).pipe(Object(o.a)(this.handleError))}},{key:"completeOrder",value:function(e){var r=this.sharedService.headerGerneration();return this.http.put("".concat(s.a.apiUrl,"/api/order/").concat(e),{headers:r,responseType:"json"}).pipe(Object(o.a)(this.handleError))}},{key:"deleteOrder",value:function(e){var r=this.sharedService.headerGerneration();return this.http.delete("".concat(s.a.apiUrl,"/api/order/").concat(e),{headers:r}).pipe(Object(c.a)(function(e){return console.log("deleted order: ",JSON.stringify(e))}),Object(o.a)(this.handleError))}},{key:"driverIncreaseOrderPrice",value:function(e,r,t){var n=this.sharedService.headerGerneration();return this.http.put("".concat(s.a.apiUrl,"/api/order/increased/").concat(e,"/").concat(r,"/").concat(t),{headers:n,responseType:"json"}).pipe(Object(o.a)(this.handleError))}},{key:"resetIncreasing",value:function(e){var r=this.sharedService.headerGerneration();return this.http.put("".concat(s.a.apiUrl,"/api/order/reset/").concat(e),{headers:r,responseType:"json"}).pipe(Object(o.a)(this.handleError))}},{key:"increasedOrderAccept",value:function(e,r){var t=this.sharedService.headerGerneration();return this.http.put("".concat(s.a.apiUrl,"/api/order/accepted/increase/").concat(e,"/").concat(r),{headers:t,responseType:"json"}).pipe(Object(o.a)(this.handleError))}},{key:"incrementOrderPrice",value:function(e){var r=this.sharedService.headerGerneration();return this.http.put("".concat(s.a.apiUrl,"/api/order/increment/").concat(e),{headers:r,responseType:"json"}).pipe(Object(o.a)(this.handleError))}},{key:"decrementOrderPrice",value:function(e){var r=this.sharedService.headerGerneration();return this.http.put("".concat(s.a.apiUrl,"/api/order/decrement/").concat(e),{headers:r,responseType:"json"}).pipe(Object(o.a)(this.handleError))}},{key:"handleError",value:function(e){var r="";return e.error instanceof ErrorEvent?(console.log("Client side error."),r="Error: ".concat(e.error.message)):(console.log("Server side error."),r="Error Code: ".concat(e.status,"\nMessage: ").concat(e.message)),console.log(r),Object(i.a)(r)}}]),r}();return r.\u0275fac=function(e){return new(e||r)(u.Rb(d.a),u.Rb(h.a))},r.\u0275prov=u.Gb({token:r,factory:r.\u0275fac,providedIn:"root"}),r}()},"9Cmh":function(r,n,a){"use strict";a.r(n),a.d(n,"HttpLoaderFactory",function(){return w}),a.d(n,"FavouriteOrdersPageModule",function(){return C});var i=a("ofXK"),o=a("3Pt+"),c=a("TEn/"),s=a("tyNb"),u=a("mrSG"),d=a("Gpoy"),h=a("AytR"),p=a("oXKM"),l=a("fXoL"),b=a("8k+r"),v=a("8Xdb"),f=a("sYmb");function g(e,r){1&e&&(l.Nb(0,"ion-text",10),l.Nb(1,"h2",11),l.pc(2),l.Yb(3,"translate"),l.Mb(),l.Lb(4,"hr"),l.Mb()),2&e&&(l.zb(2),l.rc("",l.Zb(3,1,"You dont have saved trips"),"!"))}function m(e,r){if(1&e){var t=l.Ob();l.Nb(0,"div",12),l.Nb(1,"a",13),l.Nb(2,"p",14),l.pc(3),l.Yb(4,"translate"),l.Mb(),l.Nb(5,"p",14),l.pc(6),l.Yb(7,"translate"),l.Mb(),l.Nb(8,"div",7),l.Nb(9,"div",6),l.Nb(10,"div",15),l.Nb(11,"small"),l.pc(12),l.Yb(13,"translate"),l.Mb(),l.Mb(),l.Mb(),l.Nb(14,"div",16),l.Nb(15,"small"),l.pc(16),l.Yb(17,"translate"),l.Mb(),l.Mb(),l.Lb(18,"hr"),l.Mb(),l.Nb(19,"ion-toolbar",17),l.Nb(20,"ion-buttons",0),l.Nb(21,"ion-button",18),l.Vb("click",function(){l.jc(t);var e=r.$implicit;return l.Xb().useThis(e)}),l.pc(22),l.Yb(23,"translate"),l.Mb(),l.Mb(),l.Nb(24,"ion-buttons",1),l.Nb(25,"ion-button",19),l.Vb("click",function(){l.jc(t);var e=r.$implicit;return l.Xb().remove(e.id)}),l.pc(26),l.Yb(27,"translate"),l.Mb(),l.Mb(),l.Mb(),l.Mb(),l.Mb()}if(2&e){var n=r.$implicit;l.zb(3),l.sc("",l.Zb(4,10,"Location"),": ",n.location,""),l.zb(3),l.sc("",l.Zb(7,12,"Destination"),": ",n.destination,""),l.zb(6),l.sc("",l.Zb(13,14,"Trip distance"),": ",n.tripDistance," km"),l.zb(4),l.sc("",l.Zb(17,16,"Total cost"),": ",n.totalPrice," \u043b\u0432."),l.zb(6),l.qc(l.Zb(23,18,"Use this trip")),l.zb(4),l.qc(l.Zb(27,20,"Delete"))}}var y,O,k=[{path:"",component:(y=function(){function r(t,n,a,i,o,c){e(this,r),this.orderService=t,this.accountService=n,this.alertController=a,this.route=i,this.translate=o,this.popoverController=c,this.favourites=[],this.subscriptions=[],this.translate.setDefaultLang(this.accountService.userValue.choosenLanguage)}return t(r,[{key:"ngOnInit",value:function(){var e=this;this.getMyOrders();var r=(new d.b).configureLogging(d.c.Information).withUrl("".concat(h.a.signalRUrl,"/orderHub")).build();r.start().then(function(){console.log("signalR Connected in travelling")}).catch(function(e){return console.log(e.toString())}),r.on("BroadcastMessage",function(){e.getMyOrders()})}},{key:"getMyOrders",value:function(){var e=this;this.subscriptions.push(this.orderService.getMyFavourites(this.accountService.userValue.id).subscribe(function(r){e.favourites=r}))}},{key:"useThis",value:function(e){this.orderService.selectedFavourite=e,this.route.navigate(["menu/travelling"])}},{key:"remove",value:function(e){this.deleteConfirmation(e)}},{key:"openLanguagePopover",value:function(e){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark(function r(){var t;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.popoverController.create({component:p.a,event:e});case 2:return t=r.sent,r.next=5,t.present();case 5:case"end":return r.stop()}},r,this)}))}},{key:"deleteConfirmation",value:function(e){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark(function r(){var t=this;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:this.translate.get(["Delete from favourites?","Yes","No"]).subscribe(function(r){return Object(u.a)(t,void 0,void 0,regeneratorRuntime.mark(function t(){var n,a=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.alertController.create({header:r["Delete from favourites?"],buttons:[{text:r.Yes,handler:function(){a.subscriptions.push(a.orderService.deleteFavouriteOrder(e).subscribe(function(e){a.successDeletedFavourite()}))}},{text:r.No}]});case 2:return n=t.sent,t.next=5,n.present();case 5:case"end":return t.stop()}},t,this)}))});case 1:case"end":return r.stop()}},r,this)}))}},{key:"successDeletedFavourite",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.translate.get(["Successfully removed the trip!"]).subscribe(function(e){return Object(u.a)(r,void 0,void 0,regeneratorRuntime.mark(function r(){var t;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.alertController.create({header:e["Successfully removed the trip!"],buttons:[{text:"Ok"}]});case 2:return t=r.sent,r.next=5,t.present();case 5:case"end":return r.stop()}},r,this)}))});case 1:case"end":return e.stop()}},e,this)}))}}]),r}(),y.\u0275fac=function(e){return new(e||y)(l.Kb(b.a),l.Kb(v.a),l.Kb(c.a),l.Kb(s.f),l.Kb(f.d),l.Kb(c.H))},y.\u0275cmp=l.Eb({type:y,selectors:[["app-favourite-orders"]],decls:17,vars:5,consts:[["slot","start"],["slot","end"],["id","toolbarIcon","name","language-outline",3,"click"],["padding","",1,"background"],["class","centered","color","dark",4,"ngIf"],[1,"row","mt-2"],[1,"col"],[1,"row"],[1,"col-md-10"],["class","list-group mt-2",4,"ngFor","ngForOf"],["color","dark",1,"centered"],[1,"fonted","mt-2"],[1,"list-group","mt-2"],[1,"text","list-group-item","list-group-item-action","flex-column","align-items-start"],[1,"mb-1","fonted"],[1,"d-flex","w-100","justify-content-between"],[1,"col-md-12"],["color","light"],["type","submit","color","dark",1,"fonted",3,"click"],["type","submit","color","danger",1,"fonted",3,"click"]],template:function(e,r){1&e&&(l.Nb(0,"ion-header"),l.Nb(1,"ion-toolbar"),l.Nb(2,"ion-buttons",0),l.Lb(3,"ion-menu-button"),l.Mb(),l.Nb(4,"ion-title"),l.Nb(5,"ion-label"),l.pc(6),l.Yb(7,"translate"),l.Mb(),l.Mb(),l.Nb(8,"ion-buttons",1),l.Nb(9,"ion-icon",2),l.Vb("click",function(e){return r.openLanguagePopover(e)}),l.Mb(),l.Mb(),l.Mb(),l.Mb(),l.Nb(10,"ion-content",3),l.oc(11,g,5,3,"ion-text",4),l.Nb(12,"div",5),l.Nb(13,"div",6),l.Nb(14,"div",7),l.Nb(15,"div",8),l.oc(16,m,28,22,"div",9),l.Mb(),l.Mb(),l.Mb(),l.Mb(),l.Mb()),2&e&&(l.zb(6),l.qc(l.Zb(7,3,"Favourites")),l.zb(5),l.dc("ngIf",0==r.favourites.length),l.zb(5),l.dc("ngForOf",r.favourites))},directives:[c.l,c.B,c.e,c.s,c.A,c.p,c.m,c.i,i.l,i.k,c.z,c.d],pipes:[f.c],styles:["ion-content[_ngcontent-%COMP%]{--ion-background-color:#e9e9e9}ion-toolbar[_ngcontent-%COMP%]{--ion-background-color:#eee}.noScroll[_ngcontent-%COMP%]{overflow:hidden}#map[_ngcontent-%COMP%]{height:100%;width:100%}ion-title[_ngcontent-%COMP%]{text-align:center}#toolbarIcon[_ngcontent-%COMP%]{font-size:1.7em}.fonted[_ngcontent-%COMP%]{font-family:Open Sans Light}.centered[_ngcontent-%COMP%]{text-align:center}hr[_ngcontent-%COMP%]{background:#eee;width:70%!important}"]}),y)}],j=((O=function r(){e(this,r)}).\u0275fac=function(e){return new(e||O)},O.\u0275mod=l.Ib({type:O}),O.\u0275inj=l.Hb({imports:[[s.h.forChild(k)],s.h]}),O),M=a("tk/3"),S=a("mqiu"),N=a("QhVT");function w(e){return new S.a(e)}var E,C=((E=function r(){e(this,r)}).\u0275fac=function(e){return new(e||E)},E.\u0275mod=l.Ib({type:E}),E.\u0275inj=l.Hb({imports:[[i.b,o.e,c.C,j,f.b.forChild({loader:{provide:f.a,useFactory:w,deps:[M.a]}}),N.LanguagePopoverPageModule]]}),E)}}])}();