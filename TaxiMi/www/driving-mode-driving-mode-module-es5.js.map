{"version":3,"sources":["webpack:///src/app/driving-mode/driving-mode.page.html","webpack:///src/app/driving-mode/driving-mode.page.ts","webpack:///src/app/driving-mode/driving-mode.page.scss","webpack:///src/_services/profit/profit.service.ts","webpack:///src/app/driving-mode/driving-mode-routing.module.ts","webpack:///src/app/driving-mode/driving-mode.module.ts"],"names":["Geolocation","DrivingModePage","route","orderService","accountService","tripService","walletService","driverService","chatService","profitService","translate","popoverController","alertController","callNumber","driverId","currentTripDriverId","applicationUserId","userValue","id","isDrivingNow","orders","closestOrders","messages","chatStyle","orderDiv","document","getElementById","subscriptions","msgDto","msgInboxArray","setDefaultLang","choosenLanguage","setInterval","watchPos","getAcceptedTrip","isStarted","push","retrieveMappedObject","subscribe","receivedObj","addToInbox","connection","configureLogging","Information","withUrl","signalRUrl","build","start","then","console","log","err","setTimeout","on","orderId","getCanceledOrderById","order","acceptedBy","canceledOrder","getOrderById","clearInterval","phone","applicationUser","toString","res","getCurrentPosition","coordinates","myLatLng","lat","coords","latitude","lng","longitude","locateDriver","x","directionsService","google","maps","DirectionsService","directionsRenderer","DirectionsRenderer","userLatLng","locationLat","locationLong","userLat","userLng","origin","destination","travelMode","TravelMode","DRIVING","response","status","navigateToUser","currentTrip","getPlatform","window","open","setDirections","platform","alert","setMap","map","destinationLat","destinationLong","startTrip","text","length","user","firstName","lastName","c","broadcastMessage","obj","newObj","trip","tripStatus","dischargeWallet","tripPriceForDriver","addToProfit","completeTripAlert","ev","create","component","event","popover","present","eta","routes","legs","duration","km","distance","value","distanceText","getTrip","stop","location","totalPrice","userLatitude","userLongitude","userDestinationLat","userDestinationLng","tripDistance","calculateEta","getDriver","s","comission","updateDriverArrived","alertForCancel","header","message","buttons","handler","cancelOrderFromDriver","cancelTrip","updateDriving","voteDown","navigate","role","popup","cssClass","completeTrip","completeOrder","userId","read","selector","template","ProfitService","http","sharedService","headers","headerGerneration","get","apiUrl","pipe","handleError","put","responseType","error","errorMessage","ErrorEvent","providedIn","path","DrivingModePageRoutingModule","imports","forChild","exports","HttpLoaderFactory","DrivingModePageModule","loader","provide","useFactory","deps","providers","declarations"],"mappings":"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","file":"driving-mode-driving-mode-module-es5.js","sourcesContent":["export default \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-menu-button></ion-menu-button>\\r\\n    </ion-buttons>\\r\\n\\r\\n    <ion-title>\\r\\n      <ion-label>{{'Accepted order' | translate}}</ion-label>\\r\\n    </ion-title>\\r\\n\\r\\n    <ion-buttons slot=\\\"end\\\">\\r\\n      <ion-icon (click)='openLanguagePopover($event)' id=\\\"toolbarIcon\\\" name=\\\"language-outline\\\"></ion-icon>\\r\\n    </ion-buttons>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content padding class=\\\"noScroll\\\">\\r\\n\\r\\n  <div class=\\\"col-md-10\\\">\\r\\n    <div id=\\\"orderDiv\\\" class=\\\"list-group mt-2\\\">\\r\\n\\r\\n      <a class=\\\"text list-group-item list-group-item-action flex-column align-items-start\\\">\\r\\n        <div class=\\\"d-flex w-100 justify-content-between\\\">\\r\\n          <h5 class=\\\"mb-1 fonted\\\"></h5>\\r\\n        </div>\\r\\n        <p>\\r\\n          <ion-icon class=\\\"mr-2\\\" name=\\\"analytics-outline\\\"></ion-icon>{{this.location}}\\r\\n        </p>\\r\\n        <hr />\\r\\n        <p>\\r\\n          <ion-icon class=\\\"mr-2\\\" name=\\\"arrow-forward-outline\\\"></ion-icon>{{this.destination}}\\r\\n        </p>\\r\\n        <div class=\\\"text-center\\\">\\r\\n          <p> <button (click)=\\\"navigateToUserAndCalculateDistance()\\\" type=\\\"button\\\" [disabled]=\\\"tripStatus=='Started'\\\"\\r\\n              class=\\\"fonted btn btn-info btn-sm btn-block\\\">{{'Navigate to user' | translate}}</button></p>\\r\\n\\r\\n          <p>\\r\\n            <button (click)=\\\"navigateToPointAndCalculateDistance()\\\" type=\\\"button\\\" color=\\\"primary\\\"\\r\\n              class=\\\"fonted btn btn-info btn-sm btn-block\\\" [disabled]=\\\"tripStatus=='!Processing'\\\">{{'Start trip' |\\r\\n              translate}}</button>\\r\\n          </p>\\r\\n          <p>\\r\\n            <button [disabled]=\\\"tripStatus=='Processing'\\\" class=\\\"fonted btn btn-success btn-sm btn-block\\\"\\r\\n              (click)=\\\"finishTrip()\\\" type=\\\"button\\\">\\r\\n              {{'Finish trip' | translate}}</button>\\r\\n          </p>\\r\\n\\r\\n          <p>\\r\\n            <button *ngIf=\\\"tripStatus == 'Navigating'\\\" (click)=\\\"onTheAddress()\\\" type=\\\"button\\\"\\r\\n              class=\\\"fonted btn btn-info btn-sm btn-block\\\">Im on the address</button>\\r\\n          </p>\\r\\n\\r\\n          <p>\\r\\n            <button (click)=\\\"callDriver()\\\" class=\\\"fonted btn btn-warning btn-sm btn-block\\\" (click)=\\\"clearMessages()\\\"\\r\\n              type=\\\"button\\\">\\r\\n              <ion-icon name=\\\"call\\\" class=\\\"mr-2\\\"></ion-icon>Call passenger\\r\\n            </button>\\r\\n          </p>\\r\\n\\r\\n          <p>\\r\\n            <button *ngIf=\\\"tripStatus == 'Processing'\\\" (click)=\\\"cancelOrder()\\\"\\r\\n              class=\\\"fonted btn btn-warning btn-sm btn-block\\\" type=\\\"button\\\">\\r\\n              {{'Cancel' | translate}}\\r\\n            </button>\\r\\n          </p>\\r\\n        </div>\\r\\n\\r\\n      </a>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n\\r\\n  <!-- <div #map id=\\\"map\\\"></div> -->\\r\\n</ion-content>\\r\\n\\r\\n\\r\\n<ion-footer class=\\\"ion-no-border page-wrap\\\">\\r\\n  <div id=\\\"chat\\\" class=\\\"row chat\\\">\\r\\n\\r\\n    <div class=\\\"col\\\">\\r\\n      <ion-card>\\r\\n\\r\\n        <div class=\\\"msg-box\\\">\\r\\n          <ul *ngIf=\\\"this.msgInboxArray.length == 0\\\" class=\\\"text-center mr-5\\\">\\r\\n            <li>{{'No messages for now' | translate}}</li>\\r\\n          </ul>\\r\\n          <ul *ngFor=\\\"let mObj of msgInboxArray\\\">\\r\\n            <li [ngClass]=\\\"mObj.user === msgDto.user ? 'in-msg' : 'ex-msg'\\\">\\r\\n              {{mObj.user}}:\\r\\n              {{mObj.text}}\\r\\n            </li>\\r\\n\\r\\n          </ul>\\r\\n        </div>\\r\\n      </ion-card>\\r\\n\\r\\n      <ion-card class=\\\"type\\\">\\r\\n        <ion-item>\\r\\n          <ion-input [(ngModel)]=\\\"msgDto.text\\\" [placeholder]='\\\"Type your message...\\\" | translate'>\\r\\n\\r\\n          </ion-input>\\r\\n          <ion-icon (click)=\\\"send()\\\" name=\\\"send-outline\\\"></ion-icon>\\r\\n\\r\\n        </ion-item>\\r\\n      </ion-card>\\r\\n    </div>\\r\\n\\r\\n  </div>\\r\\n</ion-footer>\\r\\n\\r\\n\\r\\n<!-- <ion-footer class=\\\"ion-no-border\\\">\\r\\n  <ion-toolbar class=\\\"text-center\\\">\\r\\n    <ion-text class=\\\"textTravel\\\">\\r\\n      <button (click)=\\\"navigateToUserAndCalculateDistance()\\\" type=\\\"button\\\" [disabled]=\\\"tripStatus=='Started'\\\"\\r\\n        class=\\\"fonted btn btn-info\\\">{{'Navigate to user' | translate}}</button>\\r\\n      <button (click)=\\\"navigateToPointAndCalculateDistance()\\\" type=\\\"button\\\" color=\\\"primary\\\"\\r\\n      class=\\\"fonted btn btn-info ml-1\\\" [disabled]=\\\"tripStatus=='!Processing'\\\">{{'Start trip' | translate}}</button>\\r\\n      <button (click)=\\\"callDriver()\\\" class=\\\"fonted btn btn-warning ml-1\\\" (click)=\\\"clearMessages()\\\" type=\\\"button\\\"><ion-icon name=\\\"call\\\" class=\\\"mr-2\\\"></ion-icon>Call driver\\r\\n      </button>\\r\\n      <ion-text class=\\\"centered\\\" color=\\\"dark\\\">\\r\\n        <p class=\\\"text\\\">{{this.destination}}</p>\\r\\n      </ion-text>\\r\\n    </ion-text>\\r\\n\\r\\n  </ion-toolbar>\\r\\n</ion-footer> -->\\r\\n\\r\\n<!-- <ion-footer class=\\\"ion-no-border site-footer\\\">\\r\\n  <ion-toolbar class=\\\"text-center\\\">\\r\\n    <button [disabled]=\\\"tripStatus=='Processing'\\\" class=\\\"fonted btn btn-success\\\" (click)=\\\"finishTrip()\\\" type=\\\"button\\\">\\r\\n      {{'Finish trip' | translate}}</button>\\r\\n    <button (click)=\\\"chat()\\\" class=\\\"fonted btn btn-secondary ml-1\\\" type=\\\"button\\\" (click)=\\\"clearMessages()\\\">\\r\\n      {{'Chat'| translate}}</button>\\r\\n\\r\\n      <button *ngIf=\\\"tripStatus == 'Navigating'\\\" (click)=\\\"onTheAddress()\\\" type=\\\"button\\\"\\r\\n      class=\\\"fonted btn btn-info ml-1\\\">Im on the address</button>\\r\\n      <button *ngIf=\\\"tripStatus == 'Processing'\\\" (click)=\\\"cancelOrder()\\\" class=\\\"fonted btn btn-warning ml-1\\\" type=\\\"button\\\">\\r\\n        {{'Cancel' | translate}}\\r\\n      </button>\\r\\n    <br />\\r\\n    <ion-label class=\\\"blink_me\\\" *ngIf=\\\"messages.length != 0  && chatStyle == 'none'\\\">{{'You have new message' |\\r\\n      translate}}.</ion-label>\\r\\n  </ion-toolbar>\\r\\n  \\r\\n  <div id=\\\"chat\\\" style=\\\"display: none;\\\" class=\\\"row chat\\\">\\r\\n\\r\\n    <div class=\\\"col\\\">\\r\\n      <ion-card>\\r\\n\\r\\n        <div class=\\\"msg-box\\\">\\r\\n          <ul *ngIf=\\\"this.msgInboxArray.length == 0\\\" class=\\\"text-center mr-5\\\">\\r\\n            <li>{{'No messages for now' | translate}}</li>\\r\\n          </ul>\\r\\n          <ul *ngFor=\\\"let mObj of msgInboxArray\\\">\\r\\n            <li [ngClass]=\\\"mObj.user === msgDto.user ? 'in-msg' : 'ex-msg'\\\">\\r\\n              {{mObj.user}}:\\r\\n              {{mObj.text}}\\r\\n            </li>\\r\\n\\r\\n          </ul>\\r\\n        </div>\\r\\n      </ion-card>\\r\\n\\r\\n      <ion-card class=\\\"type\\\">\\r\\n        <ion-item>\\r\\n          <ion-input [(ngModel)]=\\\"msgDto.text\\\" [placeholder]='\\\"Type your message...\\\" | translate'>\\r\\n\\r\\n          </ion-input>\\r\\n          <ion-icon (click)=\\\"send()\\\" name=\\\"send-outline\\\"></ion-icon>\\r\\n\\r\\n        </ion-item>\\r\\n      </ion-card>\\r\\n    </div>\\r\\n\\r\\n  </div>\\r\\n</ion-footer> -->\";","import { Component, ElementRef, OnDestroy, OnInit, ViewChild } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { Capacitor, Plugins } from '@capacitor/core';\r\nimport { AlertController, PopoverController } from '@ionic/angular';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { AnyTxtRecord } from 'dns';\r\nimport { interval, Subscription } from 'rxjs';\r\nimport { Message, Order, Trip } from 'src/_models';\r\nimport { AccountService } from 'src/_services';\r\nimport { ChatService } from 'src/_services/chat/chat.service';\r\nimport { DriverService } from 'src/_services/driver/driver.service';\r\nimport { OrderService } from 'src/_services/order/order.service';\r\nimport { ProfitService } from 'src/_services/profit/profit.service';\r\nimport { TripService } from 'src/_services/trip/trip.service';\r\nimport { WalletService } from 'src/_services/wallet/wallet.service';\r\nimport { LanguagePopoverPage } from '../language-popover/language-popover.page';\r\nimport * as signalR from '@aspnet/signalr';\r\nimport { environment } from 'src/environments/environment';\r\nimport { CallNumber } from '@ionic-native/call-number/ngx';\r\n\r\nconst { Geolocation } = Plugins;\r\ndeclare var google: any;\r\n@Component({\r\n  selector: 'app-driving-mode',\r\n  templateUrl: './driving-mode.page.html',\r\n  styleUrls: ['./driving-mode.page.scss'],\r\n})\r\nexport class DrivingModePage implements OnInit, OnDestroy {\r\n  public currentTrip: Trip;\r\n  categoryType;\r\n\r\n  tripStatus: string;\r\n\r\n  location: string;\r\n  destination: string;\r\n\r\n  tripDistance: any;\r\n  tripPriceForDriver: number;\r\n\r\n  driverId = this.tripService.currentTripDriverId;\r\n  applicationUserId = this.accountService.userValue.id;\r\n  isDrivingNow = this.accountService.userValue.isDrivingNow;\r\n  isStarted: boolean;\r\n\r\n  order: Order;\r\n  orders: Order[] = [];\r\n  closestOrders: Order[] = [];\r\n\r\n  totalPrice: number;\r\n\r\n  //Map\r\n  map: any;\r\n\r\n  address: string;\r\n\r\n  userLatitude: any;\r\n  userLongitude: any;\r\n\r\n  userDestinationLat: any;\r\n  userDestinationLng: any;\r\n\r\n  myLat: string;\r\n  myLng: string;\r\n\r\n  distance: string;\r\n  eta: string;\r\n\r\n  messages = this.chatService.messages;\r\n  chatStyle = \"\";\r\n\r\n  orderDiv = document.getElementById(\"orderDiv\");\r\n  @ViewChild('map', { read: ElementRef, static: false }) mapRef: ElementRef;\r\n\r\n\r\n  id: any;\r\n  target: any;\r\n  options: any;\r\n\r\n  private subscriptions: Subscription[] = [];\r\n\r\n\r\n  constructor(private route: Router,\r\n    private orderService: OrderService,\r\n    private accountService: AccountService,\r\n    private tripService: TripService,\r\n    private walletService: WalletService,\r\n    private driverService: DriverService,\r\n    private chatService: ChatService,\r\n    private profitService: ProfitService,\r\n    private translate: TranslateService,\r\n    private popoverController: PopoverController,\r\n    private alertController: AlertController,\r\n    private callNumber: CallNumber) {\r\n    this.translate.setDefaultLang(this.accountService.userValue.choosenLanguage);\r\n\r\n  }\r\n  // ionViewDidLeave() {\r\n  //   for (const subscription of this.subscriptions) {\r\n  //     console.log(subscription)\r\n  //     subscription.unsubscribe();\r\n  //   }\r\n  // }\r\n  ngOnInit() {\r\n\r\n    this.id = setInterval(() => {\r\n      this.watchPos();\r\n    }, 3000);\r\n\r\n    this.getAcceptedTrip();\r\n    this.isStarted = false;\r\n    this.subscriptions.push(this.chatService.retrieveMappedObject()\r\n      .subscribe((receivedObj: Message) => { this.addToInbox(receivedObj); }));  // calls the service method to get the new messages sent\r\n\r\n\r\n    const connection = new signalR.HubConnectionBuilder()\r\n      .configureLogging(signalR.LogLevel.Information)\r\n      .withUrl(`${environment.signalRUrl}/orderHub`)\r\n      .build();\r\n\r\n    connection.start().then(function () {\r\n      console.log('signalR Connected in driving-mode');\r\n    }).catch(function (err) {\r\n      console.log(\"Reconnecting in 1 sec.\");\r\n      setTimeout(() => connection.start(), 1000);\r\n    });\r\n\r\n\r\n\r\n    connection.on('OrderDeleted', (orderId: string) => {\r\n      this.subscriptions.push(this.orderService.getCanceledOrderById(orderId)\r\n        .subscribe(order => {\r\n          if (order.acceptedBy == this.applicationUserId) {\r\n            this.canceledOrder();\r\n          }\r\n        }))\r\n    });\r\n\r\n    connection.on('OrderAccepted', (orderId: string) => {\r\n      this.subscriptions.push(this.orderService.getOrderById(orderId)\r\n        .subscribe(order => {\r\n          if (order.acceptedBy == this.applicationUserId) {\r\n            this.getAcceptedTrip();\r\n\r\n          }\r\n        }))\r\n    });\r\n\r\n    connection.on('Navigate', (orderId: string) => {\r\n      this.subscriptions.push(this.orderService.getOrderById(orderId)\r\n        .subscribe(order => {\r\n          if (order.acceptedBy == this.applicationUserId) {\r\n            this.getAcceptedTrip();\r\n          }\r\n        }))\r\n    });\r\n\r\n    connection.on('LocateDriver', (driverId: string) => {\r\n\r\n    });\r\n\r\n    connection.on('WalletAction', () => {\r\n\r\n    });\r\n\r\n    connection.on('CompleteOrder', () => {\r\n\r\n    });\r\n\r\n\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    if (this.id) {\r\n      clearInterval(this.id);\r\n    }\r\n  }\r\n\r\n  ionViewDidEnter() {\r\n    if (this.accountService.userValue.isDrivingNow == true) {\r\n      this.getAcceptedTrip();\r\n    }\r\n  }\r\n\r\n  async callDriver() {\r\n    let phone = this.order.applicationUser.phone.toString();\r\n    this.callNumber.callNumber(phone, true)\r\n      .then(res => console.log('Launched dialer!', res))\r\n      .catch(err => console.log('Error launching dialer', err));\r\n  }\r\n\r\n  async watchPos() {\r\n    let coordinates = await Geolocation.getCurrentPosition();\r\n    const myLatLng = { lat: coordinates.coords.latitude, lng: coordinates.coords.longitude };\r\n    this.subscriptions.push(this.driverService.locateDriver(this.accountService.userValue.driverId, myLatLng.lat.toString(), myLatLng.lng.toString())\r\n      .subscribe(x => { }));\r\n\r\n  }\r\n\r\n  async navigateToUserAndCalculateDistance() {\r\n    const directionsService = new google.maps.DirectionsService();\r\n    const directionsRenderer = new google.maps.DirectionsRenderer();\r\n    const coordinates = await Geolocation.getCurrentPosition();\r\n    const myLatLng = { lat: coordinates.coords.latitude, lng: coordinates.coords.longitude };\r\n    const userLatLng = { lat: this.order.locationLat, lng: this.order.locationLong };\r\n    let userLat = +userLatLng.lat;\r\n    let userLng = +userLatLng.lng;\r\n    directionsService.route(\r\n      {\r\n        origin: {\r\n          lat: myLatLng.lat,\r\n          lng: myLatLng.lng\r\n        },\r\n        destination: {\r\n          lat: userLat,\r\n          lng: userLng,\r\n        },\r\n        travelMode: google.maps.TravelMode.DRIVING,\r\n      },\r\n      (response, status) => {\r\n        if (status === \"OK\") {\r\n          this.subscriptions.push(this.tripService.navigateToUser(this.currentTrip.id, this.order.id)\r\n            .subscribe(() => {\r\n              if (Capacitor.getPlatform() === 'ios') {\r\n                window.open(`http://maps.apple.com/maps?q=${userLat},${userLng}&t=m&dirflg=d`);\r\n                console.log('ios platform')\r\n                directionsRenderer.setDirections(response);\r\n                this.isStarted = true;\r\n              }\r\n              if (Capacitor.platform == 'android') {\r\n                window.open(`https://www.google.com/maps/dir/?api=1&destination=${userLat},${userLng}&travelmode=driving`);\r\n                directionsRenderer.setDirections(response);\r\n                this.isStarted = true;\r\n              }\r\n              else {\r\n                window.open(`https://www.google.com/maps/dir/?api=1&destination=${userLat},${userLng}&travelmode=driving`);\r\n                directionsRenderer.setDirections(response);\r\n                this.isStarted = true;\r\n              }\r\n            }));\r\n\r\n        } else {\r\n          window.alert(\"Directions request failed due to \" + status);\r\n        }\r\n      }\r\n    );\r\n\r\n    directionsRenderer.setMap(this.map);\r\n  }\r\n\r\n  //Set directions to user's destination\r\n  async navigateToPointAndCalculateDistance() {\r\n    const directionsService = new google.maps.DirectionsService();\r\n    const directionsRenderer = new google.maps.DirectionsRenderer();\r\n    const coordinates = await Geolocation.getCurrentPosition();\r\n    const myLatLng = { lat: coordinates.coords.latitude, lng: coordinates.coords.longitude };\r\n    const userLatLng = { lat: this.order.destinationLat, lng: this.order.destinationLong };\r\n    let userLat = +userLatLng.lat;\r\n    let userLng = +userLatLng.lng;\r\n    directionsService.route(\r\n      {\r\n        origin: {\r\n          lat: myLatLng.lat,\r\n          lng: myLatLng.lng\r\n        },\r\n        destination: {\r\n          lat: userLat,\r\n          lng: userLng,\r\n        },\r\n        travelMode: google.maps.TravelMode.DRIVING,\r\n      },\r\n      (response, status) => {\r\n        if (status === \"OK\") {\r\n          if (Capacitor.getPlatform() == 'ios') {\r\n            console.log('ios platform')\r\n            directionsRenderer.setDirections(response);\r\n            window.open(`http://maps.apple.com/maps?q=${userLat},${userLng}&t=m&dirflg=d`);\r\n          }\r\n          if (Capacitor.getPlatform() == 'android') {\r\n            console.log('android or web platform')\r\n            directionsRenderer.setDirections(response);\r\n            window.open(`https://www.google.com/maps/dir/?api=1&destination=${userLat},${userLng}&travelmode=driving`);\r\n          }\r\n          else {\r\n            console.log('web platform')\r\n            directionsRenderer.setDirections(response);\r\n            window.open(`https://www.google.com/maps/dir/?api=1&destination=${userLat},${userLng}&travelmode=driving`);\r\n          }\r\n          this.startTrip();\r\n        } else {\r\n          console.log(\"failed\")\r\n\r\n          window.alert(\"Directions request failed due to \" + status);\r\n        }\r\n      }\r\n    );\r\n    directionsRenderer.setMap(this.map);\r\n  }\r\n\r\n  msgDto: Message = new Message();\r\n  msgInboxArray: Message[] = [];\r\n\r\n  send(): void {\r\n    if (this.msgDto) {\r\n      if (this.msgDto.text.length == 0) {\r\n        window.alert(\"Text field is required.\");\r\n        return;\r\n      } else {\r\n        this.msgDto.user = `${this.accountService.userValue.firstName} ${this.accountService.userValue.lastName}`;\r\n        var c = this.chatService.broadcastMessage(this.msgDto);\r\n      }\r\n    }\r\n  }\r\n\r\n  clearMessages() {\r\n    this.messages.length = 0;\r\n  }\r\n\r\n  addToInbox(obj: Message) {\r\n    let newObj = new Message();\r\n    newObj.user = obj.user;\r\n    newObj.text = obj.text;\r\n    this.msgInboxArray.push(newObj);\r\n    this.msgDto.text = '';\r\n  }\r\n\r\n  startTrip() {\r\n    this.subscriptions.push(this.tripService.startTrip(this.currentTrip.id)\r\n      .subscribe(trip => {\r\n        if (trip) {\r\n          this.tripStatus = trip.status;\r\n          this.subscriptions.push(this.walletService.dischargeWallet(this.applicationUserId, this.tripPriceForDriver)\r\n            .subscribe(x => {\r\n              this.subscriptions.push(this.profitService.addToProfit(this.tripPriceForDriver)\r\n                .subscribe(() => { }));\r\n            }))\r\n        }\r\n      }))\r\n  }\r\n\r\n  finishTrip() {\r\n    this.completeTripAlert();\r\n  }\r\n\r\n  async openLanguagePopover(ev) {\r\n    const popover = await this.popoverController.create({\r\n      component: LanguagePopoverPage,\r\n      event: ev\r\n    });\r\n    await popover.present();\r\n  }\r\n\r\n  async calculateEta(order) {\r\n    const directionsService = new google.maps.DirectionsService();\r\n    const coordinates = await Geolocation.getCurrentPosition();\r\n    const myLatLng = { lat: coordinates.coords.latitude, lng: coordinates.coords.longitude };\r\n    directionsService.route(\r\n      {\r\n        origin: {\r\n          lat: myLatLng.lat,\r\n          lng: myLatLng.lng\r\n        },\r\n        destination: {\r\n          lat: +order.locationLat,\r\n          lng: +order.locationLong,\r\n        },\r\n        travelMode: google.maps.TravelMode.DRIVING,\r\n      },\r\n      (response, status) => {\r\n        if (status === \"OK\") {\r\n          this.eta = response.routes[0].legs[0].duration.text;\r\n          order.km = response.routes[0].legs[0].distance.value / 1000;\r\n          order.distanceText = response.routes[0].legs[0].distance.text;\r\n          order.eta = response.routes[0].legs[0].duration.text;\r\n          this.distance = order.distanceText;\r\n        }\r\n      }\r\n    );\r\n  }\r\n\r\n  getAcceptedTrip() {\r\n    this.subscriptions.push(this.tripService.getTrip(this.driverId)\r\n      .subscribe(x => {\r\n        if (x == null) {\r\n          return;\r\n        }\r\n        this.chatService.stop();\r\n        this.chatService.start();\r\n        this.tripStatus = x.status;\r\n        this.currentTrip = x;\r\n\r\n        this.subscriptions.push(this.orderService.getOrderById(x.orderId).subscribe(order => {\r\n          if (order != null) {\r\n            x.order = order;\r\n\r\n            this.order = x.order;\r\n\r\n            this.location = order.location;\r\n            this.destination = order.destination;\r\n\r\n            this.totalPrice = order.totalPrice;\r\n\r\n            this.userLatitude = order.locationLat;\r\n            this.userLongitude = order.locationLong;\r\n\r\n            this.userDestinationLat = order.destinationLat;\r\n            this.userDestinationLng = order.destinationLong;\r\n\r\n            this.tripDistance = order.tripDistance;\r\n            this.calculateEta(order);\r\n\r\n            this.subscriptions.push(this.driverService.getDriver(this.accountService.userValue.driverId)\r\n              .subscribe(s => {\r\n                this.tripPriceForDriver = (order.totalPrice * (s.comission / 100));\r\n              }))\r\n          }\r\n        }))\r\n      }));\r\n  }\r\n\r\n  onTheAddress() {\r\n    this.subscriptions.push(this.orderService.updateDriverArrived(this.order.id)\r\n      .subscribe(() => { }));\r\n  }\r\n\r\n  cancelOrder() {\r\n    this.alertForCancel();\r\n  }\r\n\r\n  async alertForCancel() {\r\n    const popup = await this.alertController.create({\r\n      header: 'Are you sure you want to cancel the order?',\r\n      message: 'Your rating will decrease!',\r\n      buttons: [\r\n        {\r\n          text: 'Confirm',\r\n          handler: () => {\r\n            this.subscriptions.push(this.driverService.cancelOrderFromDriver(this.order.id)\r\n              .subscribe(x => {\r\n                this.subscriptions.push(this.tripService.cancelTrip(this.currentTrip.id)\r\n                  .subscribe(() => {\r\n                    this.accountService.userValue.isDrivingNow = false;\r\n                    this.subscriptions.push(this.accountService.updateDriving(this.applicationUserId, false)\r\n                      .subscribe(() => {\r\n                        this.subscriptions.push(this.driverService.voteDown(this.accountService.userValue.driverId)\r\n                          .subscribe(() => {\r\n                            this.route.navigate(['menu/driving']);\r\n                          }))\r\n                      }));\r\n                  }))\r\n              }));\r\n          }\r\n        },\r\n        {\r\n          text: 'Cancel',\r\n          role: 'cancel'\r\n        }\r\n      ]\r\n    });\r\n    await popup.present();\r\n  }\r\n\r\n  async canceledOrder() {\r\n    const popup = await this.alertController.create({\r\n      header: 'Order is cancelled by the customer.',\r\n\r\n      buttons: [\r\n        {\r\n          text: 'Ok',\r\n          handler: () => {\r\n            this.accountService.userValue.isDrivingNow = false;\r\n\r\n            this.subscriptions.push(this.accountService.updateDriving(this.applicationUserId, false)\r\n              .subscribe(() => {\r\n                this.route.navigate(['menu/driving']);\r\n              }));\r\n          }\r\n        }\r\n      ]\r\n    });\r\n    await popup.present();\r\n  }\r\n\r\n\r\n  async completeTripAlert() {\r\n    const popup = await this.alertController.create({\r\n      cssClass: 'my-custom-class',\r\n      header: 'Are you sure you want to finish the trip?',\r\n      //message: '<img src = \"../assets/default.png\" width=\"1px\" height=\"1px\">',\r\n\r\n      buttons: [\r\n        {\r\n          text: 'Yes',\r\n          role: 'cancel',\r\n          handler: () => {\r\n            this.subscriptions.push(this.tripService.completeTrip(this.currentTrip.id)\r\n            .subscribe(trip => {\r\n              if (trip) {\r\n                this.tripStatus = trip.status;\r\n              }\r\n              this.subscriptions.push(this.orderService.completeOrder(this.currentTrip.orderId)\r\n                .subscribe(() => { }));\r\n      \r\n              //trigger the driver's driving now property to false\r\n              let userId = this.accountService.userValue.id;\r\n              let value = this.accountService.userValue.isDrivingNow = false;\r\n      \r\n              this.subscriptions.push(this.accountService.updateDriving(userId, value)\r\n                .subscribe());\r\n              this.isDrivingNow = this.accountService.userValue.isDrivingNow;\r\n              this.route.navigate(['menu/driving']);\r\n            }))\r\n      \r\n      \r\n          }\r\n        },\r\n        {\r\n          text: 'No'\r\n        }\r\n      ]\r\n    });\r\n\r\n    await popup.present();\r\n  }\r\n}\r\n","export default \"ion-content {\\n  --ion-background-color:#e9e9e9;\\n}\\n\\nion-toolbar {\\n  --ion-background-color:#eeeeee;\\n}\\n\\nion-title {\\n  text-align: center;\\n}\\n\\n#toolbarIcon {\\n  font-size: 1.7em;\\n}\\n\\n.fonted {\\n  font-family: Open Sans Light;\\n}\\n\\n.centered {\\n  text-align: center;\\n}\\n\\n.text {\\n  font-family: Open Sans Light;\\n}\\n\\nhr {\\n  background: #eeeeee;\\n  width: 70% !important;\\n}\\n\\n.blink_me {\\n  -webkit-animation: blinker 1s linear infinite;\\n          animation: blinker 1s linear infinite;\\n}\\n\\n@-webkit-keyframes blinker {\\n  50% {\\n    opacity: 0;\\n  }\\n}\\n\\n@keyframes blinker {\\n  50% {\\n    opacity: 0;\\n  }\\n}\\n\\n.msg-box {\\n  width: 100%;\\n  height: 140px;\\n  padding: 10px 30px;\\n  font-size: 14px;\\n  font-family: Open Sans Light;\\n  overflow: auto;\\n}\\n\\n.msg-box ul {\\n  margin: -5px;\\n  list-style: none;\\n}\\n\\n.msg-box ul .ex-msg {\\n  text-align: right;\\n}\\n\\n.msg-box ul .in-msg {\\n  text-align: left;\\n  margin-left: -60px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uXFwuLlxcLi5cXGRyaXZpbmctbW9kZS5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFFSSw4QkFBQTtBQUFKOztBQUtBO0VBQ0ksOEJBQUE7QUFGSjs7QUFZQTtFQUNJLGtCQUFBO0FBVEo7O0FBWUE7RUFDSSxnQkFBQTtBQVRKOztBQVlBO0VBQ0ksNEJBQUE7QUFUSjs7QUFZQTtFQUNJLGtCQUFBO0FBVEo7O0FBWUE7RUFFSSw0QkFBQTtBQVZKOztBQWFBO0VBQ0ksbUJBQUE7RUFDQSxxQkFBQTtBQVZKOztBQWVBO0VBQ0ksNkNBQUE7VUFBQSxxQ0FBQTtBQVpKOztBQWVFO0VBQ0U7SUFDRSxVQUFBO0VBWko7QUFDRjs7QUFTRTtFQUNFO0lBQ0UsVUFBQTtFQVpKO0FBQ0Y7O0FBZ0JBO0VBQ0ksV0FBQTtFQUNBLGFBQUE7RUFDQSxrQkFBQTtFQUNBLGVBQUE7RUFDQSw0QkFBQTtFQUNBLGNBQUE7QUFkSjs7QUFnQkk7RUFDSSxZQUFBO0VBRUEsZ0JBQUE7QUFmUjs7QUFnQlE7RUFDSSxpQkFBQTtBQWRaOztBQWlCUTtFQUNJLGdCQUFBO0VBQ0Esa0JBQUE7QUFmWiIsImZpbGUiOiJkcml2aW5nLW1vZGUucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiaW9uLWNvbnRlbnR7XHJcbiAgICAvLy0tYmFja2dyb3VuZDogdXJsKC4uLy4uL2Fzc2V0cy93cDQ3OTI3ODAtZGFyay1waG9uZS13YWxscGFwZXJzLmpwZykgMCAwLzEwMCUgMTAwJSBuby1yZXBlYXQ7XHJcbiAgICAtLWlvbi1iYWNrZ3JvdW5kLWNvbG9yOiNlOWU5ZTk7XHJcblxyXG5cclxufVxyXG5cclxuaW9uLXRvb2xiYXJ7XHJcbiAgICAtLWlvbi1iYWNrZ3JvdW5kLWNvbG9yOiNlZWVlZWU7XHJcbn1cclxuXHJcbiAgICAvLyAjbWFwIHtcclxuICAgIC8vICAgICBwb3NpdGlvbjogZml4ZWQ7XHJcbiAgICAvLyBoZWlnaHQ6IDEwMCU7XHJcbiAgICAvLyB3aWR0aDogMTAwJTtcclxuICAgIC8vIH1cclxuICAgIFxyXG5cclxuaW9uLXRpdGxlIHtcclxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxufVxyXG5cclxuI3Rvb2xiYXJJY29ue1xyXG4gICAgZm9udC1zaXplOiAxLjdlbTtcclxufVxyXG5cclxuLmZvbnRlZHtcclxuICAgIGZvbnQtZmFtaWx5OiBPcGVuIFNhbnMgTGlnaHQ7XHJcbn1cclxuXHJcbi5jZW50ZXJlZHtcclxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxufVxyXG5cclxuLnRleHR7ICBcclxuICAgIC8vZm9udC1mYW1pbHk6ICdGcmFua2xpbiBHb3RoaWMgTWVkaXVtJywgJ0FyaWFsIE5hcnJvdycsIEFyaWFsLCBzYW5zLXNlcmlmO1xyXG4gICAgZm9udC1mYW1pbHk6IE9wZW4gU2FucyBMaWdodDtcclxufVxyXG5cclxuaHJ7XHJcbiAgICBiYWNrZ3JvdW5kOiNlZWVlZWU7XHJcbiAgICB3aWR0aDogNzAlICFpbXBvcnRhbnQ7XHJcbn1cclxuXHJcbi8vY2hhdFxyXG5cclxuLmJsaW5rX21lIHtcclxuICAgIGFuaW1hdGlvbjogYmxpbmtlciAxcyBsaW5lYXIgaW5maW5pdGU7XHJcbiAgfVxyXG4gIFxyXG4gIEBrZXlmcmFtZXMgYmxpbmtlciB7XHJcbiAgICA1MCUge1xyXG4gICAgICBvcGFjaXR5OiAwO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcblxyXG4ubXNnLWJveCB7XHJcbiAgICB3aWR0aDogMTAwJTtcclxuICAgIGhlaWdodDogMTQwcHg7XHJcbiAgICBwYWRkaW5nOiAxMHB4IDMwcHg7XHJcbiAgICBmb250LXNpemU6IDE0cHg7XHJcbiAgICBmb250LWZhbWlseTogT3BlbiBTYW5zIExpZ2h0O1xyXG4gICAgb3ZlcmZsb3c6IGF1dG87XHJcblxyXG4gICAgdWwge1xyXG4gICAgICAgIG1hcmdpbjogLTVweDtcclxuXHJcbiAgICAgICAgbGlzdC1zdHlsZTogbm9uZTtcclxuICAgICAgICAuZXgtbXNnIHtcclxuICAgICAgICAgICAgdGV4dC1hbGlnbjogcmlnaHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAuaW4tbXNnIHtcclxuICAgICAgICAgICAgdGV4dC1hbGlnbjogbGVmdDtcclxuICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IC02MHB4O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG59XHJcblxyXG4iXX0= */\";","import { Injectable } from '@angular/core';\r\nimport { HttpClient, HttpHeaders } from '@angular/common/http'; \r\nimport { Profit } from '../../_models';\r\nimport { environment } from '../../environments/environment'\r\nimport { Observable, throwError } from 'rxjs';\r\nimport { catchError } from 'rxjs/operators';\r\nimport { SharedService } from '../shared/shared.service';\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ProfitService {\r\n\r\n  constructor(private http: HttpClient, private sharedService: SharedService) { }\r\n\r\n  public getTotalProfit(): Observable<Profit> {\r\n    const headers = this.sharedService.headerGerneration();\r\n    return this.http.get<Profit>(`${environment.apiUrl}/api/profit`, {headers})\r\n      .pipe(\r\n        catchError(this.handleError)\r\n      );\r\n  }\r\n\r\n  public addToProfit(value: number): Observable<Profit>{\r\n    const headers = this.sharedService.headerGerneration();\r\n    return this.http.put<Profit>(`${environment.apiUrl}/api/profit/${value}`, { headers, responseType: 'json' },)\r\n    .pipe(\r\n      catchError(this.handleError)\r\n    );\r\n  }\r\n\r\n  handleError(error) {\r\n    let errorMessage = '';\r\n    if (error.error instanceof ErrorEvent) {\r\n      // client-side error\r\n      console.log('Client side error.')\r\n      errorMessage = `Error: ${error.error.message}`;\r\n    } else {\r\n      // server-side error\r\n      console.log('Server side error.')\r\n      errorMessage = `Error Code: ${error.status}\\nMessage: ${error.message}`;\r\n    }\r\n    console.log(errorMessage);\r\n    return throwError(errorMessage);\r\n  }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { DrivingModePage } from './driving-mode.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: DrivingModePage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class DrivingModePageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { DrivingModePageRoutingModule } from './driving-mode-routing.module';\r\n\r\nimport { DrivingModePage } from './driving-mode.page';\r\nimport { TranslateModule, TranslateLoader } from '@ngx-translate/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { TranslateHttpLoader } from '@ngx-translate/http-loader';\r\nimport { LanguagePopoverPageModule } from '../language-popover/language-popover.module';\r\nimport { CallNumber } from '@ionic-native/call-number/ngx';\r\n\r\nexport function HttpLoaderFactory(http: HttpClient) {\r\n  return new TranslateHttpLoader(http);\r\n}\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    DrivingModePageRoutingModule,\r\n    TranslateModule.forChild({\r\n      loader: {\r\n        provide: TranslateLoader,\r\n        useFactory: HttpLoaderFactory,\r\n        deps: [HttpClient]\r\n      }\r\n    }),\r\n    LanguagePopoverPageModule,\r\n  ],\r\n  providers: [\r\n    CallNumber,\r\n  ],\r\n  declarations: [DrivingModePage]\r\n})\r\nexport class DrivingModePageModule {}\r\n"]}