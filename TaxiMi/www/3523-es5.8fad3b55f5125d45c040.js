!function(){function e(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function r(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function t(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(self.webpackChunkcsharpcornerauthor=self.webpackChunkcsharpcornerauthor||[]).push([[3523],{297:function(r,n,o){"use strict";o.d(n,{p:function(){return p}});var i=o(205),a=o(5304),s=o(3342),c=o(2340),u=o(3018),h=o(1841),d=o(728),p=function(){var r=function(){function r(t,n){e(this,r),this.http=t,this.sharedService=n,this.orders=[],this.completedOrder=!1}return t(r,[{key:"createOrder",value:function(e){var r=this.sharedService.headerGerneration();return this.http.post("".concat(c.N.apiUrl,"/api/order"),e,{headers:r,responseType:"text"}).pipe((0,a.K)(this.handleError))}},{key:"addToFavourites",value:function(e){var r=this.sharedService.headerGerneration();return this.http.post("".concat(c.N.apiUrl,"/api/order/favourites"),e,{headers:r,responseType:"text"}).pipe((0,a.K)(this.handleError))}},{key:"getMyFavourites",value:function(e){var r=this.sharedService.headerGerneration();return this.http.get("".concat(c.N.apiUrl,"/api/order/favourites/").concat(e),{headers:r}).pipe((0,a.K)(this.handleError))}},{key:"deleteFavouriteOrder",value:function(e){var r=this.sharedService.headerGerneration();return this.http.delete("".concat(c.N.apiUrl,"/api/order/favourites/").concat(e),{headers:r}).pipe((0,s.b)(function(e){return console.log("deleted favourite order: ",JSON.stringify(e))}),(0,a.K)(this.handleError))}},{key:"getDirections",value:function(e,r,t,n){var o=this.sharedService.headerGerneration();return this.http.post("https://maps.googleapis.com/maps/api/distancematrix/json?units=imperial&origins=".concat(e,",").concat(r,"&destinations=").concat(t,"%2C").concat(n,"%7C&key=AIzaSyAEvlXdM4joG4bNVT5l-tJSk9lUSGhxMNw"),{headers:o,responseType:"text"}).pipe((0,a.K)(this.handleError))}},{key:"getOrderById",value:function(e){var r=this,t=this.sharedService.headerGerneration();return this.http.get("".concat(c.N.apiUrl,"/api/order/id/").concat(e),{headers:t}).pipe((0,s.b)(function(e){return r.order=e}))}},{key:"getCanceledOrderById",value:function(e){var r=this,t=this.sharedService.headerGerneration();return this.http.get("".concat(c.N.apiUrl,"/api/order/canceled/").concat(e),{headers:t}).pipe((0,s.b)(function(e){return r.order=e}))}},{key:"getLastCompletedOrder",value:function(e){var r=this.sharedService.headerGerneration();return this.http.get("".concat(c.N.apiUrl,"/api/order/completed/").concat(e),{headers:r}).pipe((0,a.K)(this.handleError))}},{key:"getMyOrder",value:function(e){var r=this.sharedService.headerGerneration();return this.http.get("".concat(c.N.apiUrl,"/api/order/").concat(e),{headers:r}).pipe((0,a.K)(this.handleError))}},{key:"getOrderForChat",value:function(e){var r=this.sharedService.headerGerneration();return this.http.get("".concat(c.N.apiUrl,"/api/order/chat/").concat(e),{headers:r}).pipe((0,a.K)(this.handleError))}},{key:"getAllOrders",value:function(){var e=this.sharedService.headerGerneration();return this.http.get("".concat(c.N.apiUrl,"/api/order"),{headers:e}).pipe((0,a.K)(this.handleError))}},{key:"getNormalOrders",value:function(){var e=this.sharedService.headerGerneration();return this.http.get("".concat(c.N.apiUrl,"/api/order/normal"),{headers:e}).pipe((0,a.K)(this.handleError))}},{key:"getComfortOrders",value:function(){var e=this.sharedService.headerGerneration();return this.http.get("".concat(c.N.apiUrl,"/api/order/comfort"),{headers:e}).pipe((0,a.K)(this.handleError))}},{key:"acceptOrder",value:function(e,r){var t=this,n=this.sharedService.headerGerneration();return this.http.put("".concat(c.N.apiUrl,"/api/order/").concat(e,"/").concat(r),{headers:n,responseType:"json"}).pipe((0,s.b)(function(e){return t.driverId=r}),(0,a.K)(this.handleError))}},{key:"updateOrderEta",value:function(e,r){var t=this.sharedService.headerGerneration();return this.http.put("".concat(c.N.apiUrl,"/api/order/eta/").concat(e,"/").concat(r),{headers:t,responseType:"json"}).pipe((0,a.K)(this.handleError))}},{key:"updateDriverArrived",value:function(e){var r=this.sharedService.headerGerneration();return this.http.put("".concat(c.N.apiUrl,"/api/order/arrived/").concat(e),{headers:r,responseType:"json"}).pipe((0,a.K)(this.handleError))}},{key:"rateOrder",value:function(e){var r=this.sharedService.headerGerneration();return this.http.put("".concat(c.N.apiUrl,"/api/order/rate/").concat(e),{headers:r,responseType:"json"}).pipe((0,a.K)(this.handleError))}},{key:"increaseOrderPrice",value:function(e,r){var t=this.sharedService.headerGerneration();return this.http.put("".concat(c.N.apiUrl,"/api/order/increase/").concat(e,"/").concat(r),{headers:t,responseType:"json"}).pipe((0,a.K)(this.handleError))}},{key:"completeOrder",value:function(e){var r=this.sharedService.headerGerneration();return this.http.put("".concat(c.N.apiUrl,"/api/order/").concat(e),{headers:r,responseType:"json"}).pipe((0,a.K)(this.handleError))}},{key:"deleteOrder",value:function(e){var r=this.sharedService.headerGerneration();return this.http.delete("".concat(c.N.apiUrl,"/api/order/").concat(e),{headers:r}).pipe((0,s.b)(function(e){return console.log("deleted order: ",JSON.stringify(e))}),(0,a.K)(this.handleError))}},{key:"driverIncreaseOrderPrice",value:function(e,r,t){var n=this.sharedService.headerGerneration();return this.http.put("".concat(c.N.apiUrl,"/api/order/increased/").concat(e,"/").concat(r,"/").concat(t),{headers:n,responseType:"json"}).pipe((0,a.K)(this.handleError))}},{key:"resetIncreasing",value:function(e){var r=this.sharedService.headerGerneration();return this.http.put("".concat(c.N.apiUrl,"/api/order/reset/").concat(e),{headers:r,responseType:"json"}).pipe((0,a.K)(this.handleError))}},{key:"increasedOrderAccept",value:function(e,r){var t=this.sharedService.headerGerneration();return this.http.put("".concat(c.N.apiUrl,"/api/order/accepted/increase/").concat(e,"/").concat(r),{headers:t,responseType:"json"}).pipe((0,a.K)(this.handleError))}},{key:"incrementOrderPrice",value:function(e){var r=this.sharedService.headerGerneration();return this.http.put("".concat(c.N.apiUrl,"/api/order/increment/").concat(e),{headers:r,responseType:"json"}).pipe((0,a.K)(this.handleError))}},{key:"decrementOrderPrice",value:function(e){var r=this.sharedService.headerGerneration();return this.http.put("".concat(c.N.apiUrl,"/api/order/decrement/").concat(e),{headers:r,responseType:"json"}).pipe((0,a.K)(this.handleError))}},{key:"handleError",value:function(e){var r="";return e.error instanceof ErrorEvent?(console.log("Client side error."),r="Error: ".concat(e.error.message)):(console.log("Server side error."),r="Error Code: ".concat(e.status,"\nMessage: ").concat(e.message)),console.log(r),(0,i._)(r)}}]),r}();return r.\u0275fac=function(e){return new(e||r)(u.LFG(h.eN),u.LFG(d.F))},r.\u0275prov=u.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r}()},3523:function(r,n,o){"use strict";o.r(n),o.d(n,{FavouriteOrdersPageModule:function(){return U},HttpLoaderFactory:function(){return S}});var i=o(8583),a=o(3679),s=o(7823),c=o(4481),u=o(4762),h=o(4426),d=o(2340),p=o(6522),l=o(3018),v=o(297),f=o(5056),g=o(7800);function m(e,r){1&e&&(l.TgZ(0,"ion-text",10),l.TgZ(1,"h2",11),l._uU(2),l.ALo(3,"translate"),l.qZA(),l._UZ(4,"hr"),l.qZA()),2&e&&(l.xp6(2),l.hij("",l.lcZ(3,1,"You dont have saved trips"),"!"))}function y(e,r){if(1&e){var t=l.EpF();l.TgZ(0,"div",12),l.TgZ(1,"a",13),l.TgZ(2,"p",14),l._uU(3),l.ALo(4,"translate"),l.qZA(),l.TgZ(5,"p",14),l._uU(6),l.ALo(7,"translate"),l.qZA(),l.TgZ(8,"div",7),l.TgZ(9,"div",6),l.TgZ(10,"div",15),l.TgZ(11,"small"),l._uU(12),l.ALo(13,"translate"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(14,"div",16),l.TgZ(15,"small"),l._uU(16),l.ALo(17,"translate"),l.qZA(),l.qZA(),l._UZ(18,"hr"),l.qZA(),l.TgZ(19,"ion-toolbar",17),l.TgZ(20,"ion-buttons",0),l.TgZ(21,"ion-button",18),l.NdJ("click",function(){l.CHM(t);var e=r.$implicit;return l.oxw().useThis(e)}),l._uU(22),l.ALo(23,"translate"),l.qZA(),l.qZA(),l.TgZ(24,"ion-buttons",1),l.TgZ(25,"ion-button",19),l.NdJ("click",function(){l.CHM(t);var e=r.$implicit;return l.oxw().remove(e.id)}),l._uU(26),l.ALo(27,"translate"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&e){var n=r.$implicit;l.xp6(3),l.AsE("",l.lcZ(4,10,"Location"),": ",n.location,""),l.xp6(3),l.AsE("",l.lcZ(7,12,"Destination"),": ",n.destination,""),l.xp6(6),l.AsE("",l.lcZ(13,14,"Trip distance"),": ",n.tripDistance," km"),l.xp6(4),l.AsE("",l.lcZ(17,16,"Total cost"),": ",n.totalPrice," \u043b\u0432."),l.xp6(6),l.Oqu(l.lcZ(23,18,"Use this trip")),l.xp6(4),l.Oqu(l.lcZ(27,20,"Delete"))}}var Z,k=[{path:"",component:(Z=function(){function r(t,n,o,i,a,s){e(this,r),this.orderService=t,this.accountService=n,this.alertController=o,this.route=i,this.translate=a,this.popoverController=s,this.favourites=[],this.subscriptions=[],this.translate.setDefaultLang(this.accountService.userValue.choosenLanguage)}return t(r,[{key:"ngOnInit",value:function(){var e=this;this.getMyOrders();var r=(new h.su).configureLogging(h.in.Information).withUrl("".concat(d.N.signalRUrl,"/orderHub")).build();r.start().then(function(){console.log("signalR Connected in travelling")}).catch(function(e){return console.log(e.toString())}),r.on("BroadcastMessage",function(){e.getMyOrders()})}},{key:"getMyOrders",value:function(){var e=this;this.subscriptions.push(this.orderService.getMyFavourites(this.accountService.userValue.id).subscribe(function(r){e.favourites=r}))}},{key:"useThis",value:function(e){this.orderService.selectedFavourite=e,this.route.navigate(["menu/travelling"])}},{key:"remove",value:function(e){this.deleteConfirmation(e)}},{key:"openLanguagePopover",value:function(e){return(0,u.mG)(this,void 0,void 0,regeneratorRuntime.mark(function r(){var t;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.popoverController.create({component:p.m,event:e});case 2:return t=r.sent,r.next=5,t.present();case 5:case"end":return r.stop()}},r,this)}))}},{key:"deleteConfirmation",value:function(e){return(0,u.mG)(this,void 0,void 0,regeneratorRuntime.mark(function r(){var t=this;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:this.translate.get(["Delete from favourites?","Yes","No"]).subscribe(function(r){return(0,u.mG)(t,void 0,void 0,regeneratorRuntime.mark(function t(){var n,o=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.alertController.create({header:r["Delete from favourites?"],buttons:[{text:r.Yes,handler:function(){o.subscriptions.push(o.orderService.deleteFavouriteOrder(e).subscribe(function(e){o.successDeletedFavourite()}))}},{text:r.No}]});case 2:return n=t.sent,t.next=5,n.present();case 5:case"end":return t.stop()}},t,this)}))});case 1:case"end":return r.stop()}},r,this)}))}},{key:"successDeletedFavourite",value:function(){return(0,u.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.translate.get(["Successfully removed the trip!"]).subscribe(function(e){return(0,u.mG)(r,void 0,void 0,regeneratorRuntime.mark(function r(){var t;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.alertController.create({header:e["Successfully removed the trip!"],buttons:[{text:"Ok"}]});case 2:return t=r.sent,r.next=5,t.present();case 5:case"end":return r.stop()}},r,this)}))});case 1:case"end":return e.stop()}},e,this)}))}}]),r}(),Z.\u0275fac=function(e){return new(e||Z)(l.Y36(v.p),l.Y36(f.B),l.Y36(s.Br),l.Y36(c.F0),l.Y36(g.sK),l.Y36(s.Dh))},Z.\u0275cmp=l.Xpm({type:Z,selectors:[["app-favourite-orders"]],decls:17,vars:5,consts:[["slot","start"],["slot","end"],["id","toolbarIcon","name","language-outline",3,"click"],["padding","",1,"background"],["class","centered","color","dark",4,"ngIf"],[1,"row","mt-2"],[1,"col"],[1,"row"],[1,"col-md-10"],["class","list-group mt-2",4,"ngFor","ngForOf"],["color","dark",1,"centered"],[1,"fonted","mt-2"],[1,"list-group","mt-2"],[1,"text","list-group-item","list-group-item-action","flex-column","align-items-start"],[1,"mb-1","fonted"],[1,"d-flex","w-100","justify-content-between"],[1,"col-md-12"],["color","light"],["type","submit","color","dark",1,"fonted",3,"click"],["type","submit","color","danger",1,"fonted",3,"click"]],template:function(e,r){1&e&&(l.TgZ(0,"ion-header"),l.TgZ(1,"ion-toolbar"),l.TgZ(2,"ion-buttons",0),l._UZ(3,"ion-menu-button"),l.qZA(),l.TgZ(4,"ion-title"),l.TgZ(5,"ion-label"),l._uU(6),l.ALo(7,"translate"),l.qZA(),l.qZA(),l.TgZ(8,"ion-buttons",1),l.TgZ(9,"ion-icon",2),l.NdJ("click",function(e){return r.openLanguagePopover(e)}),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(10,"ion-content",3),l.YNc(11,m,5,3,"ion-text",4),l.TgZ(12,"div",5),l.TgZ(13,"div",6),l.TgZ(14,"div",7),l.TgZ(15,"div",8),l.YNc(16,y,28,22,"div",9),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&e&&(l.xp6(6),l.Oqu(l.lcZ(7,3,"Favourites")),l.xp6(5),l.Q6J("ngIf",0==r.favourites.length),l.xp6(5),l.Q6J("ngForOf",r.favourites))},directives:[s.Gu,s.sr,s.Sm,s.fG,s.wd,s.Q$,s.gu,s.W2,i.O5,i.sg,s.yW,s.YG],pipes:[g.X$],styles:["ion-content[_ngcontent-%COMP%]{--ion-background-color:#e9e9e9}ion-toolbar[_ngcontent-%COMP%]{--ion-background-color:#eee}.noScroll[_ngcontent-%COMP%]{overflow:hidden}#map[_ngcontent-%COMP%]{height:100%;width:100%}ion-title[_ngcontent-%COMP%]{text-align:center}#toolbarIcon[_ngcontent-%COMP%]{font-size:1.7em}.fonted[_ngcontent-%COMP%]{font-family:Open Sans Light}.centered[_ngcontent-%COMP%]{text-align:center}hr[_ngcontent-%COMP%]{background:#eee;width:70%!important}"]}),Z)}],T=function(){var r=function r(){e(this,r)};return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=l.oAB({type:r}),r.\u0275inj=l.cJS({imports:[[c.Bz.forChild(k)],c.Bz]}),r}(),b=o(1841),A=o(2472),O=o(3577);function S(e){return new A.w(e)}var N,U=((N=function r(){e(this,r)}).\u0275fac=function(e){return new(e||N)},N.\u0275mod=l.oAB({type:N}),N.\u0275inj=l.cJS({imports:[[i.ez,a.u5,s.Pc,T,g.aw.forChild({loader:{provide:g.Zw,useFactory:S,deps:[b.eN]}}),O.LanguagePopoverPageModule]]}),N)}}])}();