{"version":3,"sources":["webpack:///src/app/travel-mode/travel-mode-routing.module.ts","webpack:///src/app/travel-mode/travel-mode.page.scss","webpack:///src/app/travel-mode/travel-mode.page.html","webpack:///src/app/travel-mode/travel-mode.page.ts","webpack:///src/app/travel-mode/travel-mode.module.ts"],"names":["routes","path","component","TravelModePageRoutingModule","imports","forChild","exports","TravelModePage","route","orderService","accountService","tripService","driverService","localNotifications","alertController","chatService","translate","popoverController","callNumber","user","userValue","driverId","carModel","carColor","firstName","lastName","messages","chatStyle","subscriptions","maxTime","msgDto","msgInboxArray","setDefaultLang","choosenLanguage","stop","start","checkorder","retrieveMappedObject","subscribe","receivedObj","addToInbox","connection","configureLogging","Information","withUrl","signalRUrl","build","then","console","log","err","setTimeout","on","orderId","push","getOrderById","order","id","status","presentOrderAcceptedNotification","getMyOrder","canceledOrder","x","getDriver","driver","loadMap","mapRef","applicationUserId","isDriverArrived","presentDriverArrivedNotification","alertTriggered","updateAlert","timer","Date","seconds","startTimer","completedOrderAlert","data","totalPrice","orderStatus","orderAcceptedBy","acceptedBy","currentOrderId","location","destination","Math","round","orderTotalPrice","toFixed","estimatedDuration","eta","getUserById","getAcceptedTrip","error","sec","startTime","setInterval","secsDiff","increaseOrderPrice","getTime","floor","get","text","schedule","title","secret","document","getElementById","style","display","length","window","alert","broadcastMessage","obj","newObj","getById","userData","phoneNumber","phone","getDriverActiveCar","car","model","color","toString","res","userId","getTrip","tripStatus","currentTrip","locationLat","locationLong","destinationLat","destinationLong","addToFavourites","successAddedFavourite","driverLatLng","lat","currentLocationLat","lng","currentLocationLong","options","center","google","maps","LatLng","zoom","disableDefaultUI","map","Map","nativeElement","icon","url","scaledSize","Size","anchor","y","marker","Marker","position","alertForCancel","create","header","message","buttons","handler","trip","cancelTrip","updateDriving","isDrivingNow","deleteOrder","navigate","popup","present","ev","event","popover","cssClass","role","voteUp","voteDown","read","selector","template","HttpLoaderFactory","http","TravelModePageModule","loader","provide","useFactory","deps","providers","declarations"],"mappings":"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","file":"travel-mode-travel-mode-module-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { TravelModePage } from './travel-mode.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: TravelModePage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class TravelModePageRoutingModule {}\r\n","export default \"ion-content {\\n  --ion-background-color:#353535;\\n}\\n\\nion-toolbar {\\n  --ion-background-color:#eeeeee;\\n}\\n\\nion-title {\\n  text-align: center;\\n}\\n\\n#marker {\\n  position: absolute;\\n  /*url of the marker*/\\n  background: url(http://maps.gstatic.com/mapfiles/markers2/marker.png) no-repeat;\\n  /*center the marker*/\\n  top: 50%;\\n  left: 50%;\\n  z-index: 1;\\n  /*fix offset when needed*/\\n  margin-left: -10px;\\n  margin-top: -34px;\\n  /*size of the image*/\\n  height: 34px;\\n  width: 20px;\\n  cursor: pointer;\\n}\\n\\n#map {\\n  height: 100%;\\n  width: 100%;\\n}\\n\\n#toolbarIcon {\\n  font-size: 1.7em;\\n}\\n\\n.centered {\\n  text-align: center;\\n}\\n\\n.textTravel {\\n  font-size: 1.5em;\\n  font-family: Open Sans Light;\\n}\\n\\n.text {\\n  font-size: 2.4em;\\n  font-family: Open Sans Light;\\n}\\n\\ni {\\n  color: #eeeeee;\\n}\\n\\n.my-custom-class {\\n  --background: #e5e5e5;\\n}\\n\\n.checkbox-icon {\\n  color: white;\\n}\\n\\nion-checkbox {\\n  --border-color: #FFFFFF;\\n}\\n\\nion-select {\\n  color: #383838;\\n  background-color: white;\\n  border-radius: 10px;\\n  border: 3px solid #eeeeee;\\n}\\n\\n.blink_me {\\n  -webkit-animation: blinker 1s linear infinite;\\n          animation: blinker 1s linear infinite;\\n}\\n\\n@-webkit-keyframes blinker {\\n  50% {\\n    opacity: 0;\\n  }\\n}\\n\\n@keyframes blinker {\\n  50% {\\n    opacity: 0;\\n  }\\n}\\n\\n.backIcon {\\n  color: #ffae00;\\n  font-size: 150%;\\n}\\n\\n.back {\\n  color: #ffae00;\\n}\\n\\n.fonted {\\n  font-family: Open Sans Light;\\n}\\n\\n.msg-box {\\n  width: 100%;\\n  height: 140px;\\n  padding: 10px 30px;\\n  font-size: 14px;\\n  font-family: Open Sans Light;\\n  overflow: auto;\\n}\\n\\n.msg-box ul {\\n  margin: -5px;\\n  list-style: none;\\n}\\n\\n.msg-box ul .ex-msg {\\n  text-align: right;\\n}\\n\\n.msg-box ul .in-msg {\\n  text-align: left;\\n  margin-left: -60px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uXFwuLlxcLi5cXHRyYXZlbC1tb2RlLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUVJLDhCQUFBO0FBQUo7O0FBR0E7RUFDSSw4QkFBQTtBQUFKOztBQUdBO0VBQ0ksa0JBQUE7QUFBSjs7QUFHSTtFQUNJLGtCQUFBO0VBQ0Esb0JBQUE7RUFDQSwrRUFBQTtFQUNBLG9CQUFBO0VBQ0EsUUFBQTtFQUFRLFNBQUE7RUFFUixVQUFBO0VBQ0EseUJBQUE7RUFDQSxrQkFBQTtFQUNBLGlCQUFBO0VBQ0Esb0JBQUE7RUFDQSxZQUFBO0VBQ0EsV0FBQTtFQUVBLGVBQUE7QUFEUjs7QUFJSTtFQUNBLFlBQUE7RUFDQSxXQUFBO0FBREo7O0FBSUE7RUFDSSxnQkFBQTtBQURKOztBQUtBO0VBQ0ksa0JBQUE7QUFGSjs7QUFLQTtFQUNJLGdCQUFBO0VBQ0EsNEJBQUE7QUFGSjs7QUFLQTtFQUNJLGdCQUFBO0VBQ0EsNEJBQUE7QUFGSjs7QUFNQTtFQUNJLGNBQUE7QUFISjs7QUFPQTtFQUNJLHFCQUFBO0FBSko7O0FBT0M7RUFDSSxZQUFBO0FBSkw7O0FBT0M7RUFDSSx1QkFBQTtBQUpMOztBQU9BO0VBQ0ksY0FBQTtFQUNBLHVCQUFBO0VBQ0EsbUJBQUE7RUFDQSx5QkFBQTtBQUpKOztBQU9BO0VBQ0ksNkNBQUE7VUFBQSxxQ0FBQTtBQUpKOztBQU9FO0VBQ0U7SUFDRSxVQUFBO0VBSko7QUFDRjs7QUFDRTtFQUNFO0lBQ0UsVUFBQTtFQUpKO0FBQ0Y7O0FBT0E7RUFDSSxjQUFBO0VBQ0EsZUFBQTtBQUxKOztBQVFBO0VBQ0ksY0FBQTtBQUxKOztBQVFBO0VBQ0ksNEJBQUE7QUFMSjs7QUFTQTtFQUNJLFdBQUE7RUFDQSxhQUFBO0VBQ0Esa0JBQUE7RUFDQSxlQUFBO0VBQ0EsNEJBQUE7RUFDQSxjQUFBO0FBTko7O0FBUUk7RUFDSSxZQUFBO0VBRUEsZ0JBQUE7QUFQUjs7QUFRUTtFQUNJLGlCQUFBO0FBTlo7O0FBU1E7RUFDSSxnQkFBQTtFQUNBLGtCQUFBO0FBUFoiLCJmaWxlIjoidHJhdmVsLW1vZGUucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiaW9uLWNvbnRlbnR7XHJcbiAgICAvLy0tYmFja2dyb3VuZDogdXJsKC4uLy4uL2Fzc2V0cy93cDQ3OTI3ODAtZGFyay1waG9uZS13YWxscGFwZXJzLmpwZykgMCAwLzEwMCUgMTAwJSBuby1yZXBlYXQ7XHJcbiAgICAtLWlvbi1iYWNrZ3JvdW5kLWNvbG9yOiMzNTM1MzU7XHJcbn1cclxuXHJcbmlvbi10b29sYmFye1xyXG4gICAgLS1pb24tYmFja2dyb3VuZC1jb2xvcjojZWVlZWVlO1xyXG59XHJcblxyXG5pb24tdGl0bGUge1xyXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG59XHJcblxyXG4gICAgI21hcmtlcntcclxuICAgICAgICBwb3NpdGlvbjphYnNvbHV0ZTtcclxuICAgICAgICAvKnVybCBvZiB0aGUgbWFya2VyKi9cclxuICAgICAgICBiYWNrZ3JvdW5kOnVybChodHRwOi8vbWFwcy5nc3RhdGljLmNvbS9tYXBmaWxlcy9tYXJrZXJzMi9tYXJrZXIucG5nKSBuby1yZXBlYXQ7XHJcbiAgICAgICAgLypjZW50ZXIgdGhlIG1hcmtlciovXHJcbiAgICAgICAgdG9wOjUwJTtsZWZ0OjUwJTtcclxuICAgICAgXHJcbiAgICAgICAgei1pbmRleDoxO1xyXG4gICAgICAgIC8qZml4IG9mZnNldCB3aGVuIG5lZWRlZCovXHJcbiAgICAgICAgbWFyZ2luLWxlZnQ6LTEwcHg7XHJcbiAgICAgICAgbWFyZ2luLXRvcDotMzRweDtcclxuICAgICAgICAvKnNpemUgb2YgdGhlIGltYWdlKi9cclxuICAgICAgICBoZWlnaHQ6MzRweDtcclxuICAgICAgICB3aWR0aDoyMHB4O1xyXG4gICAgICBcclxuICAgICAgICBjdXJzb3I6cG9pbnRlcjtcclxuICAgICAgfVxyXG4gICAgXHJcbiAgICAjbWFwIHtcclxuICAgIGhlaWdodDogMTAwJTtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgfVxyXG5cclxuI3Rvb2xiYXJJY29ue1xyXG4gICAgZm9udC1zaXplOiAxLjdlbTtcclxufVxyXG5cclxuXHJcbi5jZW50ZXJlZHtcclxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxufVxyXG5cclxuLnRleHRUcmF2ZWx7XHJcbiAgICBmb250LXNpemU6IDEuNWVtO1xyXG4gICAgZm9udC1mYW1pbHk6IE9wZW4gU2FucyBMaWdodDtcclxufVxyXG5cclxuLnRleHR7ICBcclxuICAgIGZvbnQtc2l6ZTogMi40ZW07XHJcbiAgICBmb250LWZhbWlseTogT3BlbiBTYW5zIExpZ2h0O1xyXG59XHJcblxyXG5cclxuaXtcclxuICAgIGNvbG9yOiNlZWVlZWU7XHJcbn1cclxuXHJcblxyXG4ubXktY3VzdG9tLWNsYXNzIHtcclxuICAgIC0tYmFja2dyb3VuZDogI2U1ZTVlNTtcclxuICB9XHJcblxyXG4gLmNoZWNrYm94LWljb257XHJcbiAgICAgY29sb3I6d2hpdGU7XHJcbiB9XHJcblxyXG4gaW9uLWNoZWNrYm94e1xyXG4gICAgIC0tYm9yZGVyLWNvbG9yOiAjRkZGRkZGO1xyXG4gICB9XHJcblxyXG5pb24tc2VsZWN0e1xyXG4gICAgY29sb3I6IHJnYig1NiwgNTYsIDU2KTtcclxuICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xyXG4gICAgYm9yZGVyLXJhZGl1czogMTBweDtcclxuICAgIGJvcmRlcjogM3B4IHNvbGlkICNlZWVlZWU7XHJcbn1cclxuXHJcbi5ibGlua19tZSB7XHJcbiAgICBhbmltYXRpb246IGJsaW5rZXIgMXMgbGluZWFyIGluZmluaXRlO1xyXG4gIH1cclxuICBcclxuICBAa2V5ZnJhbWVzIGJsaW5rZXIge1xyXG4gICAgNTAlIHtcclxuICAgICAgb3BhY2l0eTogMDtcclxuICAgIH1cclxuICB9XHJcblxyXG4uYmFja0ljb24ge1xyXG4gICAgY29sb3I6IHJnYigyNTUsIDE3NCwgMCk7XHJcbiAgICBmb250LXNpemU6IDE1MCU7XHJcbn1cclxuXHJcbi5iYWNrIHtcclxuICAgIGNvbG9yOiByZ2IoMjU1LCAxNzQsIDApO1xyXG59XHJcblxyXG4uZm9udGVke1xyXG4gICAgZm9udC1mYW1pbHk6IE9wZW4gU2FucyBMaWdodDtcclxufVxyXG5cclxuXHJcbi5tc2ctYm94IHtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgaGVpZ2h0OiAxNDBweDtcclxuICAgIHBhZGRpbmc6IDEwcHggMzBweDtcclxuICAgIGZvbnQtc2l6ZTogMTRweDtcclxuICAgIGZvbnQtZmFtaWx5OiBPcGVuIFNhbnMgTGlnaHQ7XHJcbiAgICBvdmVyZmxvdzogYXV0bztcclxuXHJcbiAgICB1bCB7XHJcbiAgICAgICAgbWFyZ2luOiAtNXB4O1xyXG5cclxuICAgICAgICBsaXN0LXN0eWxlOiBub25lO1xyXG4gICAgICAgIC5leC1tc2cge1xyXG4gICAgICAgICAgICB0ZXh0LWFsaWduOiByaWdodDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC5pbi1tc2cge1xyXG4gICAgICAgICAgICB0ZXh0LWFsaWduOiBsZWZ0O1xyXG4gICAgICAgICAgICBtYXJnaW4tbGVmdDogLTYwcHg7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbn1cclxuXHJcblxyXG5cclxuIl19 */\";","export default \"<ion-content>\\r\\n  <ion-header>\\r\\n    <ion-toolbar>\\r\\n      <ion-buttons slot=\\\"start\\\">\\r\\n        <ion-menu-button></ion-menu-button>\\r\\n      </ion-buttons>\\r\\n\\r\\n\\r\\n      <ion-title>\\r\\n        <ion-label class=\\\"blink_me\\\">{{'Waiting for the car'| translate}}</ion-label>\\r\\n      </ion-title>\\r\\n\\r\\n      <ion-buttons slot=\\\"end\\\">\\r\\n        <ion-icon (click)='openLanguagePopover($event)' id=\\\"toolbarIcon\\\" name=\\\"language-outline\\\"></ion-icon>\\r\\n      </ion-buttons>\\r\\n    </ion-toolbar>\\r\\n  </ion-header>\\r\\n  <div #map id=\\\"map\\\"></div>\\r\\n</ion-content>\\r\\n\\r\\n<ion-footer>\\r\\n\\r\\n  <div class=\\\"row\\\">\\r\\n    <div class=\\\"col\\\">\\r\\n      <div class=\\\"list-group\\\">\\r\\n\\r\\n        <a class=\\\"list-group-item list-group-item-action flex-column align-items-start\\\">\\r\\n          <p>{{firstName}} {{lastName}} {{'will arrive with' | translate}} {{carColor}}\\r\\n            {{carModel}} {{'in about'| translate}} {{estimatedDuration}}.</p>\\r\\n          <hr />\\r\\n          <p>\\r\\n            <ion-icon class=\\\"mr-2\\\" name=\\\"analytics-outline\\\"></ion-icon>{{destination}}\\r\\n          </p>\\r\\n          <hr />\\r\\n          <div class=\\\"d-flex w-100 justify-content-between\\\">\\r\\n            <p *ngIf=\\\"this.accountService.userValue.alertTriggered == true\\\">\\r\\n              {{'Price' | translate}}: {{totalPrice}} лв. | {{secsDiff * 1000 | date:'mm:ss' }}\\r\\n            </p>\\r\\n            <p *ngIf=\\\"this.accountService.userValue.alertTriggered == false\\\">\\r\\n              {{'Price' | translate}}: {{totalPrice}} лв.\\r\\n            </p>\\r\\n            <button (click)=\\\"callDriver()\\\" class=\\\"fonted btn btn-warning mb-1\\\" (click)=\\\"clearMessages()\\\" type=\\\"button\\\"><ion-icon name=\\\"call\\\" class=\\\"mr-2\\\"></ion-icon>{{'Call driver' | translate}}\\r\\n            </button>\\r\\n            \\r\\n          </div>\\r\\n          \\r\\n          <div class=\\\"d-flex w-100 justify-content-between\\\">\\r\\n            <button (click)=\\\"chat()\\\" class=\\\"fonted btn btn-secondary mr-1\\\" (click)=\\\"clearMessages()\\\" type=\\\"button\\\">\\r\\n              {{'Chat' | translate}}\\r\\n            </button>\\r\\n\\r\\n            <button class=\\\"fonted btn btn-info\\\" (click)=\\\"addToFavourite()\\\" type=\\\"button\\\">\\r\\n              {{'Add to favourites' | translate}}\\r\\n            </button>\\r\\n\\r\\n            <button *ngIf=\\\"this.tripStatus == 'Processing'\\\" (click)=\\\"cancelTrip()\\\" class=\\\"fonted btn btn-warning ml-1\\\" type=\\\"button\\\">\\r\\n              {{'Cancel' | translate}}\\r\\n            </button>\\r\\n          </div>\\r\\n          <br />\\r\\n          <ion-label class=\\\"blink_me fonted\\\" *ngIf=\\\"messages.length != 0  && chatStyle == 'none'\\\">\\r\\n            {{\\r\\n            'You have new message' |\\r\\n            translate\\r\\n            }}.\\r\\n          </ion-label>\\r\\n          <div id=\\\"chat\\\" style=\\\"display: none;\\\" class=\\\"row chat\\\">\\r\\n\\r\\n            <div class=\\\"col\\\">\\r\\n              <ion-card>\\r\\n        \\r\\n                <div class=\\\"msg-box\\\">\\r\\n                  <ul *ngIf=\\\"this.msgInboxArray.length == 0\\\" class=\\\"text-center mr-5\\\">\\r\\n                    <li class=\\\"fonted\\\">{{'No messages for now' | translate}}</li>\\r\\n                  </ul>\\r\\n                  <ul *ngFor=\\\"let mObj of msgInboxArray\\\">\\r\\n                    <li class=\\\"fonted\\\" [ngClass]=\\\"mObj.user === msgDto.user ? 'in-msg' : 'ex-msg'\\\">\\r\\n                      {{mObj.user}}:\\r\\n                      {{mObj.text}}\\r\\n                    </li>\\r\\n        \\r\\n                  </ul>\\r\\n                </div>\\r\\n              </ion-card>\\r\\n        \\r\\n              <ion-card class=\\\"type\\\">\\r\\n                <ion-item>\\r\\n                  <ion-input [(ngModel)]=\\\"msgDto.text\\\" [placeholder]='\\\"Type your message...\\\" | translate'>\\r\\n        \\r\\n                  </ion-input>\\r\\n                  <ion-icon (click)=\\\"send()\\\" name=\\\"send-outline\\\"></ion-icon>\\r\\n        \\r\\n                </ion-item>\\r\\n              </ion-card>\\r\\n            </div>\\r\\n        \\r\\n          </div>\\r\\n        </a>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n  <!-- <ion-text class=\\\"textTravel\\\">\\r\\n      {{'Your driver' | translate}} {{firstName}} {{lastName}} {{'will arrive with' | translate}} {{carColor}}\\r\\n      {{carModel}} {{'in about'| translate}} {{estimatedDuration}}\\r\\n      <p>\\r\\n        <small>Price: {{totalPrice}}$</small>\\r\\n        <br>\\r\\n        <small *ngIf=\\\"this.accountService.userValue.alertTriggered == true\\\">Free waiting time is 5 mins.</small>\\r\\n        <br>\\r\\n        <small *ngIf=\\\"this.accountService.userValue.alertTriggered == true\\\">{{secsDiff * 1000 | date:'mm:ss' }}</small>\\r\\n\\r\\n      </p>\\r\\n\\r\\n    </ion-text> -->\\r\\n</ion-footer>\\r\\n\\r\\n<!-- <ion-footer class=\\\"ion-no-border\\\">\\r\\n  <ion-toolbar class=\\\"text-center\\\">\\r\\n    <ion-title class=\\\"fonted\\\">{{'Your destination' | translate}}</ion-title>\\r\\n    <ion-label class=\\\"fonted\\\">{{destination}}</ion-label>\\r\\n    <ion-toolbar class=\\\"text-center\\\">\\r\\n        <button class=\\\"fonted btn btn-info\\\" (click)=\\\"addToFavourite()\\\" type=\\\"button\\\">\\r\\n            {{'Add to favourites' | translate}}\\r\\n        </button>\\r\\n        <button (click)=\\\"chat()\\\" class=\\\"fonted btn btn-secondary ml-1\\\" (click)=\\\"clearMessages()\\\" type=\\\"button\\\">\\r\\n            {{'Chat' | translate}}\\r\\n        </button>\\r\\n\\r\\n        <button (click)=\\\"cancelTrip()\\\" class=\\\"fonted btn btn-warning ml-1\\\" type=\\\"button\\\">\\r\\n            {{'Cancel' | translate}}\\r\\n        </button>\\r\\n        <br />\\r\\n        <ion-label class=\\\"blink_me fonted\\\" *ngIf=\\\"messages.length != 0  && chatStyle == 'none'\\\">\\r\\n            {{\\r\\n'You have new message' |\\r\\n        translate\\r\\n            }}.\\r\\n        </ion-label>\\r\\n    </ion-toolbar>\\r\\n\\r\\n  </ion-toolbar>\\r\\n\\r\\n  <div id=\\\"chat\\\" style=\\\"display: none;\\\" class=\\\"row chat\\\">\\r\\n\\r\\n    <div class=\\\"col\\\">\\r\\n      <ion-card>\\r\\n\\r\\n        <div class=\\\"msg-box\\\">\\r\\n          <ul *ngIf=\\\"this.msgInboxArray.length == 0\\\" class=\\\"text-center mr-5\\\">\\r\\n            <li class=\\\"fonted\\\">{{'No messages for now' | translate}}</li>\\r\\n          </ul>\\r\\n          <ul *ngFor=\\\"let mObj of msgInboxArray\\\">\\r\\n            <li class=\\\"fonted\\\" [ngClass]=\\\"mObj.user === msgDto.user ? 'in-msg' : 'ex-msg'\\\">\\r\\n              {{mObj.user}}:\\r\\n              {{mObj.text}}\\r\\n            </li>\\r\\n\\r\\n          </ul>\\r\\n        </div>\\r\\n      </ion-card>\\r\\n\\r\\n      <ion-card class=\\\"type\\\">\\r\\n        <ion-item>\\r\\n          <ion-input [(ngModel)]=\\\"msgDto.text\\\" [placeholder]='\\\"Type your message...\\\" | translate'>\\r\\n\\r\\n          </ion-input>\\r\\n          <ion-icon (click)=\\\"send()\\\" name=\\\"send-outline\\\"></ion-icon>\\r\\n\\r\\n        </ion-item>\\r\\n      </ion-card>\\r\\n    </div>\\r\\n\\r\\n  </div>\\r\\n</ion-footer> -->\";","import { Component, ElementRef, OnDestroy, OnInit, ViewChild } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport * as signalR from '@aspnet/signalr';\r\nimport { Plugins } from '@capacitor/core';\r\nimport { AlertController, PopoverController } from '@ionic/angular';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { Subscription } from 'rxjs';\r\nimport { environment } from 'src/environments/environment';\r\nimport { Message, Order, Trip } from 'src/_models';\r\nimport { AccountService } from 'src/_services';\r\nimport { ChatService } from 'src/_services/chat/chat.service';\r\nimport { DriverService } from 'src/_services/driver/driver.service';\r\nimport { OrderService } from 'src/_services/order/order.service';\r\nimport { TripService } from 'src/_services/trip/trip.service';\r\nimport { LanguagePopoverPage } from '../language-popover/language-popover.page';\r\nimport { CallNumber } from '@ionic-native/call-number/ngx';\r\nimport { LocalNotifications } from '@ionic-native/local-notifications/ngx';\r\n\r\ndeclare var google: any;\r\n\r\n@Component({\r\n  selector: 'app-travel-mode',\r\n  templateUrl: './travel-mode.page.html',\r\n  styleUrls: ['./travel-mode.page.scss'],\r\n})\r\nexport class TravelModePage implements OnInit {\r\n  public currentTrip: Trip;\r\n  private user = this.accountService.userValue;\r\n  private driverId = this.accountService.userValue.driverId;\r\n  private orderAcceptedBy: any;\r\n  isLoggedIn;\r\n  order: Order;\r\n  orderStatus: string;\r\n  tripStatus: string;\r\n  orderTotalPrice: any;\r\n  estimatedDuration: any;\r\n  //Car html properties;\r\n  carModel = \"\";\r\n  carColor = \"\";\r\n\r\n  //User html properties\r\n  firstName = \"\";\r\n  lastName = \"\";\r\n  phoneNumber: any;\r\n\r\n  location: string;\r\n  destination: string;\r\n  totalPrice: any;\r\n  messages = this.chatService.messages;\r\n  chatStyle = \"\";\r\n  isDriverArrived: any;\r\n  private subscriptions: Subscription[] = [];\r\n  maxTime: any = 30000;\r\n  startTime: any;\r\n  timer: any;\r\n  hidevalue: any;\r\n  minutes: any;\r\n  secsDiff: any;\r\n  seconds: any;\r\n  map: any;\r\n  @ViewChild('map', { read: ElementRef, static: false }) mapRef: ElementRef;\r\n\r\n  constructor(private route: Router,\r\n    private orderService: OrderService,\r\n    public accountService: AccountService,\r\n    private tripService: TripService,\r\n    private driverService: DriverService,\r\n    private localNotifications: LocalNotifications,\r\n    private alertController: AlertController,\r\n    private chatService: ChatService,\r\n    private translate: TranslateService,\r\n    private popoverController: PopoverController,\r\n    private callNumber: CallNumber) {\r\n    this.translate.setDefaultLang(this.accountService.userValue.choosenLanguage);\r\n  }\r\n\r\n\r\n  ngOnInit() {\r\n    this.chatService.stop();\r\n    this.chatService.start();\r\n    this.checkorder();\r\n    this.chatService.retrieveMappedObject()\r\n      .subscribe((receivedObj: Message) => { this.addToInbox(receivedObj); });\r\n\r\n    const connection = new signalR.HubConnectionBuilder()\r\n      .configureLogging(signalR.LogLevel.Information)\r\n      .withUrl(`${environment.signalRUrl}/orderHub`)\r\n      .build();\r\n\r\n    connection.start().then(function () {\r\n      console.log('signalR Connected in travel-mode');\r\n    }).catch(function (err) {\r\n      console.log(\"Reconnecting in 1 sec.\");\r\n      setTimeout(() => connection.start(), 1000);\r\n    });\r\n\r\n    connection.on('BroadcastMessage', () => {\r\n      this.checkorder();\r\n\r\n    });\r\n\r\n    connection.on('StartTrip', () => {\r\n      this.checkorder();\r\n    });\r\n\r\n    connection.on('Navigate', () => {\r\n      this.checkorder();\r\n    });\r\n\r\n    connection.on('OrderAccepted', (orderId: string) => {\r\n      this.subscriptions.push(this.orderService.getOrderById(orderId)\r\n        .subscribe(order => {\r\n          if (order.id == this.order.id && order.status == 'Accepted') {\r\n            this.presentOrderAcceptedNotification();\r\n          }\r\n        }))\r\n    });\r\n\r\n    connection.on('OrderWaiting', (orderId) => {\r\n      this.subscriptions.push(this.orderService.getMyOrder(this.user.id)\r\n        .subscribe(order => {\r\n          if (order.id == orderId) {\r\n            this.canceledOrder();\r\n          }\r\n        }))\r\n    });\r\n\r\n    connection.on('LocateDriver', (driverId) => {\r\n      this.subscriptions.push(this.orderService.getMyOrder(this.user.id)\r\n        .subscribe(x => {\r\n          this.subscriptions.push(this.driverService.getDriver(driverId)\r\n            .subscribe(driver => {\r\n              if (driver.id == driverId) {\r\n                this.loadMap(this.mapRef, driver.applicationUserId);\r\n              }\r\n            }))\r\n        }))\r\n    });\r\n\r\n    connection.on('NotifyArrived', (orderId: string) => {\r\n      this.subscriptions.push(this.orderService.getOrderById(orderId)\r\n        .subscribe(order => {\r\n          if (order.isDriverArrived == true && this.order.id == orderId) {\r\n            this.presentDriverArrivedNotification();\r\n            this.accountService.userValue.alertTriggered = true;\r\n            this.subscriptions.push(this.accountService.updateAlert(this.user.id, true)\r\n              .subscribe(() => { }));\r\n\r\n            this.accountService.userValue.timer = new Date();\r\n            if (this.seconds == 60) {\r\n              this.seconds = 0;\r\n            }\r\n            this.startTimer();\r\n          }\r\n        }))\r\n    });\r\n\r\n\r\n    connection.on('CompleteOrder', (orderId: string) => {\r\n      if (this.order.id == orderId) {\r\n        this.accountService.userValue.alertTriggered = false;\r\n        this.subscriptions.push(this.accountService.updateAlert(this.user.id, false)\r\n          .subscribe(() => { }));\r\n        this.completedOrderAlert();\r\n      }\r\n    });\r\n  }\r\n\r\n  ionViewDidEnter() {\r\n    this.checkorder();\r\n    if (this.accountService.userValue.alertTriggered == true) {\r\n      this.startTimer();\r\n    }\r\n  }\r\n\r\n  checkorder() {\r\n    this.subscriptions.push(this.orderService.getMyOrder(this.user.id)\r\n      .subscribe(data => {\r\n        if (data) {\r\n          this.totalPrice = data.totalPrice;\r\n          this.orderStatus = data.status;\r\n          this.orderAcceptedBy = data.acceptedBy;\r\n          this.orderService.currentOrderId = data.id;\r\n          this.location = data.location;\r\n          this.destination = data.destination;\r\n          (Math.round(this.orderTotalPrice * 100) / 100).toFixed(2);\r\n          this.orderTotalPrice = data.totalPrice;\r\n          this.order = data;\r\n          this.estimatedDuration = data.eta;\r\n\r\n          if (data.acceptedBy != null) {\r\n            this.getUserById(data.acceptedBy);\r\n            this.getAcceptedTrip(data.acceptedBy);\r\n            this.driverId = data.acceptedBy;\r\n          }\r\n\r\n        } else {\r\n          this.accountService.userValue.alertTriggered = false;\r\n          this.subscriptions.push(this.accountService.updateAlert(this.user.id, false)\r\n            .subscribe(() => { }));\r\n          this.orderTotalPrice = 0;\r\n        }\r\n      },\r\n        error => {\r\n          console.log(error)\r\n        }))\r\n  }\r\n\r\n  startTimer() {\r\n    let sec = 0;\r\n    this.startTime = new Date(this.accountService.userValue.timer);\r\n    setInterval(() => {\r\n      if (this.secsDiff == 300) {\r\n        this.subscriptions.push(this.orderService.increaseOrderPrice(this.order.id, 0.50)\r\n          .subscribe(() => { }));\r\n      }\r\n      if (this.secsDiff >= 300) {\r\n        if (this.secsDiff % 60 == 59) {\r\n          console.log('time to up')\r\n          this.subscriptions.push(this.orderService.increaseOrderPrice(this.order.id, 0.50)\r\n            .subscribe(() => { }));\r\n        }\r\n      }\r\n      this.secsDiff = new Date().getTime() - this.startTime.getTime();\r\n\r\n      this.secsDiff = Math.floor(this.secsDiff / 1000);\r\n    }, 1000);\r\n\r\n  }\r\n\r\n  presentOrderAcceptedNotification() {\r\n    this.translate.get(['Order', 'Your order is accepted'])\r\n      .subscribe(text => {\r\n        this.localNotifications.schedule({\r\n          id: 1,\r\n          title: text[\"Order\"],\r\n          text: text[\"Your order is accepted\"],\r\n          data: { secret: 'secret' }\r\n        })\r\n      })\r\n  }\r\n\r\n  presentDriverArrivedNotification() {\r\n    this.translate.get(['Order', 'Your driver is on the address, free waiting time 5min'])\r\n      .subscribe(async text => {\r\n        this.localNotifications.schedule({\r\n          id: 2,\r\n          title: text[\"Order\"],\r\n          text: text[\"Your driver is on the address, free waiting time 5min\"],\r\n          data: { secret: 'secret' }\r\n        })\r\n      })\r\n\r\n  }\r\n\r\n  //CHAT FUNCTIONALLITY\r\n  chat() {\r\n    var x = document.getElementById(\"chat\");\r\n\r\n    if (x.style.display === \"none\") {\r\n      x.style.display = \"block\";\r\n      this.chatStyle = 'block';\r\n    } else {\r\n      x.style.display = \"none\";\r\n      this.chatStyle = 'none';\r\n    }\r\n  }\r\n  msgDto: Message = new Message();\r\n  msgInboxArray: Message[] = [];\r\n\r\n  send(): void {\r\n    if (this.msgDto) {\r\n      if (this.msgDto.text.length == 0) {\r\n        window.alert(\"Text field is required.\");\r\n        return;\r\n      } else {\r\n        this.msgDto.user = `${this.accountService.userValue.firstName} ${this.accountService.userValue.lastName}`;\r\n        this.chatService.broadcastMessage(this.msgDto);                   // Send the message via a service\r\n      }\r\n    }\r\n  }\r\n\r\n  clearMessages() {\r\n    this.messages.length = 0;\r\n  }\r\n\r\n  addToInbox(obj: Message) {\r\n    let newObj = new Message();\r\n    newObj.user = obj.user;\r\n    newObj.text = obj.text;\r\n    this.msgInboxArray.push(newObj);\r\n    this.msgDto.text = '';\r\n  }\r\n\r\n\r\n\r\n  getUserById(driverId: string) {\r\n    this.subscriptions.push(this.accountService.getById(driverId)\r\n      .subscribe(userData => {\r\n        this.firstName = userData.firstName;\r\n        this.lastName = userData.lastName;\r\n        this.driverId = userData.driverId;\r\n        this.phoneNumber = userData.phone;\r\n        this.subscriptions.push(this.driverService.getDriverActiveCar(userData.driverId)\r\n          .subscribe(car => {\r\n            this.carModel = car.model;\r\n            this.carColor = car.color;\r\n          }))\r\n      }))\r\n  }\r\n\r\n  callDriver() {\r\n    let phone = this.phoneNumber.toString();\r\n    this.callNumber.callNumber(phone, true)\r\n      .then(res => console.log('Launched dialer!', res))\r\n      .catch(err => console.log('Error launching dialer', err));\r\n  }\r\n\r\n  //Get current trip to manage data.\r\n  getAcceptedTrip(userId: string) {\r\n    this.subscriptions.push(this.tripService.getTrip(userId)\r\n      .subscribe(x => {\r\n        if (x == null) {\r\n          console.log(\"No trip!\");\r\n          return;\r\n        }\r\n        this.tripStatus = x.status;\r\n        if (x.status == 'Started') {\r\n          this.accountService.userValue.alertTriggered = false;\r\n          this.subscriptions.push(this.accountService.updateAlert(this.user.id, false)\r\n            .subscribe(() => { }));\r\n        }\r\n        this.currentTrip = x;\r\n        this.loadMap(this.mapRef, userId);\r\n      }));\r\n  }\r\n\r\n  addToFavourite() {\r\n    let data = {\r\n      applicationUserId: this.order.applicationUserId,\r\n      location: this.order.location,\r\n      locationLat: this.order.locationLat,\r\n      locationLong: this.order.locationLong,\r\n      destination: this.order.destination,\r\n      destinationLat: this.order.destinationLat,\r\n      destinationLong: this.order.destinationLong,\r\n      totalPrice: this.order.totalPrice\r\n    };\r\n\r\n    if (data) {\r\n      this.subscriptions.push(this.orderService.addToFavourites(data)\r\n        .subscribe(() => {\r\n          this.successAddedFavourite();\r\n        }));\r\n\r\n    } else {\r\n      console.log('Problem with data occured')\r\n    }\r\n  }\r\n\r\n  //MAPS FUNCTIONALLITY\r\n  async loadMap(mapRef: ElementRef, driverId: string) {\r\n    this.subscriptions.push(this.accountService.getById(driverId)\r\n      .subscribe(driver => {\r\n        this.subscriptions.push(this.driverService.getDriver(driver.driverId)\r\n          .subscribe(data => {\r\n            const driverLatLng = { lat: +data.currentLocationLat, lng: +data.currentLocationLong };\r\n\r\n            const options: google.maps.MapOptions = {\r\n              center: new google.maps.LatLng(driverLatLng.lat, driverLatLng.lng),\r\n              zoom: 15,\r\n              disableDefaultUI: true,\r\n            };\r\n\r\n            if (mapRef != null) {\r\n              this.map = new google.maps.Map(mapRef.nativeElement, options);\r\n            }\r\n\r\n            var icon = {\r\n              url: 'https://images.vexels.com/media/users/3/154573/isolated/preview/bd08e000a449288c914d851cb9dae110-hatchback-car-top-view-silhouette-by-vexels.png',\r\n              scaledSize: new window.google.maps.Size(25, 25),\r\n              anchor: { x: 10, y: 10 }\r\n            };\r\n\r\n            var marker = new google.maps.Marker({\r\n              position: new google.maps.LatLng(driverLatLng),\r\n              icon: icon,\r\n              map: this.map\r\n            });\r\n          }))\r\n      }))\r\n  }\r\n\r\n  async cancelTrip() {\r\n    this.alertForCancel();\r\n  }\r\n\r\n  async alertForCancel() {\r\n    this.translate.get(['Are you sure you want to cancel the order?', 'Your rating will decrease!', 'Confirm', 'Cancel'])\r\n      .subscribe(async text => {\r\n        const popup = await this.alertController.create({\r\n          header: text['Are you sure you want to cancel the order?'],\r\n          message: text['Your rating will decrease!'],\r\n          buttons: [\r\n            {\r\n              text: text['Cancel']\r\n            },\r\n            {\r\n              text: text['Confirm'],\r\n              handler: () => {\r\n                this.subscriptions.push(this.tripService.getTrip(this.orderAcceptedBy)\r\n                  .subscribe(trip => {\r\n                    this.subscriptions.push(this.tripService.cancelTrip(trip.id)\r\n                      .subscribe(x => {\r\n                        this.subscriptions.push(this.accountService.updateDriving(this.orderAcceptedBy, false)\r\n                          .subscribe(() => {\r\n                          }));\r\n                        this.accountService.userValue.isDrivingNow = false;\r\n                        this.subscriptions.push(this.orderService.deleteOrder(trip.orderId)\r\n                          .subscribe(() => this.route.navigate(['menu/travelling'])));\r\n\r\n                      }));\r\n                  }))\r\n              }\r\n            }\r\n           \r\n          ]\r\n        });\r\n        await popup.present();\r\n      })\r\n\r\n  }\r\n\r\n  async openLanguagePopover(ev) {\r\n    const popover = await this.popoverController.create({\r\n      component: LanguagePopoverPage,\r\n      event: ev\r\n    });\r\n    await popover.present();\r\n  }\r\n\r\n  //ALERTS\r\n  async completedOrderAlert() {\r\n    this.translate.get(['You have reached the final destination! Did you enjoyed the trip?', 'Yes', 'No', 'Cancel', 'Report a problem'])\r\n      .subscribe(async text => {\r\n        const popup = await this.alertController.create({\r\n          cssClass: 'my-custom-class',\r\n          header: text['You have reached the final destination! Did you enjoyed the trip?'],\r\n          //message: '<img src = \"../assets/default.png\" width=\"1px\" height=\"1px\">',\r\n\r\n          buttons: [\r\n            {\r\n              text: text['Yes'],\r\n              role: 'cancel',\r\n              handler: () => {\r\n                this.subscriptions.push(this.driverService.voteUp(this.driverId)\r\n                  .subscribe(x => { }));\r\n                this.route.navigate(['menu/travelling']);\r\n                // window.location.reload();\r\n              }\r\n            },\r\n            {\r\n              text: text['No'],\r\n              role: 'no',\r\n              handler: () => {\r\n                this.subscriptions.push(this.driverService.voteDown(this.driverId)\r\n                  .subscribe(x => { }));\r\n                this.route.navigate(['menu/travelling']);\r\n                // window.location.reload();\r\n              }\r\n            },\r\n            {\r\n              text: text['Cancel'],\r\n              role: 'cancel',\r\n              handler: () => {\r\n                this.route.navigate(['menu/travelling']);\r\n                // window.location.reload();\r\n              }\r\n            },\r\n            {\r\n              text: text['Report a problem'],\r\n              role: 'cancel',\r\n              handler: () => {\r\n                this.route.navigate(['menu/report']);\r\n              },\r\n            }\r\n          ]\r\n        });\r\n        this.route.navigate(['menu/travelling']);\r\n\r\n        await popup.present();\r\n      })\r\n  }\r\n  async successAddedFavourite() {\r\n    this.translate.get(['Successfully added to favourites!', 'Cancel'])\r\n      .subscribe(async text => {\r\n        const popup = await this.alertController.create({\r\n          header: text['Successfully added to favourites!'],\r\n\r\n          buttons: [\r\n            {\r\n              text: text['Cancel'],\r\n              role: 'cancel',\r\n            }\r\n          ]\r\n        });\r\n        await popup.present();\r\n      })\r\n\r\n  }\r\n\r\n  async canceledOrder() {\r\n    this.translate.get(['Order is cancelled by the driver.'])\r\n      .subscribe(async text => {\r\n        const popup = await this.alertController.create({\r\n          header: text['Order is cancelled by the driver.'],\r\n\r\n          buttons: [\r\n            {\r\n              text: 'Ok',\r\n              handler: () => {\r\n                this.route.navigate(['menu/travelling']);\r\n              }\r\n            }\r\n          ]\r\n        });\r\n        await popup.present();\r\n      })\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { TravelModePageRoutingModule } from './travel-mode-routing.module';\r\n\r\nimport { TravelModePage } from './travel-mode.page';\r\nimport { TranslateLoader, TranslateModule } from '@ngx-translate/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { TranslateHttpLoader } from '@ngx-translate/http-loader';\r\nimport { LanguagePopoverPageModule } from '../language-popover/language-popover.module';\r\nimport { CallNumber } from '@ionic-native/call-number/ngx';\r\nexport function HttpLoaderFactory(http: HttpClient) {\r\n  return new TranslateHttpLoader(http);\r\n}\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    TravelModePageRoutingModule,\r\n    TranslateModule.forChild({\r\n      loader: {\r\n        provide: TranslateLoader,\r\n        useFactory: HttpLoaderFactory,\r\n        deps: [HttpClient]\r\n      }\r\n    }),\r\n    LanguagePopoverPageModule\r\n  ],\r\n  providers: [CallNumber],\r\n  declarations: [TravelModePage]\r\n})\r\nexport class TravelModePageModule {}\r\n"]}