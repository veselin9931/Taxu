(self.webpackChunkcsharpcornerauthor=self.webpackChunkcsharpcornerauthor||[]).push([[2343],{297:function(e,r,t){"use strict";t.d(r,{p:function(){return d}});var i=t(205),n=t(5304),o=t(3342),s=t(2340),a=t(3018),h=t(1841),c=t(728);let d=(()=>{class e{constructor(e,r){this.http=e,this.sharedService=r,this.orders=[],this.completedOrder=!1}createOrder(e){const r=this.sharedService.headerGerneration();return this.http.post(`${s.N.apiUrl}/api/order`,e,{headers:r,responseType:"text"}).pipe((0,n.K)(this.handleError))}addToFavourites(e){const r=this.sharedService.headerGerneration();return this.http.post(`${s.N.apiUrl}/api/order/favourites`,e,{headers:r,responseType:"text"}).pipe((0,n.K)(this.handleError))}getMyFavourites(e){const r=this.sharedService.headerGerneration();return this.http.get(`${s.N.apiUrl}/api/order/favourites/${e}`,{headers:r}).pipe((0,n.K)(this.handleError))}deleteFavouriteOrder(e){const r=this.sharedService.headerGerneration();return this.http.delete(`${s.N.apiUrl}/api/order/favourites/${e}`,{headers:r}).pipe((0,o.b)(e=>console.log("deleted favourite order: ",JSON.stringify(e))),(0,n.K)(this.handleError))}getDirections(e,r,t,i){const o=this.sharedService.headerGerneration();return this.http.post(`https://maps.googleapis.com/maps/api/distancematrix/json?units=imperial&origins=${e},${r}&destinations=${t}%2C${i}%7C&key=AIzaSyAEvlXdM4joG4bNVT5l-tJSk9lUSGhxMNw`,{headers:o,responseType:"text"}).pipe((0,n.K)(this.handleError))}getOrderById(e){const r=this.sharedService.headerGerneration();return this.http.get(`${s.N.apiUrl}/api/order/id/${e}`,{headers:r}).pipe((0,o.b)(e=>this.order=e))}getCanceledOrderById(e){const r=this.sharedService.headerGerneration();return this.http.get(`${s.N.apiUrl}/api/order/canceled/${e}`,{headers:r}).pipe((0,o.b)(e=>this.order=e))}getLastCompletedOrder(e){const r=this.sharedService.headerGerneration();return this.http.get(`${s.N.apiUrl}/api/order/completed/${e}`,{headers:r}).pipe((0,n.K)(this.handleError))}getMyOrder(e){const r=this.sharedService.headerGerneration();return this.http.get(`${s.N.apiUrl}/api/order/${e}`,{headers:r}).pipe((0,n.K)(this.handleError))}getOrderForChat(e){const r=this.sharedService.headerGerneration();return this.http.get(`${s.N.apiUrl}/api/order/chat/${e}`,{headers:r}).pipe((0,n.K)(this.handleError))}getAllOrders(){const e=this.sharedService.headerGerneration();return this.http.get(`${s.N.apiUrl}/api/order`,{headers:e}).pipe((0,n.K)(this.handleError))}getNormalOrders(){const e=this.sharedService.headerGerneration();return this.http.get(`${s.N.apiUrl}/api/order/normal`,{headers:e}).pipe((0,n.K)(this.handleError))}getComfortOrders(){const e=this.sharedService.headerGerneration();return this.http.get(`${s.N.apiUrl}/api/order/comfort`,{headers:e}).pipe((0,n.K)(this.handleError))}acceptOrder(e,r){const t=this.sharedService.headerGerneration();return this.http.put(`${s.N.apiUrl}/api/order/${e}/${r}`,{headers:t,responseType:"json"}).pipe((0,o.b)(e=>this.driverId=r),(0,n.K)(this.handleError))}updateOrderEta(e,r){const t=this.sharedService.headerGerneration();return this.http.put(`${s.N.apiUrl}/api/order/eta/${e}/${r}`,{headers:t,responseType:"json"}).pipe((0,n.K)(this.handleError))}updateDriverArrived(e){const r=this.sharedService.headerGerneration();return this.http.put(`${s.N.apiUrl}/api/order/arrived/${e}`,{headers:r,responseType:"json"}).pipe((0,n.K)(this.handleError))}rateOrder(e){const r=this.sharedService.headerGerneration();return this.http.put(`${s.N.apiUrl}/api/order/rate/${e}`,{headers:r,responseType:"json"}).pipe((0,n.K)(this.handleError))}increaseOrderPrice(e,r){const t=this.sharedService.headerGerneration();return this.http.put(`${s.N.apiUrl}/api/order/increase/${e}/${r}`,{headers:t,responseType:"json"}).pipe((0,n.K)(this.handleError))}completeOrder(e){const r=this.sharedService.headerGerneration();return this.http.put(`${s.N.apiUrl}/api/order/${e}`,{headers:r,responseType:"json"}).pipe((0,n.K)(this.handleError))}deleteOrder(e){const r=this.sharedService.headerGerneration();return this.http.delete(`${s.N.apiUrl}/api/order/${e}`,{headers:r}).pipe((0,o.b)(e=>console.log("deleted order: ",JSON.stringify(e))),(0,n.K)(this.handleError))}driverIncreaseOrderPrice(e,r,t){const i=this.sharedService.headerGerneration();return this.http.put(`${s.N.apiUrl}/api/order/increased/${e}/${r}/${t}`,{headers:i,responseType:"json"}).pipe((0,n.K)(this.handleError))}resetIncreasing(e){const r=this.sharedService.headerGerneration();return this.http.put(`${s.N.apiUrl}/api/order/reset/${e}`,{headers:r,responseType:"json"}).pipe((0,n.K)(this.handleError))}increasedOrderAccept(e,r){const t=this.sharedService.headerGerneration();return this.http.put(`${s.N.apiUrl}/api/order/accepted/increase/${e}/${r}`,{headers:t,responseType:"json"}).pipe((0,n.K)(this.handleError))}incrementOrderPrice(e){const r=this.sharedService.headerGerneration();return this.http.put(`${s.N.apiUrl}/api/order/increment/${e}`,{headers:r,responseType:"json"}).pipe((0,n.K)(this.handleError))}decrementOrderPrice(e){const r=this.sharedService.headerGerneration();return this.http.put(`${s.N.apiUrl}/api/order/decrement/${e}`,{headers:r,responseType:"json"}).pipe((0,n.K)(this.handleError))}handleError(e){let r="";return e.error instanceof ErrorEvent?(console.log("Client side error."),r=`Error: ${e.error.message}`):(console.log("Server side error."),r=`Error Code: ${e.status}\nMessage: ${e.message}`),console.log(r),(0,i._)(r)}}return e.\u0275fac=function(r){return new(r||e)(a.LFG(h.eN),a.LFG(c.F))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},2343:function(e,r,t){"use strict";t.r(r),t.d(r,{CategoriesPageModule:function(){return A},HttpLoaderFactory:function(){return N}});var i=t(8583),n=t(3679),o=t(7823),s=t(4481),a=t(4762),h=t(4426),c=t(2340),d=t(6522),p=t(3018),u=t(7800),l=t(5056),g=t(1799),v=t(297),f=t(3897);function m(e,r){1&e&&(p.TgZ(0,"ion-title"),p.TgZ(1,"ion-label"),p._uU(2),p.ALo(3,"translate"),p.qZA(),p.qZA()),2&e&&(p.xp6(2),p.Oqu(p.lcZ(3,1,"Categories")))}function Z(e,r){if(1&e&&(p.TgZ(0,"ion-chip"),p._uU(1),p.qZA()),2&e){const e=p.oxw();p.xp6(1),p.Oqu(e.driverService.categoryCloseCount)}}function O(e,r){if(1&e&&(p.TgZ(0,"ion-chip"),p._uU(1),p.qZA()),2&e){const e=p.oxw();p.xp6(1),p.Oqu(e.allCount)}}const C=[{path:"",component:(()=>{class e{constructor(e,r,t,i,n,o,s){this.popoverController=e,this.translate=r,this.accountService=t,this.route=i,this.driverService=n,this.orderService=o,this.subOrderService=s,this.subscriptions=[],this.isDrivingNow=this.accountService.userValue.isDrivingNow,this.translate.setDefaultLang(this.accountService.userValue.choosenLanguage)}ngOnInit(){this.getNormalCount(),this.getComfortCount(),this.getAllCount(),this.getSubOrderCount();const e=(new h.su).configureLogging(h.in.Information).withUrl(`${c.N.signalRUrl}/orderHub`).build();e.start().then(function(){console.log("signalR Connected in travelling")}).catch(function(e){return console.log(e)}),e.on("BroadcastMessage",()=>{this.getNormalCount(),this.getComfortCount(),this.getAllCount(),this.getSubOrderCount()}),1==this.isDrivingNow&&this.route.navigate(["menu/driving"])}all(){this.driverService.categoryType="All",this.route.navigate(["menu/driving"])}closest(){this.driverService.categoryType="Closest",this.route.navigate(["menu/driving"])}normal(){this.driverService.categoryType="Normal",this.route.navigate(["menu/driving"])}comfort(){this.driverService.categoryType="Comfort",this.route.navigate(["menu/driving"])}outOfTown(){this.driverService.categoryType="Out of town",this.route.navigate(["menu/driving"])}booked(){this.route.navigate(["menu/booked-travels"])}getNormalCount(){this.subscriptions.push(this.orderService.getNormalOrders().subscribe(e=>this.normalCount=e.length))}getComfortCount(){this.subscriptions.push(this.orderService.getComfortOrders().subscribe(e=>this.comfortCount=e.length))}getAllCount(){this.subscriptions.push(this.orderService.getAllOrders().subscribe(e=>this.allCount=e.length))}getSubOrderCount(){this.subscriptions.push(this.subOrderService.getAllSubOrders("Waiting").subscribe(e=>this.subOrderCount=e.length))}openLanguagePopover(e){return(0,a.mG)(this,void 0,void 0,function*(){const r=yield this.popoverController.create({component:d.m,event:e});yield r.present()})}ionViewDidLeave(){for(const e of this.subscriptions)console.log(e),e.unsubscribe()}}return e.\u0275fac=function(r){return new(r||e)(p.Y36(o.Dh),p.Y36(u.sK),p.Y36(l.B),p.Y36(s.F0),p.Y36(g.F),p.Y36(v.p),p.Y36(f.g))},e.\u0275cmp=p.Xpm({type:e,selectors:[["app-categories"]],decls:47,vars:25,consts:[["slot","start"],[4,"ngIf"],["slot","end"],["id","toolbarIcon","name","language-outline",3,"click"],["padding","",1,"background"],[1,"row","mt-2","text-center"],[1,"col-md-12"],[3,"click"]],template:function(e,r){1&e&&(p.TgZ(0,"ion-header"),p.TgZ(1,"ion-toolbar"),p.TgZ(2,"ion-buttons",0),p._UZ(3,"ion-menu-button"),p.qZA(),p.YNc(4,m,4,3,"ion-title",1),p.TgZ(5,"ion-buttons",2),p.TgZ(6,"ion-icon",3),p.NdJ("click",function(e){return r.openLanguagePopover(e)}),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.TgZ(7,"ion-content",4),p.TgZ(8,"div",5),p.TgZ(9,"div",6),p.TgZ(10,"ion-list"),p.TgZ(11,"ion-item",7),p.NdJ("click",function(){return r.all()}),p.TgZ(12,"ion-label"),p._uU(13),p.ALo(14,"translate"),p.qZA(),p.TgZ(15,"ion-chip"),p._uU(16),p.qZA(),p.qZA(),p.TgZ(17,"ion-item",7),p.NdJ("click",function(){return r.closest()}),p.TgZ(18,"ion-label"),p._uU(19),p.ALo(20,"translate"),p.qZA(),p.YNc(21,Z,2,1,"ion-chip",1),p.YNc(22,O,2,1,"ion-chip",1),p.qZA(),p.TgZ(23,"ion-item",7),p.NdJ("click",function(){return r.normal()}),p.TgZ(24,"ion-label"),p._uU(25),p.ALo(26,"translate"),p.qZA(),p.TgZ(27,"ion-chip"),p._uU(28),p.qZA(),p.qZA(),p.TgZ(29,"ion-item",7),p.NdJ("click",function(){return r.comfort()}),p.TgZ(30,"ion-label"),p._uU(31),p.ALo(32,"translate"),p.qZA(),p.TgZ(33,"ion-chip"),p._uU(34),p.qZA(),p.qZA(),p.TgZ(35,"ion-item",7),p.NdJ("click",function(){return r.outOfTown()}),p.TgZ(36,"ion-label"),p._uU(37),p.ALo(38,"translate"),p.qZA(),p.TgZ(39,"ion-chip"),p._uU(40),p.qZA(),p.qZA(),p.TgZ(41,"ion-item",7),p.NdJ("click",function(){return r.booked()}),p.TgZ(42,"ion-label"),p._uU(43),p.ALo(44,"translate"),p.qZA(),p.TgZ(45,"ion-chip"),p._uU(46,"0"),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA()),2&e&&(p.xp6(4),p.Q6J("ngIf",0==r.isDrivingNow),p.xp6(9),p.Oqu(p.lcZ(14,13,"All")),p.xp6(3),p.Oqu(r.allCount),p.xp6(3),p.Oqu(p.lcZ(20,15,"Closest")),p.xp6(2),p.Q6J("ngIf",null!=r.driverService.categoryCloseCount),p.xp6(1),p.Q6J("ngIf",null==r.driverService.categoryCloseCount),p.xp6(3),p.Oqu(p.lcZ(26,17,"Normal")),p.xp6(3),p.Oqu(r.normalCount),p.xp6(3),p.Oqu(p.lcZ(32,19,"Comfort")),p.xp6(3),p.Oqu(r.comfortCount),p.xp6(3),p.Oqu(p.lcZ(38,21,"Out of town")),p.xp6(3),p.Oqu(r.subOrderCount),p.xp6(3),p.Oqu(p.lcZ(44,23,"Booked")))},directives:[o.Gu,o.sr,o.Sm,o.fG,i.O5,o.gu,o.W2,o.q_,o.Ie,o.Q$,o.hM,o.wd],pipes:[u.X$],styles:["ion-content[_ngcontent-%COMP%], ion-toolbar[_ngcontent-%COMP%]{--ion-background-color:#eee}ion-title[_ngcontent-%COMP%]{text-align:center}#toolbarIcon[_ngcontent-%COMP%]{font-size:1.7em}.fonted[_ngcontent-%COMP%]{font-family:Open Sans Light}.centered[_ngcontent-%COMP%]{text-align:center}.text[_ngcontent-%COMP%]{font-family:Open Sans Light}hr[_ngcontent-%COMP%]{background:#eee;width:70%!important}"]}),e})()}];let S=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=p.oAB({type:e}),e.\u0275inj=p.cJS({imports:[[s.Bz.forChild(C)],s.Bz]}),e})();var $=t(1841),b=t(2472),T=t(3577);function N(e){return new b.w(e)}let A=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=p.oAB({type:e}),e.\u0275inj=p.cJS({imports:[[i.ez,n.u5,o.Pc,S,u.aw.forChild({loader:{provide:u.Zw,useFactory:N,deps:[$.eN]}}),T.LanguagePopoverPageModule]]}),e})()}}]);