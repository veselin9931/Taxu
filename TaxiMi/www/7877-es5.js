!function(){function e(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function r(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function t(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(self.webpackChunkcsharpcornerauthor=self.webpackChunkcsharpcornerauthor||[]).push([[7877],{297:function(r,n,i){"use strict";i.d(n,{p:function(){return h}});var o=i(205),a=i(5304),c=i(3342),s=i(2340),u=i(3018),d=i(1841),l=i(728),h=function(){var r=function(){function r(t,n){e(this,r),this.http=t,this.sharedService=n,this.orders=[],this.completedOrder=!1}return t(r,[{key:"createOrder",value:function(e){var r=this.sharedService.headerGerneration();return this.http.post("".concat(s.N.apiUrl,"/api/order"),e,{headers:r,responseType:"text"}).pipe((0,a.K)(this.handleError))}},{key:"addToFavourites",value:function(e){var r=this.sharedService.headerGerneration();return this.http.post("".concat(s.N.apiUrl,"/api/order/favourites"),e,{headers:r,responseType:"text"}).pipe((0,a.K)(this.handleError))}},{key:"getMyFavourites",value:function(e){var r=this.sharedService.headerGerneration();return this.http.get("".concat(s.N.apiUrl,"/api/order/favourites/").concat(e),{headers:r}).pipe((0,a.K)(this.handleError))}},{key:"deleteFavouriteOrder",value:function(e){var r=this.sharedService.headerGerneration();return this.http.delete("".concat(s.N.apiUrl,"/api/order/favourites/").concat(e),{headers:r}).pipe((0,c.b)(function(e){return console.log("deleted favourite order: ",JSON.stringify(e))}),(0,a.K)(this.handleError))}},{key:"getDirections",value:function(e,r,t,n){var i=this.sharedService.headerGerneration();return this.http.post("https://maps.googleapis.com/maps/api/distancematrix/json?units=imperial&origins=".concat(e,",").concat(r,"&destinations=").concat(t,"%2C").concat(n,"%7C&key=AIzaSyAEvlXdM4joG4bNVT5l-tJSk9lUSGhxMNw"),{headers:i,responseType:"text"}).pipe((0,a.K)(this.handleError))}},{key:"getOrderById",value:function(e){var r=this,t=this.sharedService.headerGerneration();return this.http.get("".concat(s.N.apiUrl,"/api/order/id/").concat(e),{headers:t}).pipe((0,c.b)(function(e){return r.order=e}))}},{key:"getCanceledOrderById",value:function(e){var r=this,t=this.sharedService.headerGerneration();return this.http.get("".concat(s.N.apiUrl,"/api/order/canceled/").concat(e),{headers:t}).pipe((0,c.b)(function(e){return r.order=e}))}},{key:"getLastCompletedOrder",value:function(e){var r=this.sharedService.headerGerneration();return this.http.get("".concat(s.N.apiUrl,"/api/order/completed/").concat(e),{headers:r}).pipe((0,a.K)(this.handleError))}},{key:"getMyOrder",value:function(e){var r=this.sharedService.headerGerneration();return this.http.get("".concat(s.N.apiUrl,"/api/order/").concat(e),{headers:r}).pipe((0,a.K)(this.handleError))}},{key:"getOrderForChat",value:function(e){var r=this.sharedService.headerGerneration();return this.http.get("".concat(s.N.apiUrl,"/api/order/chat/").concat(e),{headers:r}).pipe((0,a.K)(this.handleError))}},{key:"getAllOrders",value:function(){var e=this.sharedService.headerGerneration();return this.http.get("".concat(s.N.apiUrl,"/api/order"),{headers:e}).pipe((0,a.K)(this.handleError))}},{key:"getNormalOrders",value:function(){var e=this.sharedService.headerGerneration();return this.http.get("".concat(s.N.apiUrl,"/api/order/normal"),{headers:e}).pipe((0,a.K)(this.handleError))}},{key:"getComfortOrders",value:function(){var e=this.sharedService.headerGerneration();return this.http.get("".concat(s.N.apiUrl,"/api/order/comfort"),{headers:e}).pipe((0,a.K)(this.handleError))}},{key:"acceptOrder",value:function(e,r){var t=this,n=this.sharedService.headerGerneration();return this.http.put("".concat(s.N.apiUrl,"/api/order/").concat(e,"/").concat(r),{headers:n,responseType:"json"}).pipe((0,c.b)(function(e){return t.driverId=r}),(0,a.K)(this.handleError))}},{key:"updateOrderEta",value:function(e,r){var t=this.sharedService.headerGerneration();return this.http.put("".concat(s.N.apiUrl,"/api/order/eta/").concat(e,"/").concat(r),{headers:t,responseType:"json"}).pipe((0,a.K)(this.handleError))}},{key:"updateDriverArrived",value:function(e){var r=this.sharedService.headerGerneration();return this.http.put("".concat(s.N.apiUrl,"/api/order/arrived/").concat(e),{headers:r,responseType:"json"}).pipe((0,a.K)(this.handleError))}},{key:"rateOrder",value:function(e){var r=this.sharedService.headerGerneration();return this.http.put("".concat(s.N.apiUrl,"/api/order/rate/").concat(e),{headers:r,responseType:"json"}).pipe((0,a.K)(this.handleError))}},{key:"increaseOrderPrice",value:function(e,r){var t=this.sharedService.headerGerneration();return this.http.put("".concat(s.N.apiUrl,"/api/order/increase/").concat(e,"/").concat(r),{headers:t,responseType:"json"}).pipe((0,a.K)(this.handleError))}},{key:"completeOrder",value:function(e){var r=this.sharedService.headerGerneration();return this.http.put("".concat(s.N.apiUrl,"/api/order/").concat(e),{headers:r,responseType:"json"}).pipe((0,a.K)(this.handleError))}},{key:"deleteOrder",value:function(e){var r=this.sharedService.headerGerneration();return this.http.delete("".concat(s.N.apiUrl,"/api/order/").concat(e),{headers:r}).pipe((0,c.b)(function(e){return console.log("deleted order: ",JSON.stringify(e))}),(0,a.K)(this.handleError))}},{key:"driverIncreaseOrderPrice",value:function(e,r,t){var n=this.sharedService.headerGerneration();return this.http.put("".concat(s.N.apiUrl,"/api/order/increased/").concat(e,"/").concat(r,"/").concat(t),{headers:n,responseType:"json"}).pipe((0,a.K)(this.handleError))}},{key:"resetIncreasing",value:function(e){var r=this.sharedService.headerGerneration();return this.http.put("".concat(s.N.apiUrl,"/api/order/reset/").concat(e),{headers:r,responseType:"json"}).pipe((0,a.K)(this.handleError))}},{key:"increasedOrderAccept",value:function(e,r){var t=this.sharedService.headerGerneration();return this.http.put("".concat(s.N.apiUrl,"/api/order/accepted/increase/").concat(e,"/").concat(r),{headers:t,responseType:"json"}).pipe((0,a.K)(this.handleError))}},{key:"incrementOrderPrice",value:function(e){var r=this.sharedService.headerGerneration();return this.http.put("".concat(s.N.apiUrl,"/api/order/increment/").concat(e),{headers:r,responseType:"json"}).pipe((0,a.K)(this.handleError))}},{key:"decrementOrderPrice",value:function(e){var r=this.sharedService.headerGerneration();return this.http.put("".concat(s.N.apiUrl,"/api/order/decrement/").concat(e),{headers:r,responseType:"json"}).pipe((0,a.K)(this.handleError))}},{key:"handleError",value:function(e){var r="";return e.error instanceof ErrorEvent?(console.log("Client side error."),r="Error: ".concat(e.error.message)):(console.log("Server side error."),r="Error Code: ".concat(e.status,"\nMessage: ").concat(e.message)),console.log(r),(0,o._)(r)}}]),r}();return r.\u0275fac=function(e){return new(e||r)(u.LFG(d.eN),u.LFG(l.F))},r.\u0275prov=u.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r}()},7877:function(r,n,i){"use strict";i.r(n),i.d(n,{HttpLoaderFactory:function(){return L},TravelModePageModule:function(){return D}});var o=i(8583),a=i(3679),c=i(7823),s=i(4481),u=i(4762),d=i(3018),l=i(4426),h=i(2340),p=i(4197),v=i(6522),g=i(297),f=i(5056),m=i(1177),b=i(1799),y=i(7324),k=i(791),x=i(7800),S=i(4687),Z=["map"];function T(e,r){if(1&e&&(d.TgZ(0,"p"),d._uU(1),d.ALo(2,"translate"),d.ALo(3,"date"),d.qZA()),2&e){var t=d.oxw();d.xp6(1),d.lnq(" ",d.lcZ(2,3,"Price"),": ",t.totalPrice," \u043b\u0432. | ",d.xi3(3,5,1e3*t.secsDiff,"mm:ss")," ")}}function O(e,r){if(1&e&&(d.TgZ(0,"p"),d._uU(1),d.ALo(2,"translate"),d.qZA()),2&e){var t=d.oxw();d.xp6(1),d.AsE(" ",d.lcZ(2,2,"Price"),": ",t.totalPrice," \u043b\u0432. ")}}function w(e,r){if(1&e){var t=d.EpF();d.TgZ(0,"button",26),d.NdJ("click",function(){return d.CHM(t),d.oxw().cancelTrip()}),d._uU(1),d.ALo(2,"translate"),d.qZA()}2&e&&(d.xp6(1),d.hij(" ",d.lcZ(2,1,"Cancel")," "))}function A(e,r){1&e&&(d.TgZ(0,"ion-label",27),d._uU(1),d.ALo(2,"translate"),d.qZA()),2&e&&(d.xp6(1),d.hij(" ",d.lcZ(2,1,"You have new message"),". "))}function C(e,r){1&e&&(d.TgZ(0,"ul",28),d.TgZ(1,"li",29),d._uU(2),d.ALo(3,"translate"),d.qZA(),d.qZA()),2&e&&(d.xp6(2),d.Oqu(d.lcZ(3,1,"No messages for now")))}function N(e,r){if(1&e&&(d.TgZ(0,"ul"),d.TgZ(1,"li",30),d._uU(2),d.qZA(),d.qZA()),2&e){var t=r.$implicit,n=d.oxw();d.xp6(1),d.Q6J("ngClass",t.user===n.msgDto.user?"in-msg":"ex-msg"),d.xp6(1),d.AsE(" ",t.user,": ",t.text," ")}}var M,P=[{path:"",component:(M=function(){function r(t,n,i,o,a,c,s,u,d,l,h){e(this,r),this.route=t,this.orderService=n,this.accountService=i,this.tripService=o,this.driverService=a,this.localNotifications=c,this.alertController=s,this.chatService=u,this.translate=d,this.popoverController=l,this.callNumber=h,this.user=this.accountService.userValue,this.driverId=this.accountService.userValue.driverId,this.carModel="",this.carColor="",this.firstName="",this.lastName="",this.messages=this.chatService.messages,this.chatStyle="",this.subscriptions=[],this.maxTime=3e4,this.msgDto=new p.v,this.msgInboxArray=[],this.translate.setDefaultLang(this.accountService.userValue.choosenLanguage)}return t(r,[{key:"ngOnInit",value:function(){var e=this;this.chatService.stop(),this.chatService.start(),this.checkorder(),this.chatService.retrieveMappedObject().subscribe(function(r){e.addToInbox(r)});var r=(new l.su).configureLogging(l.in.Information).withUrl("".concat(h.N.signalRUrl,"/orderHub")).build();r.start().then(function(){console.log("signalR Connected in travel-mode")}).catch(function(e){console.log("Reconnecting in 1 sec."),setTimeout(function(){return r.start()},1e3)}),r.on("BroadcastMessage",function(){e.checkorder()}),r.on("StartTrip",function(){e.checkorder()}),r.on("Navigate",function(){e.checkorder()}),r.on("OrderAccepted",function(r){e.subscriptions.push(e.orderService.getOrderById(r).subscribe(function(r){r.id==e.order.id&&"Accepted"==r.status&&e.presentOrderAcceptedNotification()}))}),r.on("OrderWaiting",function(r){e.subscriptions.push(e.orderService.getMyOrder(e.user.id).subscribe(function(t){t.id==r&&e.canceledOrder()}))}),r.on("LocateDriver",function(r){e.subscriptions.push(e.orderService.getMyOrder(e.user.id).subscribe(function(t){e.subscriptions.push(e.driverService.getDriver(r).subscribe(function(t){t.id==r&&e.loadMap(e.mapRef,t.applicationUserId)}))}))}),r.on("NotifyArrived",function(r){e.subscriptions.push(e.orderService.getOrderById(r).subscribe(function(t){1==t.isDriverArrived&&e.order.id==r&&(e.presentDriverArrivedNotification(),e.accountService.userValue.alertTriggered=!0,e.subscriptions.push(e.accountService.updateAlert(e.user.id,!0).subscribe(function(){})),e.accountService.userValue.timer=new Date,60==e.seconds&&(e.seconds=0),e.startTimer())}))}),r.on("CompleteOrder",function(r){e.order.id==r&&(e.accountService.userValue.alertTriggered=!1,e.subscriptions.push(e.accountService.updateAlert(e.user.id,!1).subscribe(function(){})),e.completedOrderAlert())})}},{key:"ionViewDidEnter",value:function(){this.checkorder(),1==this.accountService.userValue.alertTriggered&&this.startTimer()}},{key:"checkorder",value:function(){var e=this;this.subscriptions.push(this.orderService.getMyOrder(this.user.id).subscribe(function(r){r?(e.totalPrice=r.totalPrice,e.orderStatus=r.status,e.orderAcceptedBy=r.acceptedBy,e.orderService.currentOrderId=r.id,e.location=r.location,e.destination=r.destination,(Math.round(100*e.orderTotalPrice)/100).toFixed(2),e.orderTotalPrice=r.totalPrice,e.order=r,e.estimatedDuration=r.eta,null!=r.acceptedBy&&(e.getUserById(r.acceptedBy),e.getAcceptedTrip(r.acceptedBy),e.driverId=r.acceptedBy)):(e.accountService.userValue.alertTriggered=!1,e.subscriptions.push(e.accountService.updateAlert(e.user.id,!1).subscribe(function(){})),e.orderTotalPrice=0)},function(e){console.log(e)}))}},{key:"startTimer",value:function(){var e=this;this.startTime=new Date(this.accountService.userValue.timer),setInterval(function(){300==e.secsDiff&&e.subscriptions.push(e.orderService.increaseOrderPrice(e.order.id,.5).subscribe(function(){})),e.secsDiff>=300&&e.secsDiff%60==59&&(console.log("time to up"),e.subscriptions.push(e.orderService.increaseOrderPrice(e.order.id,.5).subscribe(function(){}))),e.secsDiff=(new Date).getTime()-e.startTime.getTime(),e.secsDiff=Math.floor(e.secsDiff/1e3)},1e3)}},{key:"presentOrderAcceptedNotification",value:function(){var e=this;this.translate.get(["Order","Your order is accepted"]).subscribe(function(r){e.localNotifications.schedule({id:1,title:r.Order,text:r["Your order is accepted"],data:{secret:"secret"}})})}},{key:"presentDriverArrivedNotification",value:function(){var e=this;this.translate.get(["Order","Your driver is on the address, free waiting time 5min"]).subscribe(function(r){return(0,u.mG)(e,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.localNotifications.schedule({id:2,title:r.Order,text:r["Your driver is on the address, free waiting time 5min"],data:{secret:"secret"}});case 1:case"end":return e.stop()}},e,this)}))})}},{key:"chat",value:function(){var e=document.getElementById("chat");"none"===e.style.display?(e.style.display="block",this.chatStyle="block"):(e.style.display="none",this.chatStyle="none")}},{key:"send",value:function(){if(this.msgDto){if(0==this.msgDto.text.length)return void window.alert("Text field is required.");this.msgDto.user="".concat(this.accountService.userValue.firstName," ").concat(this.accountService.userValue.lastName),this.chatService.broadcastMessage(this.msgDto)}}},{key:"clearMessages",value:function(){this.messages.length=0}},{key:"addToInbox",value:function(e){var r=new p.v;r.user=e.user,r.text=e.text,this.msgInboxArray.push(r),this.msgDto.text=""}},{key:"getUserById",value:function(e){var r=this;this.subscriptions.push(this.accountService.getById(e).subscribe(function(e){r.firstName=e.firstName,r.lastName=e.lastName,r.driverId=e.driverId,r.phoneNumber=e.phone,r.subscriptions.push(r.driverService.getDriverActiveCar(e.driverId).subscribe(function(e){r.carModel=e.model,r.carColor=e.color}))}))}},{key:"callDriver",value:function(){var e=this.phoneNumber.toString();this.callNumber.callNumber(e,!0).then(function(e){return console.log("Launched dialer!",e)}).catch(function(e){return console.log("Error launching dialer",e)})}},{key:"getAcceptedTrip",value:function(e){var r=this;this.subscriptions.push(this.tripService.getTrip(e).subscribe(function(t){null!=t?(r.tripStatus=t.status,"Started"==t.status&&(r.accountService.userValue.alertTriggered=!1,r.subscriptions.push(r.accountService.updateAlert(r.user.id,!1).subscribe(function(){}))),r.currentTrip=t,r.loadMap(r.mapRef,e)):console.log("No trip!")}))}},{key:"addToFavourite",value:function(){var e=this,r={applicationUserId:this.order.applicationUserId,location:this.order.location,locationLat:this.order.locationLat,locationLong:this.order.locationLong,destination:this.order.destination,destinationLat:this.order.destinationLat,destinationLong:this.order.destinationLong,totalPrice:this.order.totalPrice};r?this.subscriptions.push(this.orderService.addToFavourites(r).subscribe(function(){e.successAddedFavourite()})):console.log("Problem with data occured")}},{key:"loadMap",value:function(e,r){return(0,u.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.subscriptions.push(this.accountService.getById(r).subscribe(function(r){n.subscriptions.push(n.driverService.getDriver(r.driverId).subscribe(function(r){var t={lat:+r.currentLocationLat,lng:+r.currentLocationLong},i={center:new google.maps.LatLng(t.lat,t.lng),zoom:15,disableDefaultUI:!0};null!=e&&(n.map=new google.maps.Map(e.nativeElement,i));var o={url:"https://images.vexels.com/media/users/3/154573/isolated/preview/bd08e000a449288c914d851cb9dae110-hatchback-car-top-view-silhouette-by-vexels.png",scaledSize:new window.google.maps.Size(25,25),anchor:{x:10,y:10}};new google.maps.Marker({position:new google.maps.LatLng(t),icon:o,map:n.map})}))}));case 1:case"end":return t.stop()}},t,this)}))}},{key:"cancelTrip",value:function(){return(0,u.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.alertForCancel();case 1:case"end":return e.stop()}},e,this)}))}},{key:"alertForCancel",value:function(){return(0,u.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.translate.get(["Are you sure you want to cancel the order?","Your rating will decrease!","Confirm","Cancel"]).subscribe(function(e){return(0,u.mG)(r,void 0,void 0,regeneratorRuntime.mark(function r(){var t,n=this;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.alertController.create({header:e["Are you sure you want to cancel the order?"],message:e["Your rating will decrease!"],buttons:[{text:e.Cancel},{text:e.Confirm,handler:function(){n.subscriptions.push(n.tripService.getTrip(n.orderAcceptedBy).subscribe(function(e){n.subscriptions.push(n.tripService.cancelTrip(e.id).subscribe(function(r){n.subscriptions.push(n.accountService.updateDriving(n.orderAcceptedBy,!1).subscribe(function(){})),n.accountService.userValue.isDrivingNow=!1,n.subscriptions.push(n.orderService.deleteOrder(e.orderId).subscribe(function(){return n.route.navigate(["menu/travelling"])}))}))}))}}]});case 2:return t=r.sent,r.next=5,t.present();case 5:case"end":return r.stop()}},r,this)}))});case 1:case"end":return e.stop()}},e,this)}))}},{key:"openLanguagePopover",value:function(e){return(0,u.mG)(this,void 0,void 0,regeneratorRuntime.mark(function r(){var t;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.popoverController.create({component:v.m,event:e});case 2:return t=r.sent,r.next=5,t.present();case 5:case"end":return r.stop()}},r,this)}))}},{key:"completedOrderAlert",value:function(){return(0,u.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.translate.get(["You have reached the final destination! Did you enjoyed the trip?","Yes","No","Cancel","Report a problem"]).subscribe(function(e){return(0,u.mG)(r,void 0,void 0,regeneratorRuntime.mark(function r(){var t,n=this;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.alertController.create({cssClass:"my-custom-class",header:e["You have reached the final destination! Did you enjoyed the trip?"],buttons:[{text:e.Yes,role:"cancel",handler:function(){n.subscriptions.push(n.driverService.voteUp(n.driverId).subscribe(function(e){})),n.route.navigate(["menu/travelling"])}},{text:e.No,role:"no",handler:function(){n.subscriptions.push(n.driverService.voteDown(n.driverId).subscribe(function(e){})),n.route.navigate(["menu/travelling"])}},{text:e.Cancel,role:"cancel",handler:function(){n.route.navigate(["menu/travelling"])}},{text:e["Report a problem"],role:"cancel",handler:function(){n.route.navigate(["menu/report"])}}]});case 2:return t=r.sent,this.route.navigate(["menu/travelling"]),r.next=6,t.present();case 6:case"end":return r.stop()}},r,this)}))});case 1:case"end":return e.stop()}},e,this)}))}},{key:"successAddedFavourite",value:function(){return(0,u.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.translate.get(["Successfully added to favourites!","Cancel"]).subscribe(function(e){return(0,u.mG)(r,void 0,void 0,regeneratorRuntime.mark(function r(){var t;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.alertController.create({header:e["Successfully added to favourites!"],buttons:[{text:e.Cancel,role:"cancel"}]});case 2:return t=r.sent,r.next=5,t.present();case 5:case"end":return r.stop()}},r,this)}))});case 1:case"end":return e.stop()}},e,this)}))}},{key:"canceledOrder",value:function(){return(0,u.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.translate.get(["Order is cancelled by the driver."]).subscribe(function(e){return(0,u.mG)(r,void 0,void 0,regeneratorRuntime.mark(function r(){var t,n=this;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.alertController.create({header:e["Order is cancelled by the driver."],buttons:[{text:"Ok",handler:function(){n.route.navigate(["menu/travelling"])}}]});case 2:return t=r.sent,r.next=5,t.present();case 5:case"end":return r.stop()}},r,this)}))});case 1:case"end":return e.stop()}},e,this)}))}}]),r}(),M.\u0275fac=function(e){return new(e||M)(d.Y36(s.F0),d.Y36(g.p),d.Y36(f.B),d.Y36(m.a),d.Y36(b.F),d.Y36(y.sn),d.Y36(c.Br),d.Y36(k.a),d.Y36(x.sK),d.Y36(c.Dh),d.Y36(S.X))},M.\u0275cmp=d.Xpm({type:M,selectors:[["app-travel-mode"]],viewQuery:function(e,r){var t;1&e&&d.Gf(Z,1,d.SBq),2&e&&d.iGM(t=d.CRH())&&(r.mapRef=t.first)},decls:55,vars:34,consts:[["slot","start"],[1,"blink_me"],["slot","end"],["id","toolbarIcon","name","language-outline",3,"click"],["id","map"],["map",""],[1,"row"],[1,"col"],[1,"list-group"],[1,"list-group-item","list-group-item-action","flex-column","align-items-start"],["name","analytics-outline",1,"mr-2"],[1,"d-flex","w-100","justify-content-between"],[4,"ngIf"],["type","button",1,"fonted","btn","btn-warning","mb-1",3,"click"],["name","call",1,"mr-2"],["type","button",1,"fonted","btn","btn-secondary","mr-1",3,"click"],["type","button",1,"fonted","btn","btn-info",3,"click"],["class","fonted btn btn-warning ml-1","type","button",3,"click",4,"ngIf"],["class","blink_me fonted",4,"ngIf"],["id","chat",1,"row","chat",2,"display","none"],[1,"msg-box"],["class","text-center mr-5",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"type"],[3,"ngModel","placeholder","ngModelChange"],["name","send-outline",3,"click"],["type","button",1,"fonted","btn","btn-warning","ml-1",3,"click"],[1,"blink_me","fonted"],[1,"text-center","mr-5"],[1,"fonted"],[1,"fonted",3,"ngClass"]],template:function(e,r){1&e&&(d.TgZ(0,"ion-content"),d.TgZ(1,"ion-header"),d.TgZ(2,"ion-toolbar"),d.TgZ(3,"ion-buttons",0),d._UZ(4,"ion-menu-button"),d.qZA(),d.TgZ(5,"ion-title"),d.TgZ(6,"ion-label",1),d._uU(7),d.ALo(8,"translate"),d.qZA(),d.qZA(),d.TgZ(9,"ion-buttons",2),d.TgZ(10,"ion-icon",3),d.NdJ("click",function(e){return r.openLanguagePopover(e)}),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d._UZ(11,"div",4,5),d.qZA(),d.TgZ(13,"ion-footer"),d.TgZ(14,"div",6),d.TgZ(15,"div",7),d.TgZ(16,"div",8),d.TgZ(17,"a",9),d.TgZ(18,"p"),d._uU(19),d.ALo(20,"translate"),d.ALo(21,"translate"),d.qZA(),d._UZ(22,"hr"),d.TgZ(23,"p"),d._UZ(24,"ion-icon",10),d._uU(25),d.qZA(),d._UZ(26,"hr"),d.TgZ(27,"div",11),d.YNc(28,T,4,8,"p",12),d.YNc(29,O,3,4,"p",12),d.TgZ(30,"button",13),d.NdJ("click",function(){return r.callDriver()})("click",function(){return r.clearMessages()}),d._UZ(31,"ion-icon",14),d._uU(32),d.ALo(33,"translate"),d.qZA(),d.qZA(),d.TgZ(34,"div",11),d.TgZ(35,"button",15),d.NdJ("click",function(){return r.chat()})("click",function(){return r.clearMessages()}),d._uU(36),d.ALo(37,"translate"),d.qZA(),d.TgZ(38,"button",16),d.NdJ("click",function(){return r.addToFavourite()}),d._uU(39),d.ALo(40,"translate"),d.qZA(),d.YNc(41,w,3,3,"button",17),d.qZA(),d._UZ(42,"br"),d.YNc(43,A,3,3,"ion-label",18),d.TgZ(44,"div",19),d.TgZ(45,"div",7),d.TgZ(46,"ion-card"),d.TgZ(47,"div",20),d.YNc(48,C,4,3,"ul",21),d.YNc(49,N,3,3,"ul",22),d.qZA(),d.qZA(),d.TgZ(50,"ion-card",23),d.TgZ(51,"ion-item"),d.TgZ(52,"ion-input",24),d.NdJ("ngModelChange",function(e){return r.msgDto.text=e}),d.ALo(53,"translate"),d.qZA(),d.TgZ(54,"ion-icon",25),d.NdJ("click",function(){return r.send()}),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&e&&(d.xp6(7),d.Oqu(d.lcZ(8,20,"Waiting for the car")),d.xp6(12),d.Q0o("",r.firstName," ",r.lastName," ",d.lcZ(20,22,"will arrive with")," ",r.carColor," ",r.carModel," ",d.lcZ(21,24,"in about")," ",r.estimatedDuration,"."),d.xp6(6),d.hij("",r.destination," "),d.xp6(3),d.Q6J("ngIf",1==r.accountService.userValue.alertTriggered),d.xp6(1),d.Q6J("ngIf",0==r.accountService.userValue.alertTriggered),d.xp6(3),d.hij("",d.lcZ(33,26,"Call driver")," "),d.xp6(4),d.hij(" ",d.lcZ(37,28,"Chat")," "),d.xp6(3),d.hij(" ",d.lcZ(40,30,"Add to favourites")," "),d.xp6(2),d.Q6J("ngIf","Processing"==r.tripStatus),d.xp6(2),d.Q6J("ngIf",0!=r.messages.length&&"none"==r.chatStyle),d.xp6(5),d.Q6J("ngIf",0==r.msgInboxArray.length),d.xp6(1),d.Q6J("ngForOf",r.msgInboxArray),d.xp6(3),d.Q6J("ngModel",r.msgDto.text)("placeholder",d.lcZ(53,32,"Type your message...")))},directives:[c.W2,c.Gu,c.sr,c.Sm,c.fG,c.wd,c.Q$,c.gu,c.fr,o.O5,c.PM,o.sg,c.Ie,c.pK,c.j9,a.JJ,a.On,o.mk],pipes:[x.X$,o.uU],styles:["ion-content[_ngcontent-%COMP%]{--ion-background-color:#353535}ion-toolbar[_ngcontent-%COMP%]{--ion-background-color:#eee}ion-title[_ngcontent-%COMP%]{text-align:center}#marker[_ngcontent-%COMP%]{position:absolute;background:url(http://maps.gstatic.com/mapfiles/markers2/marker.png) no-repeat;top:50%;left:50%;z-index:1;margin-left:-10px;margin-top:-34px;height:34px;width:20px;cursor:pointer}#map[_ngcontent-%COMP%]{height:100%;width:100%}#toolbarIcon[_ngcontent-%COMP%]{font-size:1.7em}.centered[_ngcontent-%COMP%]{text-align:center}.textTravel[_ngcontent-%COMP%]{font-size:1.5em}.text[_ngcontent-%COMP%], .textTravel[_ngcontent-%COMP%]{font-family:Open Sans Light}.text[_ngcontent-%COMP%]{font-size:2.4em}i[_ngcontent-%COMP%]{color:#eee}.my-custom-class[_ngcontent-%COMP%]{--background:#e5e5e5}.checkbox-icon[_ngcontent-%COMP%]{color:#fff}ion-checkbox[_ngcontent-%COMP%]{--border-color:#fff}ion-select[_ngcontent-%COMP%]{color:#383838;background-color:#fff;border-radius:10px;border:3px solid #eee}.blink_me[_ngcontent-%COMP%]{-webkit-animation:blinker 1s linear infinite;animation:blinker 1s linear infinite}@-webkit-keyframes blinker{50%{opacity:0}}@keyframes blinker{50%{opacity:0}}.backIcon[_ngcontent-%COMP%]{font-size:150%}.back[_ngcontent-%COMP%], .backIcon[_ngcontent-%COMP%]{color:#ffae00}.fonted[_ngcontent-%COMP%], .msg-box[_ngcontent-%COMP%]{font-family:Open Sans Light}.msg-box[_ngcontent-%COMP%]{width:100%;height:140px;padding:10px 30px;font-size:14px;overflow:auto}.msg-box[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:-5px;list-style:none}.msg-box[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .ex-msg[_ngcontent-%COMP%]{text-align:right}.msg-box[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   .in-msg[_ngcontent-%COMP%]{text-align:left;margin-left:-60px}"]}),M)}],_=function(){var r=function r(){e(this,r)};return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=d.oAB({type:r}),r.\u0275inj=d.cJS({imports:[[s.Bz.forChild(P)],s.Bz]}),r}(),U=i(1841),I=i(2472),G=i(3577);function L(e){return new I.w(e)}var q,D=((q=function r(){e(this,r)}).\u0275fac=function(e){return new(e||q)},q.\u0275mod=d.oAB({type:q}),q.\u0275inj=d.cJS({providers:[S.X],imports:[[o.ez,a.u5,c.Pc,_,x.aw.forChild({loader:{provide:x.Zw,useFactory:L,deps:[U.eN]}}),G.LanguagePopoverPageModule]]}),q)}}])}();