!function(){function e(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function r(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function t(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(self.webpackChunkcsharpcornerauthor=self.webpackChunkcsharpcornerauthor||[]).push([[8985],{297:function(r,n,o){"use strict";o.d(n,{p:function(){return u}});var a=o(205),i=o(5304),c=o(3342),s=o(2340),p=o(3018),d=o(1841),h=o(728),u=function(){var r=function(){function r(t,n){e(this,r),this.http=t,this.sharedService=n,this.orders=[],this.completedOrder=!1}return t(r,[{key:"createOrder",value:function(e){var r=this.sharedService.headerGerneration();return this.http.post("".concat(s.N.apiUrl,"/api/order"),e,{headers:r,responseType:"text"}).pipe((0,i.K)(this.handleError))}},{key:"addToFavourites",value:function(e){var r=this.sharedService.headerGerneration();return this.http.post("".concat(s.N.apiUrl,"/api/order/favourites"),e,{headers:r,responseType:"text"}).pipe((0,i.K)(this.handleError))}},{key:"getMyFavourites",value:function(e){var r=this.sharedService.headerGerneration();return this.http.get("".concat(s.N.apiUrl,"/api/order/favourites/").concat(e),{headers:r}).pipe((0,i.K)(this.handleError))}},{key:"deleteFavouriteOrder",value:function(e){var r=this.sharedService.headerGerneration();return this.http.delete("".concat(s.N.apiUrl,"/api/order/favourites/").concat(e),{headers:r}).pipe((0,c.b)(function(e){return console.log("deleted favourite order: ",JSON.stringify(e))}),(0,i.K)(this.handleError))}},{key:"getDirections",value:function(e,r,t,n){var o=this.sharedService.headerGerneration();return this.http.post("https://maps.googleapis.com/maps/api/distancematrix/json?units=imperial&origins=".concat(e,",").concat(r,"&destinations=").concat(t,"%2C").concat(n,"%7C&key=AIzaSyAEvlXdM4joG4bNVT5l-tJSk9lUSGhxMNw"),{headers:o,responseType:"text"}).pipe((0,i.K)(this.handleError))}},{key:"getOrderById",value:function(e){var r=this,t=this.sharedService.headerGerneration();return this.http.get("".concat(s.N.apiUrl,"/api/order/id/").concat(e),{headers:t}).pipe((0,c.b)(function(e){return r.order=e}))}},{key:"getCanceledOrderById",value:function(e){var r=this,t=this.sharedService.headerGerneration();return this.http.get("".concat(s.N.apiUrl,"/api/order/canceled/").concat(e),{headers:t}).pipe((0,c.b)(function(e){return r.order=e}))}},{key:"getLastCompletedOrder",value:function(e){var r=this.sharedService.headerGerneration();return this.http.get("".concat(s.N.apiUrl,"/api/order/completed/").concat(e),{headers:r}).pipe((0,i.K)(this.handleError))}},{key:"getMyOrder",value:function(e){var r=this.sharedService.headerGerneration();return this.http.get("".concat(s.N.apiUrl,"/api/order/").concat(e),{headers:r}).pipe((0,i.K)(this.handleError))}},{key:"getOrderForChat",value:function(e){var r=this.sharedService.headerGerneration();return this.http.get("".concat(s.N.apiUrl,"/api/order/chat/").concat(e),{headers:r}).pipe((0,i.K)(this.handleError))}},{key:"getAllOrders",value:function(){var e=this.sharedService.headerGerneration();return this.http.get("".concat(s.N.apiUrl,"/api/order"),{headers:e}).pipe((0,i.K)(this.handleError))}},{key:"getNormalOrders",value:function(){var e=this.sharedService.headerGerneration();return this.http.get("".concat(s.N.apiUrl,"/api/order/normal"),{headers:e}).pipe((0,i.K)(this.handleError))}},{key:"getComfortOrders",value:function(){var e=this.sharedService.headerGerneration();return this.http.get("".concat(s.N.apiUrl,"/api/order/comfort"),{headers:e}).pipe((0,i.K)(this.handleError))}},{key:"acceptOrder",value:function(e,r){var t=this,n=this.sharedService.headerGerneration();return this.http.put("".concat(s.N.apiUrl,"/api/order/").concat(e,"/").concat(r),{headers:n,responseType:"json"}).pipe((0,c.b)(function(e){return t.driverId=r}),(0,i.K)(this.handleError))}},{key:"updateOrderEta",value:function(e,r){var t=this.sharedService.headerGerneration();return this.http.put("".concat(s.N.apiUrl,"/api/order/eta/").concat(e,"/").concat(r),{headers:t,responseType:"json"}).pipe((0,i.K)(this.handleError))}},{key:"updateDriverArrived",value:function(e){var r=this.sharedService.headerGerneration();return this.http.put("".concat(s.N.apiUrl,"/api/order/arrived/").concat(e),{headers:r,responseType:"json"}).pipe((0,i.K)(this.handleError))}},{key:"rateOrder",value:function(e){var r=this.sharedService.headerGerneration();return this.http.put("".concat(s.N.apiUrl,"/api/order/rate/").concat(e),{headers:r,responseType:"json"}).pipe((0,i.K)(this.handleError))}},{key:"increaseOrderPrice",value:function(e,r){var t=this.sharedService.headerGerneration();return this.http.put("".concat(s.N.apiUrl,"/api/order/increase/").concat(e,"/").concat(r),{headers:t,responseType:"json"}).pipe((0,i.K)(this.handleError))}},{key:"completeOrder",value:function(e){var r=this.sharedService.headerGerneration();return this.http.put("".concat(s.N.apiUrl,"/api/order/").concat(e),{headers:r,responseType:"json"}).pipe((0,i.K)(this.handleError))}},{key:"deleteOrder",value:function(e){var r=this.sharedService.headerGerneration();return this.http.delete("".concat(s.N.apiUrl,"/api/order/").concat(e),{headers:r}).pipe((0,c.b)(function(e){return console.log("deleted order: ",JSON.stringify(e))}),(0,i.K)(this.handleError))}},{key:"driverIncreaseOrderPrice",value:function(e,r,t){var n=this.sharedService.headerGerneration();return this.http.put("".concat(s.N.apiUrl,"/api/order/increased/").concat(e,"/").concat(r,"/").concat(t),{headers:n,responseType:"json"}).pipe((0,i.K)(this.handleError))}},{key:"resetIncreasing",value:function(e){var r=this.sharedService.headerGerneration();return this.http.put("".concat(s.N.apiUrl,"/api/order/reset/").concat(e),{headers:r,responseType:"json"}).pipe((0,i.K)(this.handleError))}},{key:"increasedOrderAccept",value:function(e,r){var t=this.sharedService.headerGerneration();return this.http.put("".concat(s.N.apiUrl,"/api/order/accepted/increase/").concat(e,"/").concat(r),{headers:t,responseType:"json"}).pipe((0,i.K)(this.handleError))}},{key:"incrementOrderPrice",value:function(e){var r=this.sharedService.headerGerneration();return this.http.put("".concat(s.N.apiUrl,"/api/order/increment/").concat(e),{headers:r,responseType:"json"}).pipe((0,i.K)(this.handleError))}},{key:"decrementOrderPrice",value:function(e){var r=this.sharedService.headerGerneration();return this.http.put("".concat(s.N.apiUrl,"/api/order/decrement/").concat(e),{headers:r,responseType:"json"}).pipe((0,i.K)(this.handleError))}},{key:"handleError",value:function(e){var r="";return e.error instanceof ErrorEvent?(console.log("Client side error."),r="Error: ".concat(e.error.message)):(console.log("Server side error."),r="Error Code: ".concat(e.status,"\nMessage: ").concat(e.message)),console.log(r),(0,a._)(r)}}]),r}();return r.\u0275fac=function(e){return new(e||r)(p.LFG(d.eN),p.LFG(h.F))},r.\u0275prov=p.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r}()},8985:function(r,n,o){"use strict";o.r(n),o.d(n,{HttpLoaderFactory:function(){return C},LocationPageModule:function(){return Z}});var a,i=o(8583),c=o(3679),s=o(7823),p=o(4481),d=o(4762),h=o(3018),u=o(8442),l=o(6522),g=o(297),v=o(7800),f=o(5056),m=["map"],y=["myButton"],k=u.Vn.Geolocation,S=[{path:"",component:(a=function(){function r(t,n,o,a,i,c){e(this,r),this.route=t,this.orderService=n,this.navCtrl=o,this.translate=a,this.popoverController=i,this.accountService=c,this.markerUrl="../../assets/location.png",this.translate.setDefaultLang(this.accountService.userValue.choosenLanguage)}return t(r,[{key:"ngOnInit",value:function(){}},{key:"ionViewDidEnter",value:function(){this.getLocation(),this.loadMap(this.mapRef)}},{key:"onSubmit",value:function(){this.orderService.chosenLocation=this.address,this.route.navigate(["menu/destination"])}},{key:"loadMap",value:function(e){return(0,d.mG)(this,void 0,void 0,regeneratorRuntime.mark(function r(){var t,n,o,a,i,c,s,p=this;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,k.getCurrentPosition();case 2:t=r.sent,n={lat:t.coords.latitude,lng:t.coords.longitude},this.orderService.userLocationLat=n.lat,this.orderService.userLocationLong=n.lng,o={center:new google.maps.LatLng(n.lat,n.lng),zoom:15,disableDefaultUI:!0,mapTypeId:google.maps.MapTypeId.ROADMAP},this.map=new google.maps.Map(e.nativeElement,o),a=new google.maps.Marker({position:new google.maps.LatLng(n),icon:this.markerUrl,map:this.map}),i=document.getElementById("searchTextField").getElementsByTagName("input")[0],c=new google.maps.places.SearchBox(i),this.orderService.selectedFavourite=null,this.map.addListener("bounds_changed",function(){c.setBounds(p.map.getBounds())}),c.addListener("places_changed",function(){var e=c.getPlaces();if(0!=e.length){var r=new google.maps.LatLngBounds;e.forEach(function(e){e.geometry?(a.setMap(null),a=new google.maps.Marker({position:e.geometry.location,map:p.map}),e.geometry.viewport?r.union(e.geometry.viewport):r.extend(e.geometry.location)):console.log("No Geometry")}),p.map.fitBounds(r)}}),s=new google.maps.Geocoder,google.maps.event.addListener(this.map,"idle",function(){return(0,d.mG)(p,void 0,void 0,regeneratorRuntime.mark(function e(){var r,t,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=this.map.getCenter(),t={lat:r.lat(),lng:r.lng()},a&&a.setMap&&a.setMap(null),this.orderService.userLocationLat=t.lat,this.orderService.userLocationLong=t.lng,s.geocode({location:t},function(e,r){"OK"==r&&e[0]&&(n.address=e[0].formatted_address)});case 3:case"end":return e.stop()}},e,this)}))});case 11:case"end":return r.stop()}},r,this)}))}},{key:"destination",value:function(){this.route.navigate(["menu/destination"])}},{key:"getLocation",value:function(){var e=this;navigator.geolocation?navigator.geolocation.getCurrentPosition(function(r){e.longitude=r.coords.longitude,e.latitude=r.coords.latitude,e.callApi(e.longitude,e.latitude)}):console.log("No support for geolocation")}},{key:"callApi",value:function(e,r){}},{key:"openLanguagePopover",value:function(e){return(0,d.mG)(this,void 0,void 0,regeneratorRuntime.mark(function r(){var t;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.popoverController.create({component:l.m,event:e});case 2:return t=r.sent,r.next=5,t.present();case 5:case"end":return r.stop()}},r,this)}))}}]),r}(),a.\u0275fac=function(e){return new(e||a)(h.Y36(p.F0),h.Y36(g.p),h.Y36(s.SH),h.Y36(v.sK),h.Y36(s.Dh),h.Y36(f.B))},a.\u0275cmp=h.Xpm({type:a,selectors:[["app-location"]],viewQuery:function(e,r){var t;1&e&&(h.Gf(m,3,h.SBq),h.Gf(y,1)),2&e&&(h.iGM(t=h.CRH())&&(r.mapRef=t.first),h.iGM(t=h.CRH())&&(r.myButton=t.first))},decls:27,vars:10,consts:[["slot","start"],["slot","end"],["id","toolbarIcon","name","language-outline",3,"click"],["id","searchTextField","type","text","clearInput","",3,"placeholder"],[1,"noScroll"],["id","map"],["map",""],["id","marker"],["marker",""],[1,"text-center"],[1,"btn","btn-info","text-center",3,"click"]],template:function(e,r){1&e&&(h.TgZ(0,"ion-header"),h.TgZ(1,"ion-toolbar"),h.TgZ(2,"ion-buttons",0),h._UZ(3,"ion-menu-button"),h.qZA(),h.TgZ(4,"ion-title"),h.TgZ(5,"ion-label"),h._uU(6),h.ALo(7,"translate"),h.qZA(),h.qZA(),h.TgZ(8,"ion-buttons",1),h.TgZ(9,"ion-icon",2),h.NdJ("click",function(e){return r.openLanguagePopover(e)}),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(10,"ion-item"),h._UZ(11,"ion-input",3),h.ALo(12,"translate"),h.qZA(),h.TgZ(13,"ion-content",4),h._UZ(14,"div",5,6),h._UZ(16,"div",7,8),h.qZA(),h.TgZ(18,"ion-footer"),h.TgZ(19,"ion-toolbar",9),h.TgZ(20,"button",10),h.NdJ("click",function(){return r.onSubmit()}),h._uU(21),h.ALo(22,"translate"),h.qZA(),h.qZA(),h.qZA(),h.TgZ(23,"ion-footer"),h.TgZ(24,"ion-toolbar",9),h.TgZ(25,"p"),h._uU(26),h.qZA(),h.qZA(),h.qZA()),2&e&&(h.xp6(6),h.Oqu(h.lcZ(7,4,"Choose starting point")),h.xp6(5),h.Q6J("placeholder",h.lcZ(12,6,"Search location")),h.xp6(10),h.Oqu(h.lcZ(22,8,"Take me from here")),h.xp6(5),h.Oqu(r.address))},directives:[s.Gu,s.sr,s.Sm,s.fG,s.wd,s.Q$,s.gu,s.Ie,s.pK,s.j9,s.W2,s.fr],pipes:[v.X$],styles:[".noScroll[_ngcontent-%COMP%]{overflow:hidden}#marker[_ngcontent-%COMP%]{position:absolute;background:url(location.2c2142b0480f63125d3d.png) no-repeat;top:50%;left:50%;z-index:1;margin-left:-10px;margin-top:-34px;height:34px;width:20px;cursor:pointer}#map[_ngcontent-%COMP%]{height:100%;width:100%}ion-card[_ngcontent-%COMP%]{max-height:200px;overflow:scroll;position:absolute;z-index:1}ion-toolbar[_ngcontent-%COMP%]{--ion-background-color:#eee}ion-title[_ngcontent-%COMP%]{text-align:center}#toolbarIcon[_ngcontent-%COMP%]{font-size:1.7em}#toolbarIcon1[_ngcontent-%COMP%]{font-size:3em}.centered[_ngcontent-%COMP%]{text-align:center}.text[_ngcontent-%COMP%]{font-size:2.4em;font-family:Open Sans Light}i[_ngcontent-%COMP%]{color:#eee}.my-custom-class[_ngcontent-%COMP%]{--background:#e5e5e5}ion-select[_ngcontent-%COMP%]{color:#383838;background-color:#fff;border-radius:10px;border:3px solid #eee}.blink_me[_ngcontent-%COMP%]{-webkit-animation:blinker 1s linear infinite;animation:blinker 1s linear infinite}@-webkit-keyframes blinker{50%{opacity:0}}@keyframes blinker{50%{opacity:0}}.backIcon[_ngcontent-%COMP%]{font-size:150%}.back[_ngcontent-%COMP%], .backIcon[_ngcontent-%COMP%]{color:#ffae00}"]}),a)}],b=function(){var r=function r(){e(this,r)};return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=h.oAB({type:r}),r.\u0275inj=h.cJS({imports:[[p.Bz.forChild(S)],p.Bz]}),r}(),O=o(1841),G=o(2472),w=o(3577);function C(e){return new G.w(e)}var T,Z=((T=function r(){e(this,r)}).\u0275fac=function(e){return new(e||T)},T.\u0275mod=h.oAB({type:T}),T.\u0275inj=h.cJS({imports:[[i.ez,c.u5,s.Pc,b,v.aw.forChild({loader:{provide:v.Zw,useFactory:C,deps:[O.eN]}}),w.LanguagePopoverPageModule]]}),T)}}])}();