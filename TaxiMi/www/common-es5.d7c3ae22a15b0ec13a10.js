!function(){function e(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,o)}function t(t){return function(){var n=this,r=arguments;return new Promise(function(o,i){var a=t.apply(n,r);function c(t){e(a,o,i,c,s,"next",t)}function s(t){e(a,o,i,c,s,"throw",t)}c(void 0)})}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"0/6H":function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n("A36C"),o=n("iWo5"),i=n("qULd"),a=function(e,t){var n,a,c=function(e,r,o){if("undefined"!=typeof document){var i=document.elementFromPoint(e,r);i&&t(i)?i!==n&&(u(),s(i,o)):u()}},s=function(e,t){n=e,a||(a=n);var o=n;Object(r.f)(function(){return o.classList.add("ion-activated")}),t()},u=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(n){var t=n;Object(r.f)(function(){return t.classList.remove("ion-activated")}),e&&a!==n&&n.click(),n=void 0}};return Object(o.createGesture)({el:e,gestureName:"buttonActiveDrag",threshold:0,onStart:function(e){return c(e.currentX,e.currentY,i.a)},onMove:function(e){return c(e.currentX,e.currentY,i.b)},onEnd:function(){u(!0),Object(i.e)(),a=void 0}})}},1207:function(e,t,r){"use strict";r.r(t),r.d(t,"HttpLoaderFactory",function(){return L}),r.d(t,"DestinationPageModule",function(){return P});var i,a,c=r("ofXK"),s=r("3Pt+"),u=r("TEn/"),l=r("tyNb"),p=r("mrSG"),d=r("fXoL"),f=r("gcOT"),h=r("oXKM"),g=r("8k+r"),b=r("sYmb"),v=r("8Xdb"),m=["map"],y=["myButton"],k=f.c.Geolocation,M=[{path:"",component:(i=function(){function e(t,r,o,i,a){n(this,e),this.route=t,this.orderService=r,this.translate=o,this.popoverController=i,this.accountService=a,this.markerUrl="../../assets/location.png",this.translate.setDefaultLang(this.accountService.userValue.choosenLanguage)}return o(e,[{key:"ngOnInit",value:function(){}},{key:"ionViewDidEnter",value:function(){this.getLocation(),this.loadMap(this.mapRef)}},{key:"onSubmit",value:function(){this.orderService.chosenDestination=this.address,this.loading=!0,this.route.navigate(["menu/travelling"])}},{key:"loadMap",value:function(e){return Object(p.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,r,o,i,a,c,s,u=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.getCurrentPosition();case 2:n=t.sent,r={lat:n.coords.latitude,lng:n.coords.longitude},this.orderService.userDestinationLat=r.lat,this.orderService.userDestinationLong=r.lng,o={center:new google.maps.LatLng(r.lat,r.lng),zoom:15,disableDefaultUI:!0},this.map=new google.maps.Map(e.nativeElement,o),i=new google.maps.Marker({position:new google.maps.LatLng(r),map:this.map}),a=document.getElementById("searchTextField2").getElementsByTagName("input")[0],this.orderService.selectedFavourite=null,c=new google.maps.places.SearchBox(a),this.map.addListener("bounds_changed",function(){c.setBounds(u.map.getBounds())}),c.addListener("places_changed",function(){var e=c.getPlaces();if(0!=e.length){var t=new google.maps.LatLngBounds;e.forEach(function(e){e.geometry?(i.setMap(null),i=new google.maps.Marker({position:e.geometry.location,map:u.map}),e.geometry.viewport?t.union(e.geometry.viewport):t.extend(e.geometry.location)):console.log("No Geometry")}),u.map.fitBounds(t)}}),s=new google.maps.Geocoder,google.maps.event.addListener(this.map,"idle",function(){return Object(p.a)(u,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.map.getCenter(),n={lat:t.lat(),lng:t.lng()},i&&i.setMap&&i.setMap(null),this.orderService.userDestinationLat=n.lat,this.orderService.userDestinationLong=n.lng,s.geocode({location:n},function(e,t){"OK"==t&&e[0]&&(r.address=e[0].formatted_address)});case 3:case"end":return e.stop()}},e,this)}))});case 13:case"end":return t.stop()}},t,this)}))}},{key:"getLocation",value:function(){var e=this;navigator.geolocation?navigator.geolocation.getCurrentPosition(function(t){e.longitude=t.coords.longitude,e.latitude=t.coords.latitude,e.callApi(e.longitude,e.latitude)}):console.log("No support for geolocation")}},{key:"callApi",value:function(e,t){}},{key:"openLanguagePopover",value:function(e){return Object(p.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.popoverController.create({component:h.a,event:e});case 2:return n=t.sent,t.next=5,n.present();case 5:case"end":return t.stop()}},t,this)}))}}]),e}(),i.\u0275fac=function(e){return new(e||i)(d.Kb(l.f),d.Kb(g.a),d.Kb(b.d),d.Kb(u.H),d.Kb(v.a))},i.\u0275cmp=d.Eb({type:i,selectors:[["app-destination"]],viewQuery:function(e,t){var n;1&e&&(d.vc(m,1,d.m),d.vc(y,1)),2&e&&(d.hc(n=d.Wb())&&(t.mapRef=n.first),d.hc(n=d.Wb())&&(t.myButton=n.first))},decls:27,vars:10,consts:[["slot","start"],["slot","end"],["id","toolbarIcon","name","language-outline",3,"click"],["id","searchTextField2","type","text","clearInput","",3,"placeholder"],[1,"noScroll"],["id","map"],["map",""],["id","marker"],["marker",""],[1,"text-center"],[1,"btn","btn-info",3,"click"]],template:function(e,t){1&e&&(d.Nb(0,"ion-header"),d.Nb(1,"ion-toolbar"),d.Nb(2,"ion-buttons",0),d.Lb(3,"ion-menu-button"),d.Mb(),d.Nb(4,"ion-title"),d.Nb(5,"ion-label"),d.pc(6),d.Yb(7,"translate"),d.Mb(),d.Mb(),d.Nb(8,"ion-buttons",1),d.Nb(9,"ion-icon",2),d.Vb("click",function(e){return t.openLanguagePopover(e)}),d.Mb(),d.Mb(),d.Mb(),d.Mb(),d.Nb(10,"ion-item"),d.Lb(11,"ion-input",3),d.Yb(12,"translate"),d.Mb(),d.Nb(13,"ion-content",4),d.Lb(14,"div",5,6),d.Lb(16,"div",7,8),d.Mb(),d.Nb(18,"ion-footer"),d.Nb(19,"ion-toolbar",9),d.Nb(20,"button",10),d.Vb("click",function(){return t.onSubmit()}),d.pc(21),d.Yb(22,"translate"),d.Mb(),d.Mb(),d.Mb(),d.Nb(23,"ion-footer"),d.Nb(24,"ion-toolbar",9),d.Nb(25,"p"),d.pc(26),d.Mb(),d.Mb(),d.Mb()),2&e&&(d.zb(6),d.qc(d.Zb(7,4,"Choose destination")),d.zb(5),d.dc("placeholder",d.Zb(12,6,"Search destination")),d.zb(10),d.qc(d.Zb(22,8,"Drop me here")),d.zb(5),d.qc(t.address))},directives:[u.l,u.B,u.e,u.s,u.A,u.p,u.m,u.o,u.n,u.K,u.i,u.k],pipes:[b.c],styles:[".noScroll[_ngcontent-%COMP%]{overflow:hidden}#marker[_ngcontent-%COMP%]{position:absolute;background:url(location.2c2142b0480f63125d3d.png) no-repeat;top:50%;left:50%;z-index:1;margin-left:-10px;margin-top:-34px;height:34px;width:20px;cursor:pointer}#map[_ngcontent-%COMP%]{height:100%;width:100%}ion-content[_ngcontent-%COMP%]{--ion-background-color:#353535}ion-toolbar[_ngcontent-%COMP%]{--ion-background-color:#eee}ion-title[_ngcontent-%COMP%]{text-align:center}#toolbarIcon[_ngcontent-%COMP%]{font-size:1.7em}.centered[_ngcontent-%COMP%]{text-align:center}.text[_ngcontent-%COMP%]{font-size:2.4em;font-family:Open Sans Light}i[_ngcontent-%COMP%]{color:#eee}.my-custom-class[_ngcontent-%COMP%]{--background:#e5e5e5}ion-select[_ngcontent-%COMP%]{color:#383838;background-color:#fff;border-radius:10px;border:3px solid #eee}.blink_me[_ngcontent-%COMP%]{-webkit-animation:blinker 1s linear infinite;animation:blinker 1s linear infinite}@-webkit-keyframes blinker{50%{opacity:0}}@keyframes blinker{50%{opacity:0}}.backIcon[_ngcontent-%COMP%]{font-size:150%}.back[_ngcontent-%COMP%], .backIcon[_ngcontent-%COMP%]{color:#ffae00}"]}),i)}],w=((a=function e(){n(this,e)}).\u0275fac=function(e){return new(e||a)},a.\u0275mod=d.Ib({type:a}),a.\u0275inj=d.Hb({imports:[[l.h.forChild(M)],l.h]}),a),O=r("tk/3"),C=r("mqiu"),S=r("QhVT");function L(e){return new C.a(e)}var x,P=((x=function e(){n(this,e)}).\u0275fac=function(e){return new(e||x)},x.\u0275mod=d.Ib({type:x}),x.\u0275inj=d.Hb({imports:[[c.b,s.e,u.C,w,b.b.forChild({loader:{provide:b.a,useFactory:L,deps:[O.a]}}),S.LanguagePopoverPageModule]]}),x)},"74mu":function(e,n,r){"use strict";r.d(n,"a",function(){return i}),r.d(n,"b",function(){return a}),r.d(n,"c",function(){return o}),r.d(n,"d",function(){return s});var o=function(e,t){return null!==t.closest(e)},i=function(e,t){return"string"==typeof e&&e.length>0?Object.assign((n={"ion-color":!0},r="ion-color-".concat(e),o=!0,r in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,n),t):t;var n,r,o},a=function(e){var t={};return function(e){return void 0!==e?(Array.isArray(e)?e:e.split(" ")).filter(function(e){return null!=e}).map(function(e){return e.trim()}).filter(function(e){return""!==e}):[]}(e).forEach(function(e){return t[e]=!0}),t},c=/^[a-z][a-z0-9+\-.]*:/,s=function(){var e=t(regeneratorRuntime.mark(function e(t,n,r,o){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t||"#"===t[0]||c.test(t)){e.next=4;break}if(!(i=document.querySelector("ion-router"))){e.next=4;break}return e.abrupt("return",(null!=n&&n.preventDefault(),i.push(t,r,o)));case 4:return e.abrupt("return",!1);case 5:case"end":return e.stop()}},e)}));return function(t,n,r,o){return e.apply(this,arguments)}}()},"Dsd+":function(e,t,r){"use strict";r.d(t,"a",function(){return s});var i=r("tk/3"),a=r("fXoL"),c=r("mpGk"),s=function(){var e=function(){function e(t){n(this,e),this.accountService=t}return o(e,[{key:"headerGerneration",value:function(){return new i.d({"Content-Type":"application/json",Authorization:"Bearer ".concat(this.accountService.userValue.token)})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.Rb(c.a))},e.\u0275prov=a.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},Hmjx:function(e,t,r){"use strict";r.d(t,"a",function(){return p});var i=r("z6cu"),a=r("JIr8"),c=r("AytR"),s=r("fXoL"),u=r("tk/3"),l=r("Dsd+"),p=function(){var e=function(){function e(t,r){n(this,e),this.http=t,this.sharedService=r}return o(e,[{key:"getMyWallet",value:function(e){var t=this.sharedService.headerGerneration();return this.http.get("".concat(c.a.apiUrl,"/api/wallet/").concat(e),{headers:t}).pipe(Object(a.a)(this.handleError))}},{key:"chargeWallet",value:function(e,t){var n=this.sharedService.headerGerneration();return this.http.put("".concat(c.a.apiUrl,"/api/wallet/increase/").concat(e,"/").concat(t),{headers:n,responseType:"json"}).pipe(Object(a.a)(this.handleError))}},{key:"dischargeWallet",value:function(e,t){var n=this.sharedService.headerGerneration();return this.http.put("".concat(c.a.apiUrl,"/api/wallet/decrease/").concat(e,"/").concat(t),{headers:n,responseType:"json"}).pipe(Object(a.a)(this.handleError))}},{key:"handleError",value:function(e){var t="";return e.error instanceof ErrorEvent?(console.log("Client side error."),t="Error: ".concat(e.error.message)):(console.log("Server side error."),t="Error Code: ".concat(e.status,"\nMessage: ").concat(e.message)),console.log(t),Object(i.a)(t)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.Rb(u.a),s.Rb(l.a))},e.\u0275prov=s.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},Jhu6:function(e,t,r){"use strict";r.d(t,"a",function(){return p});var i=r("z6cu"),a=r("JIr8"),c=r("AytR"),s=r("fXoL"),u=r("tk/3"),l=r("Dsd+"),p=function(){var e=function(){function e(t,r){n(this,e),this.httpClient=t,this.sharedService=r}return o(e,[{key:"upload",value:function(e,t,n,r){return this.httpClient.post("".concat(c.a.apiUrl,"/api/image/").concat(t,"/").concat(n,"/").concat(r),e,{reportProgress:!0,observe:"events"}).pipe(Object(a.a)(this.handleError))}},{key:"getMyPicture",value:function(e){var t=this.sharedService.headerGerneration();return this.httpClient.get("".concat(c.a.apiUrl,"/api/image/user/").concat(e),{headers:t}).pipe(Object(a.a)(this.handleError))}},{key:"getUserDocuments",value:function(e){var t=this.sharedService.headerGerneration();return this.httpClient.get("".concat(c.a.apiUrl,"/api/image/documents/").concat(e),{headers:t}).pipe(Object(a.a)(this.handleError))}},{key:"getUserCarPictures",value:function(e){var t=this.sharedService.headerGerneration();return this.httpClient.get("".concat(c.a.apiUrl,"/api/image/cars/").concat(e),{headers:t}).pipe(Object(a.a)(this.handleError))}},{key:"removeDocument",value:function(e){var t=this.sharedService.headerGerneration();return this.httpClient.delete("".concat(c.a.apiUrl,"/api/image/").concat(e),{headers:t}).pipe(Object(a.a)(this.handleError))}},{key:"handleError",value:function(e){var t="";return e.error instanceof ErrorEvent?(console.log("Client side error."),t="Error: ".concat(e.error.message)):(console.log("Server side error."),t="Error Code: ".concat(e.status,"\nMessage: ").concat(e.message)),console.log(t),Object(i.a)(t)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.Rb(u.a),s.Rb(l.a))},e.\u0275prov=s.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},QhVT:function(e,t,r){"use strict";r.r(t),r.d(t,"LanguagePopoverPageModule",function(){return h});var o,i,a=r("ofXK"),c=r("3Pt+"),s=r("TEn/"),u=r("tyNb"),l=r("oXKM"),p=r("fXoL"),d=[{path:"",component:l.a}],f=((i=function e(){n(this,e)}).\u0275fac=function(e){return new(e||i)},i.\u0275mod=p.Ib({type:i}),i.\u0275inj=p.Hb({imports:[[u.h.forChild(d)],u.h]}),i),h=((o=function e(){n(this,e)}).\u0275fac=function(e){return new(e||o)},o.\u0275mod=p.Ib({type:o}),o.\u0275inj=p.Hb({imports:[[a.b,c.e,s.C,f]]}),o)},RX8M:function(e,t,r){"use strict";r.d(t,"a",function(){return h});var i=r("mrSG"),a=r("Gpoy"),c=r("VeQZ"),s=r("XNiG"),u=r("AytR"),l=r("fXoL"),p=r("tk/3"),d=r("mpGk"),f=r("8k+r"),h=function(){var e=function(){function e(t,r,o){var i=this;n(this,e),this.http=t,this.accountService=r,this.orderService=o,this.messages=[],this.connection=(new a.b).withUrl("".concat(u.a.signalRUrl,"/orderHub")).build(),this.POST_URL="".concat(u.a.signalRUrl,"/api/chat/send"),this.receivedMessageObject=new c.c,this.sharedObj=new s.a,this.connection.on("MessageReceived",function(e,t){i.mapReceivedMessage(e,t)})}return o(e,[{key:"stop",value:function(){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.connection.stop();case 2:console.log("Disconnected");case 3:case"end":return e.stop()}},e,this)}))}},{key:"start",value:function(){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.connection.start();case 3:return e.next=5,this.orderService.getOrderForChat(this.accountService.userValue.id).subscribe(function(e){t.orderService.currentOrderId?t.connection.invoke("AddToRoom",t.orderService.currentOrderId):null==e||t.connection.invoke("AddToRoom",e.id)});case 5:console.log("connected in chat"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),console.log("Reoonnecting in 1 sec."),setTimeout(function(){return t.start()},1e3);case 11:case"end":return e.stop()}},e,this,[[0,8]])}))}},{key:"mapReceivedMessage",value:function(e,t){this.receivedMessageObject.user=e,this.receivedMessageObject.text=t,this.messages.push(this.receivedMessageObject),this.sharedObj.next(this.receivedMessageObject)}},{key:"broadcastMessage",value:function(e){var t=this;this.orderService.getOrderForChat(this.accountService.userValue.id).subscribe(function(n){n.id&&t.http.post("".concat(t.POST_URL,"/").concat(n.id),e).subscribe(function(){})})}},{key:"retrieveMappedObject",value:function(){return this.sharedObj.asObservable()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(l.Rb(p.a),l.Rb(d.a),l.Rb(f.a))},e.\u0275prov=l.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},Wwn5:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n("mrSG"),o=n("C6fG"),i=n("fXoL"),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Object(r.b)(t,e),t.prototype.callNumber=function(e,t){return Object(o.cordova)(this,"callNumber",{callbackOrder:"reverse"},arguments)},t.prototype.isCallSupported=function(){return Object(o.cordova)(this,"isCallSupported",{},arguments)},t.pluginName="CallNumber",t.plugin="call-number",t.pluginRef="plugins.CallNumber",t.repo="https://github.com/Rohfosho/CordovaCallNumberPlugin",t.platforms=["Android","iOS"],t.\u0275fac=function(e){return n(e||t)},t.\u0275prov=i.Gb({token:t,factory:function(e){return t.\u0275fac(e)}});var n=i.Pb(t);return t}(o.IonicNativePlugin)},ZaV5:function(e,n,r){"use strict";r.d(n,"a",function(){return o}),r.d(n,"b",function(){return i});var o=function(){var e=t(regeneratorRuntime.mark(function e(t,n,r,o,i){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=2;break}return e.abrupt("return",t.attachViewToDom(n,r,i,o));case 2:if("string"==typeof r||r instanceof HTMLElement){e.next=4;break}throw new Error("framework delegate is missing");case 4:if(a="string"==typeof r?n.ownerDocument&&n.ownerDocument.createElement(r):r,o&&o.forEach(function(e){return a.classList.add(e)}),i&&Object.assign(a,i),n.appendChild(a),e.t0=a.componentOnReady,!e.t0){e.next=12;break}return e.next=12,a.componentOnReady();case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}},e)}));return function(t,n,r,o,i){return e.apply(this,arguments)}}(),i=function(e,t){if(t){if(e)return e.removeViewFromDom(t.parentElement,t);t.remove()}return Promise.resolve()}},cf3W:function(e,t,r){"use strict";r.r(t),r.d(t,"HttpLoaderFactory",function(){return L}),r.d(t,"LocationPageModule",function(){return P});var i,a,c=r("ofXK"),s=r("3Pt+"),u=r("TEn/"),l=r("tyNb"),p=r("mrSG"),d=r("fXoL"),f=r("gcOT"),h=r("oXKM"),g=r("8k+r"),b=r("sYmb"),v=r("8Xdb"),m=["map"],y=["myButton"],k=f.c.Geolocation,M=[{path:"",component:(i=function(){function e(t,r,o,i,a,c){n(this,e),this.route=t,this.orderService=r,this.navCtrl=o,this.translate=i,this.popoverController=a,this.accountService=c,this.markerUrl="../../assets/location.png",this.translate.setDefaultLang(this.accountService.userValue.choosenLanguage)}return o(e,[{key:"ngOnInit",value:function(){}},{key:"ionViewDidEnter",value:function(){this.getLocation(),this.loadMap(this.mapRef)}},{key:"onSubmit",value:function(){this.orderService.chosenLocation=this.address,this.route.navigate(["menu/destination"])}},{key:"loadMap",value:function(e){return Object(p.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,r,o,i,a,c,s,u=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.getCurrentPosition();case 2:n=t.sent,r={lat:n.coords.latitude,lng:n.coords.longitude},this.orderService.userLocationLat=r.lat,this.orderService.userLocationLong=r.lng,o={center:new google.maps.LatLng(r.lat,r.lng),zoom:15,disableDefaultUI:!0,mapTypeId:google.maps.MapTypeId.ROADMAP},this.map=new google.maps.Map(e.nativeElement,o),i=new google.maps.Marker({position:new google.maps.LatLng(r),icon:this.markerUrl,map:this.map}),a=document.getElementById("searchTextField").getElementsByTagName("input")[0],c=new google.maps.places.SearchBox(a),this.orderService.selectedFavourite=null,this.map.addListener("bounds_changed",function(){c.setBounds(u.map.getBounds())}),c.addListener("places_changed",function(){var e=c.getPlaces();if(0!=e.length){var t=new google.maps.LatLngBounds;e.forEach(function(e){e.geometry?(i.setMap(null),i=new google.maps.Marker({position:e.geometry.location,map:u.map}),e.geometry.viewport?t.union(e.geometry.viewport):t.extend(e.geometry.location)):console.log("No Geometry")}),u.map.fitBounds(t)}}),s=new google.maps.Geocoder,google.maps.event.addListener(this.map,"idle",function(){return Object(p.a)(u,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.map.getCenter(),n={lat:t.lat(),lng:t.lng()},i&&i.setMap&&i.setMap(null),this.orderService.userLocationLat=n.lat,this.orderService.userLocationLong=n.lng,s.geocode({location:n},function(e,t){"OK"==t&&e[0]&&(r.address=e[0].formatted_address)});case 3:case"end":return e.stop()}},e,this)}))});case 11:case"end":return t.stop()}},t,this)}))}},{key:"destination",value:function(){this.route.navigate(["menu/destination"])}},{key:"getLocation",value:function(){var e=this;navigator.geolocation?navigator.geolocation.getCurrentPosition(function(t){e.longitude=t.coords.longitude,e.latitude=t.coords.latitude,e.callApi(e.longitude,e.latitude)}):console.log("No support for geolocation")}},{key:"callApi",value:function(e,t){}},{key:"openLanguagePopover",value:function(e){return Object(p.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.popoverController.create({component:h.a,event:e});case 2:return n=t.sent,t.next=5,n.present();case 5:case"end":return t.stop()}},t,this)}))}}]),e}(),i.\u0275fac=function(e){return new(e||i)(d.Kb(l.f),d.Kb(g.a),d.Kb(u.E),d.Kb(b.d),d.Kb(u.H),d.Kb(v.a))},i.\u0275cmp=d.Eb({type:i,selectors:[["app-location"]],viewQuery:function(e,t){var n;1&e&&(d.vc(m,3,d.m),d.vc(y,1)),2&e&&(d.hc(n=d.Wb())&&(t.mapRef=n.first),d.hc(n=d.Wb())&&(t.myButton=n.first))},decls:27,vars:10,consts:[["slot","start"],["slot","end"],["id","toolbarIcon","name","language-outline",3,"click"],["id","searchTextField","type","text","clearInput","",3,"placeholder"],[1,"noScroll"],["id","map"],["map",""],["id","marker"],["marker",""],[1,"text-center"],[1,"btn","btn-info","text-center",3,"click"]],template:function(e,t){1&e&&(d.Nb(0,"ion-header"),d.Nb(1,"ion-toolbar"),d.Nb(2,"ion-buttons",0),d.Lb(3,"ion-menu-button"),d.Mb(),d.Nb(4,"ion-title"),d.Nb(5,"ion-label"),d.pc(6),d.Yb(7,"translate"),d.Mb(),d.Mb(),d.Nb(8,"ion-buttons",1),d.Nb(9,"ion-icon",2),d.Vb("click",function(e){return t.openLanguagePopover(e)}),d.Mb(),d.Mb(),d.Mb(),d.Mb(),d.Nb(10,"ion-item"),d.Lb(11,"ion-input",3),d.Yb(12,"translate"),d.Mb(),d.Nb(13,"ion-content",4),d.Lb(14,"div",5,6),d.Lb(16,"div",7,8),d.Mb(),d.Nb(18,"ion-footer"),d.Nb(19,"ion-toolbar",9),d.Nb(20,"button",10),d.Vb("click",function(){return t.onSubmit()}),d.pc(21),d.Yb(22,"translate"),d.Mb(),d.Mb(),d.Mb(),d.Nb(23,"ion-footer"),d.Nb(24,"ion-toolbar",9),d.Nb(25,"p"),d.pc(26),d.Mb(),d.Mb(),d.Mb()),2&e&&(d.zb(6),d.qc(d.Zb(7,4,"Choose starting point")),d.zb(5),d.dc("placeholder",d.Zb(12,6,"Search location")),d.zb(10),d.qc(d.Zb(22,8,"Take me from here")),d.zb(5),d.qc(t.address))},directives:[u.l,u.B,u.e,u.s,u.A,u.p,u.m,u.o,u.n,u.K,u.i,u.k],pipes:[b.c],styles:[".noScroll[_ngcontent-%COMP%]{overflow:hidden}#marker[_ngcontent-%COMP%]{position:absolute;background:url(location.2c2142b0480f63125d3d.png) no-repeat;top:50%;left:50%;z-index:1;margin-left:-10px;margin-top:-34px;height:34px;width:20px;cursor:pointer}#map[_ngcontent-%COMP%]{height:100%;width:100%}ion-card[_ngcontent-%COMP%]{max-height:200px;overflow:scroll;position:absolute;z-index:1}ion-toolbar[_ngcontent-%COMP%]{--ion-background-color:#eee}ion-title[_ngcontent-%COMP%]{text-align:center}#toolbarIcon[_ngcontent-%COMP%]{font-size:1.7em}#toolbarIcon1[_ngcontent-%COMP%]{font-size:3em}.centered[_ngcontent-%COMP%]{text-align:center}.text[_ngcontent-%COMP%]{font-size:2.4em;font-family:Open Sans Light}i[_ngcontent-%COMP%]{color:#eee}.my-custom-class[_ngcontent-%COMP%]{--background:#e5e5e5}ion-select[_ngcontent-%COMP%]{color:#383838;background-color:#fff;border-radius:10px;border:3px solid #eee}.blink_me[_ngcontent-%COMP%]{-webkit-animation:blinker 1s linear infinite;animation:blinker 1s linear infinite}@-webkit-keyframes blinker{50%{opacity:0}}@keyframes blinker{50%{opacity:0}}.backIcon[_ngcontent-%COMP%]{font-size:150%}.back[_ngcontent-%COMP%], .backIcon[_ngcontent-%COMP%]{color:#ffae00}"]}),i)}],w=((a=function e(){n(this,e)}).\u0275fac=function(e){return new(e||a)},a.\u0275mod=d.Ib({type:a}),a.\u0275inj=d.Hb({imports:[[l.h.forChild(M)],l.h]}),a),O=r("tk/3"),C=r("mqiu"),S=r("QhVT");function L(e){return new C.a(e)}var x,P=((x=function e(){n(this,e)}).\u0275fac=function(e){return new(e||x)},x.\u0275mod=d.Ib({type:x}),x.\u0275inj=d.Hb({imports:[[c.b,s.e,u.C,w,b.b.forChild({loader:{provide:b.a,useFactory:L,deps:[O.a]}}),S.LanguagePopoverPageModule]]}),x)},e7jj:function(e,t,r){"use strict";r.d(t,"a",function(){return f});var i=r("z6cu"),a=r("vkgz"),c=r("JIr8"),s=r("AytR"),u=r("fXoL"),l=r("tk/3"),p=r("mpGk"),d=r("Dsd+"),f=function(){var e=function(){function e(t,r,o){n(this,e),this.http=t,this.accountService=r,this.sharedService=o,this.trips=[],this.currentTripDriverId=this.accountService.userValue.id,this.currentOrder=""}return o(e,[{key:"createTrip",value:function(e){var t=this.sharedService.headerGerneration();return this.currentTripOrderId=e.orderId,this.currentOrder=e.order,this.http.post("".concat(s.a.apiUrl,"/api/trip"),e,{headers:t,responseType:"text"}).pipe(Object(a.a)(function(e){return console.log("created trip: ",JSON.stringify(e))}),Object(c.a)(this.handleError))}},{key:"getTrip",value:function(e){var t=this,n=this.sharedService.headerGerneration();return this.http.get("".concat(s.a.apiUrl,"/api/trip/").concat(e),{headers:n}).pipe(Object(a.a)(function(e){return t.trip=e}),Object(c.a)(this.handleError))}},{key:"startTrip",value:function(e){return this.http.put("".concat(s.a.apiUrl,"/api/trip/start/").concat(e),{responseType:"json"}).pipe(Object(c.a)(this.handleError))}},{key:"navigateToUser",value:function(e,t){return this.http.put("".concat(s.a.apiUrl,"/api/trip/navigate/").concat(e,"/").concat(t),{responseType:"json"}).pipe(Object(c.a)(this.handleError))}},{key:"cancelTrip",value:function(e){return this.http.put("".concat(s.a.apiUrl,"/api/trip/cancel/").concat(e),{responseType:"json"}).pipe(Object(c.a)(this.handleError))}},{key:"completeTrip",value:function(e){return this.http.put("".concat(s.a.apiUrl,"/api/trip/finish/").concat(e),{responseType:"json"}).pipe(Object(c.a)(this.handleError))}},{key:"handleError",value:function(e){var t="";return e.error instanceof ErrorEvent?(console.log("Client side error."),t="Error: ".concat(e.error.message)):(console.log("Server side error."),t="Error Code: ".concat(e.status,"\nMessage: ").concat(e.message)),console.log(t),Object(i.a)(t)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.Rb(l.a),u.Rb(p.a),u.Rb(d.a))},e.\u0275prov=u.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},h3R7:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={bubbles:{dur:1e3,circles:9,fn:function(e,t,n){var r=e*t/n-e+"ms",o=2*Math.PI*t/n;return{r:5,style:{top:9*Math.sin(o)+"px",left:9*Math.cos(o)+"px","animation-delay":r}}}},circles:{dur:1e3,circles:8,fn:function(e,t,n){var r=t/n,o=e*r-e+"ms",i=2*Math.PI*r;return{r:5,style:{top:9*Math.sin(i)+"px",left:9*Math.cos(i)+"px","animation-delay":o}}}},circular:{dur:1400,elmDuration:!0,circles:1,fn:function(){return{r:20,cx:48,cy:48,fill:"none",viewBox:"24 24 48 48",transform:"translate(0,0)",style:{}}}},crescent:{dur:750,circles:1,fn:function(){return{r:26,style:{}}}},dots:{dur:750,circles:3,fn:function(e,t){return{r:6,style:{left:9-9*t+"px","animation-delay":-110*t+"ms"}}}},lines:{dur:1e3,lines:12,fn:function(e,t,n){return{y1:17,y2:29,style:{transform:"rotate(".concat(30*t+(t<6?180:-180),"deg)"),"animation-delay":e*t/n-e+"ms"}}}},"lines-small":{dur:1e3,lines:12,fn:function(e,t,n){return{y1:12,y2:20,style:{transform:"rotate(".concat(30*t+(t<6?180:-180),"deg)"),"animation-delay":e*t/n-e+"ms"}}}}}},oXKM:function(e,t,r){"use strict";r.d(t,"a",function(){return d});var i=r("fXoL"),a=r("TEn/"),c=r("sYmb"),s=r("8Xdb"),u=r("ofXK");function l(e,t){1&e&&i.Lb(0,"ion-icon",5)}function p(e,t){if(1&e){var n=i.Ob();i.Nb(0,"ion-item",1),i.Vb("click",function(){i.jc(n);var e=t.$implicit;return i.Xb().select(e.value)}),i.Lb(1,"img",2),i.Nb(2,"ion-label",3),i.pc(3),i.Mb(),i.oc(4,l,1,0,"ion-icon",4),i.Mb()}if(2&e){var r=t.$implicit,o=i.Xb();i.zb(1),i.dc("src",r.img,i.lc),i.zb(2),i.rc(" ",r.text," "),i.zb(1),i.dc("ngIf",r.value==o.selected)}}var d=function(){var e=function(){function e(t,r,o){n(this,e),this.popoverController=t,this.translate=r,this.accountService=o,this.selected="",this.languages=[{text:"\u0411\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438",value:"bg",img:"../../assets/bulgaria.png"},{text:"English",value:"en",img:"../../assets/english.png"}]}return o(e,[{key:"ngOnInit",value:function(){}},{key:"select",value:function(e){this.translate.use(e),this.selected=e,this.accountService.userValue&&(this.accountService.userValue.choosenLanguage=e,this.accountService.updateLanguage(this.accountService.userValue.id,e).subscribe(function(){})),this.popoverController.dismiss()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i.Kb(a.H),i.Kb(c.d),i.Kb(s.a))},e.\u0275cmp=i.Eb({type:e,selectors:[["app-language-popover"]],decls:2,vars:1,consts:[["button","","detail","false",3,"click",4,"ngFor","ngForOf"],["button","","detail","false",3,"click"],["height","25","width","25","slot","start",3,"src"],["text-wrap",""],["slot","end","name","checkmark",4,"ngIf"],["slot","end","name","checkmark"]],template:function(e,t){1&e&&(i.Nb(0,"ion-list"),i.oc(1,p,5,3,"ion-item",0),i.Mb()),2&e&&(i.zb(1),i.dc("ngForOf",t.languages))},directives:[a.q,u.k,a.o,a.p,u.l,a.m],styles:[""]}),e}()},qULd:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return a}),n.d(t,"c",function(){return o}),n.d(t,"d",function(){return s}),n.d(t,"e",function(){return c});var r={getEngine:function(){var e=window;return e.TapticEngine||e.Capacitor&&e.Capacitor.isPluginAvailable("Haptics")&&e.Capacitor.Plugins.Haptics},available:function(){return!!this.getEngine()},isCordova:function(){return!!window.TapticEngine},isCapacitor:function(){return!!window.Capacitor},impact:function(e){var t=this.getEngine();if(t){var n=this.isCapacitor()?e.style.toUpperCase():e.style;t.impact({style:n})}},notification:function(e){var t=this.getEngine();if(t){var n=this.isCapacitor()?e.style.toUpperCase():e.style;t.notification({style:n})}},selection:function(){this.impact({style:"light"})},selectionStart:function(){var e=this.getEngine();e&&(this.isCapacitor()?e.selectionStart():e.gestureSelectionStart())},selectionChanged:function(){var e=this.getEngine();e&&(this.isCapacitor()?e.selectionChanged():e.gestureSelectionChanged())},selectionEnd:function(){var e=this.getEngine();e&&(this.isCapacitor()?e.selectionEnd():e.gestureSelectionEnd())}},o=function(){r.selection()},i=function(){r.selectionStart()},a=function(){r.selectionChanged()},c=function(){r.selectionEnd()},s=function(e){r.impact(e)}}}])}();