(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{odG3:function(t,e,n){"use strict";n.r(e),n.d(e,"HttpLoaderFactory",function(){return y}),n.d(e,"DriverHistoryPageModule",function(){return P});var o=n("ofXK"),i=n("3Pt+"),r=n("TEn/"),b=n("tyNb"),c=n("mrSG"),s=n("Gpoy"),a=n("AytR"),l=n("oXKM"),d=n("fXoL"),u=n("exMm"),p=n("8Xdb"),g=n("sYmb");function M(t,e){if(1&t&&(d.Nb(0,"div",11),d.Nb(1,"a",12),d.Nb(2,"div",13),d.Nb(3,"h5",14),d.pc(4),d.Yb(5,"translate"),d.Mb(),d.Nb(6,"small"),d.pc(7),d.Yb(8,"date"),d.Mb(),d.Mb(),d.Nb(9,"p",16),d.pc(10),d.Yb(11,"translate"),d.Mb(),d.Nb(12,"p",16),d.pc(13),d.Yb(14,"translate"),d.Mb(),d.Nb(15,"p",16),d.pc(16),d.Yb(17,"translate"),d.Mb(),d.Nb(18,"p",16),d.pc(19),d.Yb(20,"translate"),d.Mb(),d.Nb(21,"div",6),d.Nb(22,"div",17),d.Nb(23,"small",9),d.pc(24),d.Yb(25,"translate"),d.Mb(),d.Mb(),d.Mb(),d.Mb(),d.Mb()),2&t){const t=e.$implicit;d.zb(4),d.qc(d.Zb(5,13,"Order details")),d.zb(3),d.qc(d.ac(8,15,t.createdOn,"MM/dd/yyyy h:mm")),d.zb(3),d.tc("",d.Zb(11,18,"Passenger"),": ",t.applicationUser.firstName," ",t.applicationUser.lastName,""),d.zb(3),d.sc("",d.Zb(14,20,"Phone number"),": ",t.applicationUser.phone,""),d.zb(3),d.sc("",d.Zb(17,22,"Location"),": ",t.location,""),d.zb(3),d.sc("",d.Zb(20,24,"Destination"),": ",t.destination,""),d.zb(5),d.sc("",d.Zb(25,26,"Profit"),": ",t.totalPrice," \u043b\u0432.")}}const h=[{path:"",component:(()=>{class t{constructor(t,e,n,o,i){this.driverService=t,this.accountService=e,this.alertController=n,this.popoverController=o,this.translate=i,this.subscriptions=[],this.orders=[],this.userId=this.accountService.userValue.id,this.currentDate=new Date,this.translate.setDefaultLang(this.accountService.userValue.choosenLanguage)}ngOnInit(){this.getHistory();const t=(new s.b).configureLogging(s.c.Information).withUrl(`${a.a.signalRUrl}/orderHub`).build();t.start().then(function(){console.log("signalR Connected in history")}).catch(function(t){return console.log(t.toString())}),t.on("BroadcastMessage",()=>{this.getHistory()})}ionViewDidLeave(){for(const t of this.subscriptions)console.log(t),t.unsubscribe()}getHistory(){this.subscriptions.push(this.driverService.getDriverHistory(this.userId).subscribe(t=>{if(null==this.orders)return void console.log("No orders");this.orders=t;let e=0;t.forEach(t=>{e+=t.totalPrice}),this.dailyProfit=e.toFixed(2)}))}openLanguagePopover(t){return Object(c.a)(this,void 0,void 0,function*(){const e=yield this.popoverController.create({component:l.a,event:t});yield e.present()})}}return t.\u0275fac=function(e){return new(e||t)(d.Kb(u.a),d.Kb(p.a),d.Kb(r.a),d.Kb(r.H),d.Kb(g.d))},t.\u0275cmp=d.Eb({type:t,selectors:[["app-driver-history"]],decls:37,vars:18,consts:[["slot","start"],["slot","end"],["id","toolbarIcon","name","language-outline",3,"click"],["padding","",1,"background"],[1,"row","mt-2"],[1,"col"],[1,"row"],[1,"col-md-12","text-center"],[1,"centered"],[1,"text"],[1,"col-md-10"],[1,"list-group","mt-2"],[1,"text","list-group-item","list-group-item-action","flex-column","align-items-start"],[1,"d-flex","w-100","justify-content-between"],[1,"text","mb-1"],["class","list-group mt-2",4,"ngFor","ngForOf"],[1,"mb-1","text"],[1,"col-md-12"]],template:function(t,e){1&t&&(d.Nb(0,"ion-header"),d.Nb(1,"ion-toolbar"),d.Nb(2,"ion-buttons",0),d.Lb(3,"ion-menu-button"),d.Mb(),d.Nb(4,"ion-title"),d.Nb(5,"ion-label"),d.pc(6,"Cyber"),d.Mb(),d.Mb(),d.Nb(7,"ion-buttons",1),d.Nb(8,"ion-icon",2),d.Vb("click",function(t){return e.openLanguagePopover(t)}),d.Mb(),d.Mb(),d.Mb(),d.Mb(),d.Nb(9,"ion-content",3),d.Nb(10,"div",4),d.Nb(11,"div",5),d.Nb(12,"div",6),d.Nb(13,"div",7),d.Nb(14,"ion-text",8),d.Nb(15,"h2",9),d.pc(16),d.Yb(17,"translate"),d.Mb(),d.Lb(18,"hr"),d.Mb(),d.Mb(),d.Nb(19,"div",10),d.Nb(20,"div",11),d.Nb(21,"a",12),d.Nb(22,"div",13),d.Nb(23,"h5",14),d.pc(24),d.Yb(25,"translate"),d.Mb(),d.Nb(26,"small"),d.pc(27),d.Yb(28,"translate"),d.Yb(29,"date"),d.Mb(),d.Mb(),d.Nb(30,"div",6),d.Nb(31,"div",7),d.Nb(32,"h5",9),d.pc(33),d.Yb(34,"translate"),d.Mb(),d.Mb(),d.Mb(),d.Mb(),d.Mb(),d.Mb(),d.Nb(35,"div",10),d.oc(36,M,26,28,"div",15),d.Mb(),d.Mb(),d.Mb(),d.Mb(),d.Mb()),2&t&&(d.zb(16),d.qc(d.Zb(17,7,"My history")),d.zb(8),d.qc(d.Zb(25,9,"Daily earnings")),d.zb(3),d.sc("",d.Zb(28,11,"Today"),": ",d.ac(29,13,e.currentDate,"MM/dd/yyyy h:mm"),""),d.zb(6),d.sc("",d.Zb(34,16,"Total"),": ",e.dailyProfit," \u043b\u0432."),d.zb(3),d.dc("ngForOf",e.orders))},directives:[r.l,r.B,r.e,r.s,r.A,r.p,r.m,r.i,r.z,o.k],pipes:[g.c,o.d],styles:["ion-content[_ngcontent-%COMP%]{--ion-background-color:#e9e9e9}ion-toolbar[_ngcontent-%COMP%]{--ion-background-color:#eee}ion-title[_ngcontent-%COMP%]{text-align:center}#toolbarIcon[_ngcontent-%COMP%]{font-size:1.7em}.text[_ngcontent-%COMP%]{font-family:Open Sans Light}.centered[_ngcontent-%COMP%]{text-align:center}hr[_ngcontent-%COMP%]{background:#eee;width:70%!important}.backIcon[_ngcontent-%COMP%]{font-size:150%}.back[_ngcontent-%COMP%], .backIcon[_ngcontent-%COMP%]{color:#ffae00}"]}),t})()}];let f=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=d.Ib({type:t}),t.\u0275inj=d.Hb({imports:[[b.h.forChild(h)],b.h]}),t})();var m=n("tk/3"),v=n("mqiu"),N=n("QhVT");function y(t){return new v.a(t)}let P=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=d.Ib({type:t}),t.\u0275inj=d.Hb({imports:[[o.b,i.e,r.C,f,g.b.forChild({loader:{provide:g.a,useFactory:y,deps:[m.a]}}),N.LanguagePopoverPageModule]]}),t})()}}]);