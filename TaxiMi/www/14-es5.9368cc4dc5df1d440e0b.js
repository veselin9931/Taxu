!function(){function e(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){s=!0,a=e},f:function(){try{c||null==n.return||n.return()}finally{if(s)throw a}}}}function r(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function t(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function n(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,r,t){return r&&n(e.prototype,r),t&&n(e,t),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"8k+r":function(e,r,n){"use strict";n.d(r,"a",function(){return p});var i=n("z6cu"),a=n("JIr8"),c=n("vkgz"),s=n("AytR"),u=n("fXoL"),h=n("tk/3"),l=n("Dsd+"),p=function(){var e=function(){function e(r,n){t(this,e),this.http=r,this.sharedService=n,this.orders=[],this.completedOrder=!1}return o(e,[{key:"createOrder",value:function(e){var r=this.sharedService.headerGerneration();return this.http.post("".concat(s.a.apiUrl,"/api/order"),e,{headers:r,responseType:"text"}).pipe(Object(a.a)(this.handleError))}},{key:"addToFavourites",value:function(e){var r=this.sharedService.headerGerneration();return this.http.post("".concat(s.a.apiUrl,"/api/order/favourites"),e,{headers:r,responseType:"text"}).pipe(Object(a.a)(this.handleError))}},{key:"getMyFavourites",value:function(e){var r=this.sharedService.headerGerneration();return this.http.get("".concat(s.a.apiUrl,"/api/order/favourites/").concat(e),{headers:r}).pipe(Object(a.a)(this.handleError))}},{key:"deleteFavouriteOrder",value:function(e){var r=this.sharedService.headerGerneration();return this.http.delete("".concat(s.a.apiUrl,"/api/order/favourites/").concat(e),{headers:r}).pipe(Object(c.a)(function(e){return console.log("deleted favourite order: ",JSON.stringify(e))}),Object(a.a)(this.handleError))}},{key:"getDirections",value:function(e,r,t,n){var o=this.sharedService.headerGerneration();return this.http.post("https://maps.googleapis.com/maps/api/distancematrix/json?units=imperial&origins=".concat(e,",").concat(r,"&destinations=").concat(t,"%2C").concat(n,"%7C&key=AIzaSyAEvlXdM4joG4bNVT5l-tJSk9lUSGhxMNw"),{headers:o,responseType:"text"}).pipe(Object(a.a)(this.handleError))}},{key:"getOrderById",value:function(e){var r=this,t=this.sharedService.headerGerneration();return this.http.get("".concat(s.a.apiUrl,"/api/order/id/").concat(e),{headers:t}).pipe(Object(c.a)(function(e){return r.order=e}))}},{key:"getCanceledOrderById",value:function(e){var r=this,t=this.sharedService.headerGerneration();return this.http.get("".concat(s.a.apiUrl,"/api/order/canceled/").concat(e),{headers:t}).pipe(Object(c.a)(function(e){return r.order=e}))}},{key:"getLastCompletedOrder",value:function(e){var r=this.sharedService.headerGerneration();return this.http.get("".concat(s.a.apiUrl,"/api/order/completed/").concat(e),{headers:r}).pipe(Object(a.a)(this.handleError))}},{key:"getMyOrder",value:function(e){var r=this.sharedService.headerGerneration();return this.http.get("".concat(s.a.apiUrl,"/api/order/").concat(e),{headers:r}).pipe(Object(a.a)(this.handleError))}},{key:"getOrderForChat",value:function(e){var r=this.sharedService.headerGerneration();return this.http.get("".concat(s.a.apiUrl,"/api/order/chat/").concat(e),{headers:r}).pipe(Object(a.a)(this.handleError))}},{key:"getAllOrders",value:function(){var e=this.sharedService.headerGerneration();return this.http.get("".concat(s.a.apiUrl,"/api/order"),{headers:e}).pipe(Object(a.a)(this.handleError))}},{key:"getNormalOrders",value:function(){var e=this.sharedService.headerGerneration();return this.http.get("".concat(s.a.apiUrl,"/api/order/normal"),{headers:e}).pipe(Object(a.a)(this.handleError))}},{key:"getComfortOrders",value:function(){var e=this.sharedService.headerGerneration();return this.http.get("".concat(s.a.apiUrl,"/api/order/comfort"),{headers:e}).pipe(Object(a.a)(this.handleError))}},{key:"acceptOrder",value:function(e,r){var t=this,n=this.sharedService.headerGerneration();return this.http.put("".concat(s.a.apiUrl,"/api/order/").concat(e,"/").concat(r),{headers:n,responseType:"json"}).pipe(Object(c.a)(function(e){return t.driverId=r}),Object(a.a)(this.handleError))}},{key:"updateOrderEta",value:function(e,r){var t=this.sharedService.headerGerneration();return this.http.put("".concat(s.a.apiUrl,"/api/order/eta/").concat(e,"/").concat(r),{headers:t,responseType:"json"}).pipe(Object(a.a)(this.handleError))}},{key:"updateDriverArrived",value:function(e){var r=this.sharedService.headerGerneration();return this.http.put("".concat(s.a.apiUrl,"/api/order/arrived/").concat(e),{headers:r,responseType:"json"}).pipe(Object(a.a)(this.handleError))}},{key:"rateOrder",value:function(e){var r=this.sharedService.headerGerneration();return this.http.put("".concat(s.a.apiUrl,"/api/order/rate/").concat(e),{headers:r,responseType:"json"}).pipe(Object(a.a)(this.handleError))}},{key:"increaseOrderPrice",value:function(e,r){var t=this.sharedService.headerGerneration();return this.http.put("".concat(s.a.apiUrl,"/api/order/increase/").concat(e,"/").concat(r),{headers:t,responseType:"json"}).pipe(Object(a.a)(this.handleError))}},{key:"completeOrder",value:function(e){var r=this.sharedService.headerGerneration();return this.http.put("".concat(s.a.apiUrl,"/api/order/").concat(e),{headers:r,responseType:"json"}).pipe(Object(a.a)(this.handleError))}},{key:"deleteOrder",value:function(e){var r=this.sharedService.headerGerneration();return this.http.delete("".concat(s.a.apiUrl,"/api/order/").concat(e),{headers:r}).pipe(Object(c.a)(function(e){return console.log("deleted order: ",JSON.stringify(e))}),Object(a.a)(this.handleError))}},{key:"driverIncreaseOrderPrice",value:function(e,r,t){var n=this.sharedService.headerGerneration();return this.http.put("".concat(s.a.apiUrl,"/api/order/increased/").concat(e,"/").concat(r,"/").concat(t),{headers:n,responseType:"json"}).pipe(Object(a.a)(this.handleError))}},{key:"resetIncreasing",value:function(e){var r=this.sharedService.headerGerneration();return this.http.put("".concat(s.a.apiUrl,"/api/order/reset/").concat(e),{headers:r,responseType:"json"}).pipe(Object(a.a)(this.handleError))}},{key:"increasedOrderAccept",value:function(e,r){var t=this.sharedService.headerGerneration();return this.http.put("".concat(s.a.apiUrl,"/api/order/accepted/increase/").concat(e,"/").concat(r),{headers:t,responseType:"json"}).pipe(Object(a.a)(this.handleError))}},{key:"incrementOrderPrice",value:function(e){var r=this.sharedService.headerGerneration();return this.http.put("".concat(s.a.apiUrl,"/api/order/increment/").concat(e),{headers:r,responseType:"json"}).pipe(Object(a.a)(this.handleError))}},{key:"decrementOrderPrice",value:function(e){var r=this.sharedService.headerGerneration();return this.http.put("".concat(s.a.apiUrl,"/api/order/decrement/").concat(e),{headers:r,responseType:"json"}).pipe(Object(a.a)(this.handleError))}},{key:"handleError",value:function(e){var r="";return e.error instanceof ErrorEvent?(console.log("Client side error."),r="Error: ".concat(e.error.message)):(console.log("Server side error."),r="Error Code: ".concat(e.status,"\nMessage: ").concat(e.message)),console.log(r),Object(i.a)(r)}}]),e}();return e.\u0275fac=function(r){return new(r||e)(u.Rb(h.a),u.Rb(l.a))},e.\u0275prov=u.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},kMJQ:function(r,n,i){"use strict";i.r(n),i.d(n,"HttpLoaderFactory",function(){return G}),i.d(n,"CategoriesPageModule",function(){return T});var a=i("ofXK"),c=i("3Pt+"),s=i("TEn/"),u=i("tyNb"),h=i("mrSG"),l=i("Gpoy"),p=i("AytR"),d=i("oXKM"),b=i("fXoL"),v=i("sYmb"),f=i("8Xdb"),g=i("exMm"),y=i("8k+r");function m(e,r){1&e&&(b.Nb(0,"ion-title"),b.Nb(1,"ion-label"),b.pc(2),b.Yb(3,"translate"),b.Mb(),b.Mb()),2&e&&(b.zb(2),b.qc(b.Zb(3,1,"Categories")))}function O(e,r){if(1&e&&(b.Nb(0,"ion-chip"),b.pc(1),b.Mb()),2&e){var t=b.Xb();b.zb(1),b.qc(t.driverService.categoryCloseCount)}}function k(e,r){if(1&e&&(b.Nb(0,"ion-chip"),b.pc(1),b.Mb()),2&e){var t=b.Xb();b.zb(1),b.qc(t.allCount)}}var C,S,M=[{path:"",component:(C=function(){function r(e,n,o,i,a,c){t(this,r),this.popoverController=e,this.translate=n,this.accountService=o,this.route=i,this.driverService=a,this.orderService=c,this.subscriptions=[],this.isDrivingNow=this.accountService.userValue.isDrivingNow,this.translate.setDefaultLang(this.accountService.userValue.choosenLanguage)}return o(r,[{key:"ngOnInit",value:function(){var e=this;this.getNormalCount(),this.getComfortCount(),this.getAllCount();var r=(new l.b).configureLogging(l.c.Information).withUrl("".concat(p.a.signalRUrl,"/orderHub")).build();r.start().then(function(){console.log("signalR Connected in travelling")}).catch(function(e){return console.log(e)}),r.on("BroadcastMessage",function(){e.getNormalCount(),e.getComfortCount(),e.getAllCount()}),1==this.isDrivingNow&&this.route.navigate(["menu/driving"])}},{key:"all",value:function(){this.driverService.categoryType="All",this.route.navigate(["menu/driving"])}},{key:"closest",value:function(){this.driverService.categoryType="Closest",this.route.navigate(["menu/driving"])}},{key:"normal",value:function(){this.driverService.categoryType="Normal",this.route.navigate(["menu/driving"])}},{key:"comfort",value:function(){this.driverService.categoryType="Comfort",this.route.navigate(["menu/driving"])}},{key:"outOfTown",value:function(){this.driverService.categoryType="Out of town",this.route.navigate(["menu/driving"])}},{key:"booked",value:function(){this.route.navigate(["menu/booked-travels"])}},{key:"getNormalCount",value:function(){var e=this;this.subscriptions.push(this.orderService.getNormalOrders().subscribe(function(r){return e.normalCount=r.length}))}},{key:"getComfortCount",value:function(){var e=this;this.subscriptions.push(this.orderService.getComfortOrders().subscribe(function(r){return e.comfortCount=r.length}))}},{key:"getAllCount",value:function(){var e=this;this.subscriptions.push(this.orderService.getAllOrders().subscribe(function(r){return e.allCount=r.length}))}},{key:"openLanguagePopover",value:function(e){return Object(h.a)(this,void 0,void 0,regeneratorRuntime.mark(function r(){var t;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.popoverController.create({component:d.a,event:e});case 2:return t=r.sent,r.next=5,t.present();case 5:case"end":return r.stop()}},r,this)}))}},{key:"ionViewDidLeave",value:function(){var r,t=e(this.subscriptions);try{for(t.s();!(r=t.n()).done;){var n=r.value;console.log(n),n.unsubscribe()}}catch(o){t.e(o)}finally{t.f()}}}]),r}(),C.\u0275fac=function(e){return new(e||C)(b.Kb(s.H),b.Kb(v.d),b.Kb(f.a),b.Kb(u.f),b.Kb(g.a),b.Kb(y.a))},C.\u0275cmp=b.Eb({type:C,selectors:[["app-categories"]],decls:47,vars:24,consts:[["slot","start"],[4,"ngIf"],["slot","end"],["id","toolbarIcon","name","language-outline",3,"click"],["padding","",1,"background"],[1,"row","mt-2","text-center"],[1,"col-md-12"],[3,"click"]],template:function(e,r){1&e&&(b.Nb(0,"ion-header"),b.Nb(1,"ion-toolbar"),b.Nb(2,"ion-buttons",0),b.Lb(3,"ion-menu-button"),b.Mb(),b.oc(4,m,4,3,"ion-title",1),b.Nb(5,"ion-buttons",2),b.Nb(6,"ion-icon",3),b.Vb("click",function(e){return r.openLanguagePopover(e)}),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Nb(7,"ion-content",4),b.Nb(8,"div",5),b.Nb(9,"div",6),b.Nb(10,"ion-list"),b.Nb(11,"ion-item",7),b.Vb("click",function(){return r.all()}),b.Nb(12,"ion-label"),b.pc(13),b.Yb(14,"translate"),b.Mb(),b.Nb(15,"ion-chip"),b.pc(16),b.Mb(),b.Mb(),b.Nb(17,"ion-item",7),b.Vb("click",function(){return r.closest()}),b.Nb(18,"ion-label"),b.pc(19),b.Yb(20,"translate"),b.Mb(),b.oc(21,O,2,1,"ion-chip",1),b.oc(22,k,2,1,"ion-chip",1),b.Mb(),b.Nb(23,"ion-item",7),b.Vb("click",function(){return r.normal()}),b.Nb(24,"ion-label"),b.pc(25),b.Yb(26,"translate"),b.Mb(),b.Nb(27,"ion-chip"),b.pc(28),b.Mb(),b.Mb(),b.Nb(29,"ion-item",7),b.Vb("click",function(){return r.comfort()}),b.Nb(30,"ion-label"),b.pc(31),b.Yb(32,"translate"),b.Mb(),b.Nb(33,"ion-chip"),b.pc(34),b.Mb(),b.Mb(),b.Nb(35,"ion-item",7),b.Vb("click",function(){return r.outOfTown()}),b.Nb(36,"ion-label"),b.pc(37),b.Yb(38,"translate"),b.Mb(),b.Nb(39,"ion-chip"),b.pc(40,"0"),b.Mb(),b.Mb(),b.Nb(41,"ion-item",7),b.Vb("click",function(){return r.booked()}),b.Nb(42,"ion-label"),b.pc(43),b.Yb(44,"translate"),b.Mb(),b.Nb(45,"ion-chip"),b.pc(46,"0"),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Mb()),2&e&&(b.zb(4),b.dc("ngIf",0==r.isDrivingNow),b.zb(9),b.qc(b.Zb(14,12,"All")),b.zb(3),b.qc(r.allCount),b.zb(3),b.qc(b.Zb(20,14,"Closest")),b.zb(2),b.dc("ngIf",null!=r.driverService.categoryCloseCount),b.zb(1),b.dc("ngIf",null==r.driverService.categoryCloseCount),b.zb(3),b.qc(b.Zb(26,16,"Normal")),b.zb(3),b.qc(r.normalCount),b.zb(3),b.qc(b.Zb(32,18,"Comfort")),b.zb(3),b.qc(r.comfortCount),b.zb(3),b.qc(b.Zb(38,20,"Out of town")),b.zb(6),b.qc(b.Zb(44,22,"Booked")))},directives:[s.l,s.B,s.e,s.s,a.l,s.m,s.i,s.q,s.o,s.p,s.h,s.A],pipes:[v.c],styles:["ion-content[_ngcontent-%COMP%], ion-toolbar[_ngcontent-%COMP%]{--ion-background-color:#eee}ion-title[_ngcontent-%COMP%]{text-align:center}#toolbarIcon[_ngcontent-%COMP%]{font-size:1.7em}.fonted[_ngcontent-%COMP%]{font-family:Open Sans Light}.centered[_ngcontent-%COMP%]{text-align:center}.text[_ngcontent-%COMP%]{font-family:Open Sans Light}hr[_ngcontent-%COMP%]{background:#eee;width:70%!important}"]}),C)}],j=((S=function e(){t(this,e)}).\u0275fac=function(e){return new(e||S)},S.\u0275mod=b.Ib({type:S}),S.\u0275inj=b.Hb({imports:[[u.h.forChild(M)],u.h]}),S),N=i("tk/3"),w=i("mqiu"),E=i("QhVT");function G(e){return new w.a(e)}var U,T=((U=function e(){t(this,e)}).\u0275fac=function(e){return new(e||U)},U.\u0275mod=b.Ib({type:U}),U.\u0275inj=b.Hb({imports:[[a.b,c.e,s.C,j,v.b.forChild({loader:{provide:v.a,useFactory:G,deps:[N.a]}}),E.LanguagePopoverPageModule]]}),U)}}])}();