!function(){function t(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var o=0,i=function(){};return{s:i,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return c=t.done,t},e:function(t){s=!0,a=t},f:function(){try{c||null==r.return||r.return()}finally{if(s)throw a}}}}function n(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function e(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function r(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(self.webpackChunkcsharpcornerauthor=self.webpackChunkcsharpcornerauthor||[]).push([[2744],{2744:function(n,o,i){"use strict";i.r(o),i.d(o,{DriverHistoryPageModule:function(){return _},HttpLoaderFactory:function(){return w}});var a=i(8583),c=i(3679),s=i(7823),u=i(4481),l=i(4762),g=i(4426),f=i(2340),d=i(6522),Z=i(3018),p=i(1799),h=i(5056),v=i(7800);function A(t,n){if(1&t&&(Z.TgZ(0,"div",11),Z.TgZ(1,"a",12),Z.TgZ(2,"div",13),Z.TgZ(3,"h5",14),Z._uU(4),Z.ALo(5,"translate"),Z.qZA(),Z.TgZ(6,"small"),Z._uU(7),Z.ALo(8,"date"),Z.qZA(),Z.qZA(),Z.TgZ(9,"p",16),Z._uU(10),Z.ALo(11,"translate"),Z.qZA(),Z.TgZ(12,"p",16),Z._uU(13),Z.ALo(14,"translate"),Z.qZA(),Z.TgZ(15,"p",16),Z._uU(16),Z.ALo(17,"translate"),Z.qZA(),Z.TgZ(18,"p",16),Z._uU(19),Z.ALo(20,"translate"),Z.qZA(),Z.TgZ(21,"div",6),Z.TgZ(22,"div",17),Z.TgZ(23,"small",9),Z._uU(24),Z.ALo(25,"translate"),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA()),2&t){var e=n.$implicit;Z.xp6(4),Z.Oqu(Z.lcZ(5,13,"Order details")),Z.xp6(3),Z.Oqu(Z.xi3(8,15,e.createdOn,"MM/dd/yyyy h:mm")),Z.xp6(3),Z.lnq("",Z.lcZ(11,18,"Passenger"),": ",e.applicationUser.firstName," ",e.applicationUser.lastName,""),Z.xp6(3),Z.AsE("",Z.lcZ(14,20,"Phone number"),": ",e.applicationUser.phone,""),Z.xp6(3),Z.AsE("",Z.lcZ(17,22,"Location"),": ",e.location,""),Z.xp6(3),Z.AsE("",Z.lcZ(20,24,"Destination"),": ",e.destination,""),Z.xp6(5),Z.AsE("",Z.lcZ(25,26,"Profit"),": ",e.totalPrice," \u043b\u0432.")}}var m,y=[{path:"",component:(m=function(){function n(t,r,o,i){e(this,n),this.driverService=t,this.accountService=r,this.popoverController=o,this.translate=i,this.subscriptions=[],this.orders=[],this.userId=this.accountService.userValue.id,this.currentDate=new Date,this.translate.setDefaultLang(this.accountService.userValue.choosenLanguage)}var o,i,a;return o=n,(i=[{key:"ngOnInit",value:function(){var t=this;this.getHistory();var n=(new g.su).configureLogging(g.in.Information).withUrl("".concat(f.N.signalRUrl,"/orderHub")).build();n.start().then(function(){console.log("signalR Connected in history")}).catch(function(t){return console.log(t.toString())}),n.on("BroadcastMessage",function(){t.getHistory()})}},{key:"ionViewDidLeave",value:function(){var n,e=t(this.subscriptions);try{for(e.s();!(n=e.n()).done;){var r=n.value;console.log(r),r.unsubscribe()}}catch(o){e.e(o)}finally{e.f()}}},{key:"getHistory",value:function(){var t=this;this.subscriptions.push(this.driverService.getDriverHistory(this.userId).subscribe(function(n){if(null!=t.orders){t.orders=n;var e=0;n.forEach(function(t){e+=t.totalPrice}),t.dailyProfit=e.toFixed(2)}else console.log("No orders")}))}},{key:"openLanguagePopover",value:function(t){return(0,l.mG)(this,void 0,void 0,regeneratorRuntime.mark(function n(){var e;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.popoverController.create({component:d.m,event:t});case 2:return e=n.sent,n.next=5,e.present();case 5:case"end":return n.stop()}},n,this)}))}}])&&r(o.prototype,i),a&&r(o,a),n}(),m.\u0275fac=function(t){return new(t||m)(Z.Y36(p.F),Z.Y36(h.B),Z.Y36(s.Dh),Z.Y36(v.sK))},m.\u0275cmp=Z.Xpm({type:m,selectors:[["app-driver-history"]],decls:37,vars:18,consts:[["slot","start"],["slot","end"],["id","toolbarIcon","name","language-outline",3,"click"],["padding","",1,"background"],[1,"row","mt-2"],[1,"col"],[1,"row"],[1,"col-md-12","text-center"],[1,"centered"],[1,"text"],[1,"col-md-10"],[1,"list-group","mt-2"],[1,"text","list-group-item","list-group-item-action","flex-column","align-items-start"],[1,"d-flex","w-100","justify-content-between"],[1,"text","mb-1"],["class","list-group mt-2",4,"ngFor","ngForOf"],[1,"mb-1","text"],[1,"col-md-12"]],template:function(t,n){1&t&&(Z.TgZ(0,"ion-header"),Z.TgZ(1,"ion-toolbar"),Z.TgZ(2,"ion-buttons",0),Z._UZ(3,"ion-menu-button"),Z.qZA(),Z.TgZ(4,"ion-title"),Z.TgZ(5,"ion-label"),Z._uU(6,"Cyber"),Z.qZA(),Z.qZA(),Z.TgZ(7,"ion-buttons",1),Z.TgZ(8,"ion-icon",2),Z.NdJ("click",function(t){return n.openLanguagePopover(t)}),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(9,"ion-content",3),Z.TgZ(10,"div",4),Z.TgZ(11,"div",5),Z.TgZ(12,"div",6),Z.TgZ(13,"div",7),Z.TgZ(14,"ion-text",8),Z.TgZ(15,"h2",9),Z._uU(16),Z.ALo(17,"translate"),Z.qZA(),Z._UZ(18,"hr"),Z.qZA(),Z.qZA(),Z.TgZ(19,"div",10),Z.TgZ(20,"div",11),Z.TgZ(21,"a",12),Z.TgZ(22,"div",13),Z.TgZ(23,"h5",14),Z._uU(24),Z.ALo(25,"translate"),Z.qZA(),Z.TgZ(26,"small"),Z._uU(27),Z.ALo(28,"translate"),Z.ALo(29,"date"),Z.qZA(),Z.qZA(),Z.TgZ(30,"div",6),Z.TgZ(31,"div",7),Z.TgZ(32,"h5",9),Z._uU(33),Z.ALo(34,"translate"),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(35,"div",10),Z.YNc(36,A,26,28,"div",15),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA()),2&t&&(Z.xp6(16),Z.Oqu(Z.lcZ(17,7,"My history")),Z.xp6(8),Z.Oqu(Z.lcZ(25,9,"Daily earnings")),Z.xp6(3),Z.AsE("",Z.lcZ(28,11,"Today"),": ",Z.xi3(29,13,n.currentDate,"MM/dd/yyyy h:mm"),""),Z.xp6(6),Z.AsE("",Z.lcZ(34,16,"Total"),": ",n.dailyProfit," \u043b\u0432."),Z.xp6(3),Z.Q6J("ngForOf",n.orders))},directives:[s.Gu,s.sr,s.Sm,s.fG,s.wd,s.Q$,s.gu,s.W2,s.yW,a.sg],pipes:[v.X$,a.uU],styles:["ion-content[_ngcontent-%COMP%]{--ion-background-color:#e9e9e9}ion-toolbar[_ngcontent-%COMP%]{--ion-background-color:#eee}ion-title[_ngcontent-%COMP%]{text-align:center}#toolbarIcon[_ngcontent-%COMP%]{font-size:1.7em}.text[_ngcontent-%COMP%]{font-family:Open Sans Light}.centered[_ngcontent-%COMP%]{text-align:center}hr[_ngcontent-%COMP%]{background:#eee;width:70%!important}.backIcon[_ngcontent-%COMP%]{font-size:150%}.back[_ngcontent-%COMP%], .backIcon[_ngcontent-%COMP%]{color:#ffae00}"]}),m)}],b=function(){var t=function t(){e(this,t)};return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Z.oAB({type:t}),t.\u0275inj=Z.cJS({imports:[[u.Bz.forChild(y)],u.Bz]}),t}(),q=i(1841),T=i(2472),x=i(3577);function w(t){return new T.w(t)}var P,_=((P=function t(){e(this,t)}).\u0275fac=function(t){return new(t||P)},P.\u0275mod=Z.oAB({type:P}),P.\u0275inj=Z.cJS({imports:[[a.ez,c.u5,s.Pc,b,v.aw.forChild({loader:{provide:v.Zw,useFactory:w,deps:[q.eN]}}),x.LanguagePopoverPageModule]]}),P)}}])}();