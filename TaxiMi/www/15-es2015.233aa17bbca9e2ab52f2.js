(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"8k+r":function(e,r,t){"use strict";t.d(r,"a",function(){return h});var i=t("z6cu"),n=t("JIr8"),o=t("vkgz"),s=t("AytR"),a=t("fXoL"),c=t("tk/3"),d=t("Dsd+");let h=(()=>{class e{constructor(e,r){this.http=e,this.sharedService=r,this.orders=[],this.completedOrder=!1}createOrder(e){const r=this.sharedService.headerGerneration();return this.http.post(`${s.a.apiUrl}/api/order`,e,{headers:r,responseType:"text"}).pipe(Object(n.a)(this.handleError))}addToFavourites(e){const r=this.sharedService.headerGerneration();return this.http.post(`${s.a.apiUrl}/api/order/favourites`,e,{headers:r,responseType:"text"}).pipe(Object(n.a)(this.handleError))}getMyFavourites(e){const r=this.sharedService.headerGerneration();return this.http.get(`${s.a.apiUrl}/api/order/favourites/${e}`,{headers:r}).pipe(Object(n.a)(this.handleError))}deleteFavouriteOrder(e){const r=this.sharedService.headerGerneration();return this.http.delete(`${s.a.apiUrl}/api/order/favourites/${e}`,{headers:r}).pipe(Object(o.a)(e=>console.log("deleted favourite order: ",JSON.stringify(e))),Object(n.a)(this.handleError))}getDirections(e,r,t,i){const o=this.sharedService.headerGerneration();return this.http.post(`https://maps.googleapis.com/maps/api/distancematrix/json?units=imperial&origins=${e},${r}&destinations=${t}%2C${i}%7C&key=AIzaSyAEvlXdM4joG4bNVT5l-tJSk9lUSGhxMNw`,{headers:o,responseType:"text"}).pipe(Object(n.a)(this.handleError))}getOrderById(e){const r=this.sharedService.headerGerneration();return this.http.get(`${s.a.apiUrl}/api/order/id/${e}`,{headers:r}).pipe(Object(o.a)(e=>this.order=e))}getCanceledOrderById(e){const r=this.sharedService.headerGerneration();return this.http.get(`${s.a.apiUrl}/api/order/canceled/${e}`,{headers:r}).pipe(Object(o.a)(e=>this.order=e))}getLastCompletedOrder(e){const r=this.sharedService.headerGerneration();return this.http.get(`${s.a.apiUrl}/api/order/completed/${e}`,{headers:r}).pipe(Object(n.a)(this.handleError))}getMyOrder(e){const r=this.sharedService.headerGerneration();return this.http.get(`${s.a.apiUrl}/api/order/${e}`,{headers:r}).pipe(Object(n.a)(this.handleError))}getOrderForChat(e){const r=this.sharedService.headerGerneration();return this.http.get(`${s.a.apiUrl}/api/order/chat/${e}`,{headers:r}).pipe(Object(n.a)(this.handleError))}getAllOrders(){const e=this.sharedService.headerGerneration();return this.http.get(`${s.a.apiUrl}/api/order`,{headers:e}).pipe(Object(n.a)(this.handleError))}getNormalOrders(){const e=this.sharedService.headerGerneration();return this.http.get(`${s.a.apiUrl}/api/order/normal`,{headers:e}).pipe(Object(n.a)(this.handleError))}getComfortOrders(){const e=this.sharedService.headerGerneration();return this.http.get(`${s.a.apiUrl}/api/order/comfort`,{headers:e}).pipe(Object(n.a)(this.handleError))}acceptOrder(e,r){const t=this.sharedService.headerGerneration();return this.http.put(`${s.a.apiUrl}/api/order/${e}/${r}`,{headers:t,responseType:"json"}).pipe(Object(o.a)(e=>this.driverId=r),Object(n.a)(this.handleError))}updateOrderEta(e,r){const t=this.sharedService.headerGerneration();return this.http.put(`${s.a.apiUrl}/api/order/eta/${e}/${r}`,{headers:t,responseType:"json"}).pipe(Object(n.a)(this.handleError))}updateDriverArrived(e){const r=this.sharedService.headerGerneration();return this.http.put(`${s.a.apiUrl}/api/order/arrived/${e}`,{headers:r,responseType:"json"}).pipe(Object(n.a)(this.handleError))}rateOrder(e){const r=this.sharedService.headerGerneration();return this.http.put(`${s.a.apiUrl}/api/order/rate/${e}`,{headers:r,responseType:"json"}).pipe(Object(n.a)(this.handleError))}increaseOrderPrice(e,r){const t=this.sharedService.headerGerneration();return this.http.put(`${s.a.apiUrl}/api/order/increase/${e}/${r}`,{headers:t,responseType:"json"}).pipe(Object(n.a)(this.handleError))}completeOrder(e){const r=this.sharedService.headerGerneration();return this.http.put(`${s.a.apiUrl}/api/order/${e}`,{headers:r,responseType:"json"}).pipe(Object(n.a)(this.handleError))}deleteOrder(e){const r=this.sharedService.headerGerneration();return this.http.delete(`${s.a.apiUrl}/api/order/${e}`,{headers:r}).pipe(Object(o.a)(e=>console.log("deleted order: ",JSON.stringify(e))),Object(n.a)(this.handleError))}driverIncreaseOrderPrice(e,r,t){const i=this.sharedService.headerGerneration();return this.http.put(`${s.a.apiUrl}/api/order/increased/${e}/${r}/${t}`,{headers:i,responseType:"json"}).pipe(Object(n.a)(this.handleError))}resetIncreasing(e){const r=this.sharedService.headerGerneration();return this.http.put(`${s.a.apiUrl}/api/order/reset/${e}`,{headers:r,responseType:"json"}).pipe(Object(n.a)(this.handleError))}increasedOrderAccept(e,r){const t=this.sharedService.headerGerneration();return this.http.put(`${s.a.apiUrl}/api/order/accepted/increase/${e}/${r}`,{headers:t,responseType:"json"}).pipe(Object(n.a)(this.handleError))}incrementOrderPrice(e){const r=this.sharedService.headerGerneration();return this.http.put(`${s.a.apiUrl}/api/order/increment/${e}`,{headers:r,responseType:"json"}).pipe(Object(n.a)(this.handleError))}decrementOrderPrice(e){const r=this.sharedService.headerGerneration();return this.http.put(`${s.a.apiUrl}/api/order/decrement/${e}`,{headers:r,responseType:"json"}).pipe(Object(n.a)(this.handleError))}handleError(e){let r="";return e.error instanceof ErrorEvent?(console.log("Client side error."),r=`Error: ${e.error.message}`):(console.log("Server side error."),r=`Error Code: ${e.status}\nMessage: ${e.message}`),console.log(r),Object(i.a)(r)}}return e.\u0275fac=function(r){return new(r||e)(a.Rb(c.a),a.Rb(d.a))},e.\u0275prov=a.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},"9Cmh":function(e,r,t){"use strict";t.r(r),t.d(r,"HttpLoaderFactory",function(){return M}),t.d(r,"FavouriteOrdersPageModule",function(){return y});var i=t("ofXK"),n=t("3Pt+"),o=t("TEn/"),s=t("tyNb"),a=t("mrSG"),c=t("Gpoy"),d=t("AytR"),h=t("oXKM"),p=t("fXoL"),l=t("8k+r"),b=t("8Xdb"),u=t("sYmb");function v(e,r){1&e&&(p.Nb(0,"ion-text",10),p.Nb(1,"h2",11),p.pc(2),p.Yb(3,"translate"),p.Mb(),p.Lb(4,"hr"),p.Mb()),2&e&&(p.zb(2),p.rc("",p.Zb(3,1,"You dont have saved trips"),"!"))}function g(e,r){if(1&e){const e=p.Ob();p.Nb(0,"div",12),p.Nb(1,"a",13),p.Nb(2,"p",14),p.pc(3),p.Yb(4,"translate"),p.Mb(),p.Nb(5,"p",14),p.pc(6),p.Yb(7,"translate"),p.Mb(),p.Nb(8,"div",7),p.Nb(9,"div",6),p.Nb(10,"div",15),p.Nb(11,"small"),p.pc(12),p.Yb(13,"translate"),p.Mb(),p.Mb(),p.Mb(),p.Nb(14,"div",16),p.Nb(15,"small"),p.pc(16),p.Yb(17,"translate"),p.Mb(),p.Mb(),p.Lb(18,"hr"),p.Mb(),p.Nb(19,"ion-toolbar",17),p.Nb(20,"ion-buttons",0),p.Nb(21,"ion-button",18),p.Vb("click",function(){p.jc(e);const t=r.$implicit;return p.Xb().useThis(t)}),p.pc(22),p.Yb(23,"translate"),p.Mb(),p.Mb(),p.Nb(24,"ion-buttons",1),p.Nb(25,"ion-button",19),p.Vb("click",function(){p.jc(e);const t=r.$implicit;return p.Xb().remove(t.id)}),p.pc(26),p.Yb(27,"translate"),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Mb()}if(2&e){const e=r.$implicit;p.zb(3),p.sc("",p.Zb(4,10,"Location"),": ",e.location,""),p.zb(3),p.sc("",p.Zb(7,12,"Destination"),": ",e.destination,""),p.zb(6),p.sc("",p.Zb(13,14,"Trip distance"),": ",e.tripDistance," km"),p.zb(4),p.sc("",p.Zb(17,16,"Total cost"),": ",e.totalPrice," \u043b\u0432."),p.zb(6),p.qc(p.Zb(23,18,"Use this trip")),p.zb(4),p.qc(p.Zb(27,20,"Delete"))}}const f=[{path:"",component:(()=>{class e{constructor(e,r,t,i,n,o){this.orderService=e,this.accountService=r,this.alertController=t,this.route=i,this.translate=n,this.popoverController=o,this.favourites=[],this.subscriptions=[],this.translate.setDefaultLang(this.accountService.userValue.choosenLanguage)}ngOnInit(){this.getMyOrders();const e=(new c.b).configureLogging(c.c.Information).withUrl(`${d.a.signalRUrl}/orderHub`).build();e.start().then(function(){console.log("signalR Connected in travelling")}).catch(function(e){return console.log(e.toString())}),e.on("BroadcastMessage",()=>{this.getMyOrders()})}getMyOrders(){this.subscriptions.push(this.orderService.getMyFavourites(this.accountService.userValue.id).subscribe(e=>{this.favourites=e}))}useThis(e){this.orderService.selectedFavourite=e,this.route.navigate(["menu/travelling"])}remove(e){this.deleteConfirmation(e)}openLanguagePopover(e){return Object(a.a)(this,void 0,void 0,function*(){const r=yield this.popoverController.create({component:h.a,event:e});yield r.present()})}deleteConfirmation(e){return Object(a.a)(this,void 0,void 0,function*(){this.translate.get(["Delete from favourites?","Yes","No"]).subscribe(r=>Object(a.a)(this,void 0,void 0,function*(){const t=yield this.alertController.create({header:r["Delete from favourites?"],buttons:[{text:r.Yes,handler:()=>{this.subscriptions.push(this.orderService.deleteFavouriteOrder(e).subscribe(e=>{this.successDeletedFavourite()}))}},{text:r.No}]});yield t.present()}))})}successDeletedFavourite(){return Object(a.a)(this,void 0,void 0,function*(){this.translate.get(["Successfully removed the trip!"]).subscribe(e=>Object(a.a)(this,void 0,void 0,function*(){const r=yield this.alertController.create({header:e["Successfully removed the trip!"],buttons:[{text:"Ok"}]});yield r.present()}))})}}return e.\u0275fac=function(r){return new(r||e)(p.Kb(l.a),p.Kb(b.a),p.Kb(o.a),p.Kb(s.f),p.Kb(u.d),p.Kb(o.H))},e.\u0275cmp=p.Eb({type:e,selectors:[["app-favourite-orders"]],decls:17,vars:5,consts:[["slot","start"],["slot","end"],["id","toolbarIcon","name","language-outline",3,"click"],["padding","",1,"background"],["class","centered","color","dark",4,"ngIf"],[1,"row","mt-2"],[1,"col"],[1,"row"],[1,"col-md-10"],["class","list-group mt-2",4,"ngFor","ngForOf"],["color","dark",1,"centered"],[1,"fonted","mt-2"],[1,"list-group","mt-2"],[1,"text","list-group-item","list-group-item-action","flex-column","align-items-start"],[1,"mb-1","fonted"],[1,"d-flex","w-100","justify-content-between"],[1,"col-md-12"],["color","light"],["type","submit","color","dark",1,"fonted",3,"click"],["type","submit","color","danger",1,"fonted",3,"click"]],template:function(e,r){1&e&&(p.Nb(0,"ion-header"),p.Nb(1,"ion-toolbar"),p.Nb(2,"ion-buttons",0),p.Lb(3,"ion-menu-button"),p.Mb(),p.Nb(4,"ion-title"),p.Nb(5,"ion-label"),p.pc(6),p.Yb(7,"translate"),p.Mb(),p.Mb(),p.Nb(8,"ion-buttons",1),p.Nb(9,"ion-icon",2),p.Vb("click",function(e){return r.openLanguagePopover(e)}),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Nb(10,"ion-content",3),p.oc(11,v,5,3,"ion-text",4),p.Nb(12,"div",5),p.Nb(13,"div",6),p.Nb(14,"div",7),p.Nb(15,"div",8),p.oc(16,g,28,22,"div",9),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Mb()),2&e&&(p.zb(6),p.qc(p.Zb(7,3,"Favourites")),p.zb(5),p.dc("ngIf",0==r.favourites.length),p.zb(5),p.dc("ngForOf",r.favourites))},directives:[o.l,o.B,o.e,o.s,o.A,o.p,o.m,o.i,i.l,i.k,o.z,o.d],pipes:[u.c],styles:["ion-content[_ngcontent-%COMP%]{--ion-background-color:#e9e9e9}ion-toolbar[_ngcontent-%COMP%]{--ion-background-color:#eee}.noScroll[_ngcontent-%COMP%]{overflow:hidden}#map[_ngcontent-%COMP%]{height:100%;width:100%}ion-title[_ngcontent-%COMP%]{text-align:center}#toolbarIcon[_ngcontent-%COMP%]{font-size:1.7em}.fonted[_ngcontent-%COMP%]{font-family:Open Sans Light}.centered[_ngcontent-%COMP%]{text-align:center}hr[_ngcontent-%COMP%]{background:#eee;width:70%!important}"]}),e})()}];let O=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=p.Ib({type:e}),e.\u0275inj=p.Hb({imports:[[s.h.forChild(f)],s.h]}),e})();var m=t("tk/3"),$=t("mqiu"),j=t("QhVT");function M(e){return new $.a(e)}let y=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=p.Ib({type:e}),e.\u0275inj=p.Hb({imports:[[i.b,n.e,o.C,O,u.b.forChild({loader:{provide:u.a,useFactory:M,deps:[m.a]}}),j.LanguagePopoverPageModule]]}),e})()}}]);