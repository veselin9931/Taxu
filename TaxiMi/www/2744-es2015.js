(self.webpackChunkcsharpcornerauthor=self.webpackChunkcsharpcornerauthor||[]).push([[2744],{2744:function(t,e,n){"use strict";n.r(e),n.d(e,{DriverHistoryPageModule:function(){return y},HttpLoaderFactory:function(){return T}});var o=n(8583),r=n(3679),i=n(7823),s=n(4481),c=n(4762),a=n(4426),l=n(2340),u=n(6522),g=n(3018),Z=n(1799),d=n(5056),p=n(7800);function A(t,e){if(1&t&&(g.TgZ(0,"div",11),g.TgZ(1,"a",12),g.TgZ(2,"div",13),g.TgZ(3,"h5",14),g._uU(4),g.ALo(5,"translate"),g.qZA(),g.TgZ(6,"small"),g._uU(7),g.ALo(8,"date"),g.qZA(),g.qZA(),g.TgZ(9,"p",16),g._uU(10),g.ALo(11,"translate"),g.qZA(),g.TgZ(12,"p",16),g._uU(13),g.ALo(14,"translate"),g.qZA(),g.TgZ(15,"p",16),g._uU(16),g.ALo(17,"translate"),g.qZA(),g.TgZ(18,"p",16),g._uU(19),g.ALo(20,"translate"),g.qZA(),g.TgZ(21,"div",6),g.TgZ(22,"div",17),g.TgZ(23,"small",9),g._uU(24),g.ALo(25,"translate"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA()),2&t){const t=e.$implicit;g.xp6(4),g.Oqu(g.lcZ(5,13,"Order details")),g.xp6(3),g.Oqu(g.xi3(8,15,t.createdOn,"MM/dd/yyyy h:mm")),g.xp6(3),g.lnq("",g.lcZ(11,18,"Passenger"),": ",t.applicationUser.firstName," ",t.applicationUser.lastName,""),g.xp6(3),g.AsE("",g.lcZ(14,20,"Phone number"),": ",t.applicationUser.phone,""),g.xp6(3),g.AsE("",g.lcZ(17,22,"Location"),": ",t.location,""),g.xp6(3),g.AsE("",g.lcZ(20,24,"Destination"),": ",t.destination,""),g.xp6(5),g.AsE("",g.lcZ(25,26,"Profit"),": ",t.totalPrice," \u043b\u0432.")}}const h=[{path:"",component:(()=>{class t{constructor(t,e,n,o){this.driverService=t,this.accountService=e,this.popoverController=n,this.translate=o,this.subscriptions=[],this.orders=[],this.userId=this.accountService.userValue.id,this.currentDate=new Date,this.translate.setDefaultLang(this.accountService.userValue.choosenLanguage)}ngOnInit(){this.getHistory();const t=(new a.su).configureLogging(a.in.Information).withUrl(`${l.N.signalRUrl}/orderHub`).build();t.start().then(function(){console.log("signalR Connected in history")}).catch(function(t){return console.log(t.toString())}),t.on("BroadcastMessage",()=>{this.getHistory()})}ionViewDidLeave(){for(const t of this.subscriptions)console.log(t),t.unsubscribe()}getHistory(){this.subscriptions.push(this.driverService.getDriverHistory(this.userId).subscribe(t=>{if(null==this.orders)return void console.log("No orders");this.orders=t;let e=0;t.forEach(t=>{e+=t.totalPrice}),this.dailyProfit=e.toFixed(2)}))}openLanguagePopover(t){return(0,c.mG)(this,void 0,void 0,function*(){const e=yield this.popoverController.create({component:u.m,event:t});yield e.present()})}}return t.\u0275fac=function(e){return new(e||t)(g.Y36(Z.F),g.Y36(d.B),g.Y36(i.Dh),g.Y36(p.sK))},t.\u0275cmp=g.Xpm({type:t,selectors:[["app-driver-history"]],decls:37,vars:18,consts:[["slot","start"],["slot","end"],["id","toolbarIcon","name","language-outline",3,"click"],["padding","",1,"background"],[1,"row","mt-2"],[1,"col"],[1,"row"],[1,"col-md-12","text-center"],[1,"centered"],[1,"text"],[1,"col-md-10"],[1,"list-group","mt-2"],[1,"text","list-group-item","list-group-item-action","flex-column","align-items-start"],[1,"d-flex","w-100","justify-content-between"],[1,"text","mb-1"],["class","list-group mt-2",4,"ngFor","ngForOf"],[1,"mb-1","text"],[1,"col-md-12"]],template:function(t,e){1&t&&(g.TgZ(0,"ion-header"),g.TgZ(1,"ion-toolbar"),g.TgZ(2,"ion-buttons",0),g._UZ(3,"ion-menu-button"),g.qZA(),g.TgZ(4,"ion-title"),g.TgZ(5,"ion-label"),g._uU(6,"Cyber"),g.qZA(),g.qZA(),g.TgZ(7,"ion-buttons",1),g.TgZ(8,"ion-icon",2),g.NdJ("click",function(t){return e.openLanguagePopover(t)}),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(9,"ion-content",3),g.TgZ(10,"div",4),g.TgZ(11,"div",5),g.TgZ(12,"div",6),g.TgZ(13,"div",7),g.TgZ(14,"ion-text",8),g.TgZ(15,"h2",9),g._uU(16),g.ALo(17,"translate"),g.qZA(),g._UZ(18,"hr"),g.qZA(),g.qZA(),g.TgZ(19,"div",10),g.TgZ(20,"div",11),g.TgZ(21,"a",12),g.TgZ(22,"div",13),g.TgZ(23,"h5",14),g._uU(24),g.ALo(25,"translate"),g.qZA(),g.TgZ(26,"small"),g._uU(27),g.ALo(28,"translate"),g.ALo(29,"date"),g.qZA(),g.qZA(),g.TgZ(30,"div",6),g.TgZ(31,"div",7),g.TgZ(32,"h5",9),g._uU(33),g.ALo(34,"translate"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.TgZ(35,"div",10),g.YNc(36,A,26,28,"div",15),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA()),2&t&&(g.xp6(16),g.Oqu(g.lcZ(17,7,"My history")),g.xp6(8),g.Oqu(g.lcZ(25,9,"Daily earnings")),g.xp6(3),g.AsE("",g.lcZ(28,11,"Today"),": ",g.xi3(29,13,e.currentDate,"MM/dd/yyyy h:mm"),""),g.xp6(6),g.AsE("",g.lcZ(34,16,"Total"),": ",e.dailyProfit," \u043b\u0432."),g.xp6(3),g.Q6J("ngForOf",e.orders))},directives:[i.Gu,i.sr,i.Sm,i.fG,i.wd,i.Q$,i.gu,i.W2,i.yW,o.sg],pipes:[p.X$,o.uU],styles:["ion-content[_ngcontent-%COMP%]{--ion-background-color:#e9e9e9}ion-toolbar[_ngcontent-%COMP%]{--ion-background-color:#eee}ion-title[_ngcontent-%COMP%]{text-align:center}#toolbarIcon[_ngcontent-%COMP%]{font-size:1.7em}.text[_ngcontent-%COMP%]{font-family:Open Sans Light}.centered[_ngcontent-%COMP%]{text-align:center}hr[_ngcontent-%COMP%]{background:#eee;width:70%!important}.backIcon[_ngcontent-%COMP%]{font-size:150%}.back[_ngcontent-%COMP%], .backIcon[_ngcontent-%COMP%]{color:#ffae00}"]}),t})()}];let f=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g.oAB({type:t}),t.\u0275inj=g.cJS({imports:[[s.Bz.forChild(h)],s.Bz]}),t})();var m=n(1841),q=n(2472),v=n(3577);function T(t){return new q.w(t)}let y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g.oAB({type:t}),t.\u0275inj=g.cJS({imports:[[o.ez,r.u5,i.Pc,f,p.aw.forChild({loader:{provide:p.Zw,useFactory:T,deps:[m.eN]}}),v.LanguagePopoverPageModule]]}),t})()}}]);