{"version":3,"sources":["webpack:///src/app/order-details/order-details-routing.module.ts","webpack:///src/app/order-details/order-details.page.scss","webpack:///src/app/order-details/order-details.page.html","webpack:///src/app/order-details/order-details.module.ts","webpack:///src/app/order-details/order-details.page.ts"],"names":["routes","path","component","OrderDetailsPageRoutingModule","imports","forChild","exports","HttpLoaderFactory","http","OrderDetailsPageModule","loader","provide","useFactory","deps","declarations","Geolocation","OrderDetailsPage","translate","popoverController","accountService","router","route","orderService","driverService","walletService","tripService","alertController","orderId","snapshot","params","id","applicationUserId","userValue","isDrivingNow","order","location","locationLat","locationLong","destination","destinationLat","destinationLong","increasePrice","isAccepted","isCompleted","createdOn","status","applicationUser","totalPrice","acceptedBy","tripDistance","userDistance","withPets","withStroller","carType","isRated","km","distanceText","eta","isDeleted","isDriverArrived","increasedByDriver","increaseAccepted","increasedBy","special","pickUpTime","description","mapVisible","subscriptions","setDefaultLang","choosenLanguage","mapId","document","getElementById","style","display","orderDiv","connection","configureLogging","Information","withUrl","signalRUrl","build","start","then","console","log","err","setTimeout","on","push","getOrderById","subscribe","IncreaseAccepted","IncreaseRefused","OrderTaken","canIncrease","calculateEta","loadMap","mapRef","userLocationLatLng","lat","lng","options","center","google","maps","LatLng","zoom","disableDefaultUI","mapTypeId","MapTypeId","ROADMAP","zoomControl","map","Map","nativeElement","icon","url","scaledSize","window","Size","anchor","x","y","marker","Marker","position","navigateToUserAndCalculateDistance","directionsService","DirectionsService","directionsRenderer","DirectionsRenderer","getCurrentPosition","coordinates","myLatLng","coords","latitude","longitude","userLatLng","userLat","userLng","origin","travelMode","TravelMode","DRIVING","response","setDirections","p1","p2","distance","geometry","spherical","computeDistanceBetween","toFixed","infowindow","InfoWindow","content","open","alert","setMap","cancelable","preventDefault","value","navigate","driverIncreaseOrderPrice","driverId","myLat","myLng","orderLatLng","orderLat","orderLng","legs","duration","text","getDriverActiveCar","car","typeId","WrongCarAlert","getDriver","driver","tripPriceForDriver","comission","getMyWallet","wallet","ammount","NotEnoughCashAlert","updateDriving","acceptOrder","updateOrderEta","data","createTrip","ev","create","event","popover","present","get","cssClass","header","message","buttons","handler","role","read","selector","template"],"mappings":"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","file":"order-details-order-details-module-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { OrderDetailsPage } from './order-details.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: OrderDetailsPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class OrderDetailsPageRoutingModule {}\r\n","export default \"ion-content {\\n  --ion-background-color:#e9e9e9;\\n}\\n\\nion-toolbar {\\n  --ion-background-color:#eeeeee;\\n}\\n\\n#map {\\n  height: 100%;\\n  width: 100%;\\n}\\n\\nion-title {\\n  text-align: center;\\n}\\n\\n#warningicn {\\n  margin-left: 6px;\\n}\\n\\nh5 {\\n  font-size: 0.9em;\\n}\\n\\n#toolbarIcon {\\n  font-size: 1.7em;\\n}\\n\\n.fonted {\\n  font-family: Open Sans Light;\\n}\\n\\n.centered {\\n  text-align: center;\\n}\\n\\n.text {\\n  font-family: Open Sans Light;\\n}\\n\\nhr {\\n  background: #eeeeee;\\n  width: 70% !important;\\n}\\n\\n.blink_me {\\n  -webkit-animation: blinker 1s linear infinite;\\n          animation: blinker 1s linear infinite;\\n}\\n\\n@-webkit-keyframes blinker {\\n  50% {\\n    opacity: 0;\\n  }\\n}\\n\\n@keyframes blinker {\\n  50% {\\n    opacity: 0;\\n  }\\n}\\n\\n.msg-box {\\n  width: 100%;\\n  height: 140px;\\n  padding: 10px 30px;\\n  font-size: 14px;\\n  font-family: Open Sans Light;\\n  overflow: auto;\\n}\\n\\n.msg-box ul {\\n  margin: -5px;\\n  list-style: none;\\n}\\n\\n.msg-box ul .ex-msg {\\n  text-align: right;\\n}\\n\\n.msg-box ul .in-msg {\\n  text-align: left;\\n  margin-left: -60px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uXFwuLlxcLi5cXG9yZGVyLWRldGFpbHMucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBRUksOEJBQUE7QUFBSjs7QUFHQTtFQUNJLDhCQUFBO0FBQUo7O0FBR0k7RUFDQSxZQUFBO0VBQ0EsV0FBQTtBQUFKOztBQUlBO0VBQ0ksa0JBQUE7QUFESjs7QUFJQTtFQUNJLGdCQUFBO0FBREo7O0FBSUE7RUFDSSxnQkFBQTtBQURKOztBQUdBO0VBQ0ksZ0JBQUE7QUFBSjs7QUFHQTtFQUNJLDRCQUFBO0FBQUo7O0FBR0E7RUFDSSxrQkFBQTtBQUFKOztBQUdBO0VBRUksNEJBQUE7QUFESjs7QUFJQTtFQUNJLG1CQUFBO0VBQ0EscUJBQUE7QUFESjs7QUFNQTtFQUNJLDZDQUFBO1VBQUEscUNBQUE7QUFISjs7QUFNRTtFQUNFO0lBQ0UsVUFBQTtFQUhKO0FBQ0Y7O0FBQUU7RUFDRTtJQUNFLFVBQUE7RUFISjtBQUNGOztBQU9BO0VBQ0ksV0FBQTtFQUNBLGFBQUE7RUFDQSxrQkFBQTtFQUNBLGVBQUE7RUFDQSw0QkFBQTtFQUNBLGNBQUE7QUFMSjs7QUFPSTtFQUNJLFlBQUE7RUFFQSxnQkFBQTtBQU5SOztBQU9RO0VBQ0ksaUJBQUE7QUFMWjs7QUFRUTtFQUNJLGdCQUFBO0VBQ0Esa0JBQUE7QUFOWiIsImZpbGUiOiJvcmRlci1kZXRhaWxzLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbImlvbi1jb250ZW50e1xyXG4gICAgLy8tLWJhY2tncm91bmQ6IHVybCguLi8uLi9hc3NldHMvd3A0NzkyNzgwLWRhcmstcGhvbmUtd2FsbHBhcGVycy5qcGcpIDAgMC8xMDAlIDEwMCUgbm8tcmVwZWF0O1xyXG4gICAgLS1pb24tYmFja2dyb3VuZC1jb2xvcjojZTllOWU5O1xyXG59XHJcblxyXG5pb24tdG9vbGJhcntcclxuICAgIC0taW9uLWJhY2tncm91bmQtY29sb3I6I2VlZWVlZTtcclxufVxyXG5cclxuICAgICNtYXAge1xyXG4gICAgaGVpZ2h0OiAxMDAlO1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICB9XHJcbiAgICBcclxuXHJcbmlvbi10aXRsZSB7XHJcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbn1cclxuXHJcbiN3YXJuaW5naWNue1xyXG4gICAgbWFyZ2luLWxlZnQ6IDZweDtcclxufVxyXG5cclxuaDV7XHJcbiAgICBmb250LXNpemU6IDAuOWVtO1xyXG59XHJcbiN0b29sYmFySWNvbntcclxuICAgIGZvbnQtc2l6ZTogMS43ZW07XHJcbn1cclxuXHJcbi5mb250ZWR7XHJcbiAgICBmb250LWZhbWlseTogT3BlbiBTYW5zIExpZ2h0O1xyXG59XHJcblxyXG4uY2VudGVyZWR7XHJcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbn1cclxuXHJcbi50ZXh0eyAgXHJcbiAgICAvL2ZvbnQtZmFtaWx5OiAnRnJhbmtsaW4gR290aGljIE1lZGl1bScsICdBcmlhbCBOYXJyb3cnLCBBcmlhbCwgc2Fucy1zZXJpZjtcclxuICAgIGZvbnQtZmFtaWx5OiBPcGVuIFNhbnMgTGlnaHQ7XHJcbn1cclxuXHJcbmhye1xyXG4gICAgYmFja2dyb3VuZDojZWVlZWVlO1xyXG4gICAgd2lkdGg6IDcwJSAhaW1wb3J0YW50O1xyXG59XHJcblxyXG4vL2NoYXRcclxuXHJcbi5ibGlua19tZSB7XHJcbiAgICBhbmltYXRpb246IGJsaW5rZXIgMXMgbGluZWFyIGluZmluaXRlO1xyXG4gIH1cclxuICBcclxuICBAa2V5ZnJhbWVzIGJsaW5rZXIge1xyXG4gICAgNTAlIHtcclxuICAgICAgb3BhY2l0eTogMDtcclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuLm1zZy1ib3gge1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICBoZWlnaHQ6IDE0MHB4O1xyXG4gICAgcGFkZGluZzogMTBweCAzMHB4O1xyXG4gICAgZm9udC1zaXplOiAxNHB4O1xyXG4gICAgZm9udC1mYW1pbHk6IE9wZW4gU2FucyBMaWdodDtcclxuICAgIG92ZXJmbG93OiBhdXRvO1xyXG5cclxuICAgIHVsIHtcclxuICAgICAgICBtYXJnaW46IC01cHg7XHJcblxyXG4gICAgICAgIGxpc3Qtc3R5bGU6IG5vbmU7XHJcbiAgICAgICAgLmV4LW1zZyB7XHJcbiAgICAgICAgICAgIHRleHQtYWxpZ246IHJpZ2h0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLmluLW1zZyB7XHJcbiAgICAgICAgICAgIHRleHQtYWxpZ246IGxlZnQ7XHJcbiAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiAtNjBweDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxufVxyXG5cclxuIl19 */\";","export default \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-menu-button></ion-menu-button>\\r\\n    </ion-buttons>\\r\\n\\r\\n    <ion-title>\\r\\n      <ion-label>{{'Details' | translate}}</ion-label>\\r\\n    </ion-title>\\r\\n\\r\\n    <ion-buttons slot=\\\"end\\\">\\r\\n      <ion-icon (click)='openLanguagePopover($event)' id=\\\"toolbarIcon\\\" name=\\\"language-outline\\\"></ion-icon>\\r\\n    </ion-buttons>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n  <button *ngIf=\\\"mapVisible == false\\\" class=\\\"fonted btn btn-info col-md-12\\\" (click)=\\\"showMap()\\\">{{'Show map' | translate}}</button>\\r\\n  <button *ngIf=\\\"mapVisible == true\\\" class=\\\"fonted btn btn-info col-md-12\\\" (click)=\\\"hideMap()\\\">{{'Show details' | translate}}</button>\\r\\n  <div id=\\\"order\\\"  class=\\\"col-md-10\\\">\\r\\n    <div  class=\\\"list-group mt-2\\\">\\r\\n      <a class=\\\"text list-group-item list-group-item-action flex-column align-items-start\\\">\\r\\n        <ion-icon *ngIf=\\\"order.pickUpTime\\\" name=\\\"alert-circle\\\"></ion-icon>\\r\\n        <small  *ngIf=\\\"order.pickUpTime\\\" id=\\\"warningicn\\\">{{'Pickup time' | translate}} {{order.pickUpTime}}</small>\\r\\n        <div class=\\\"d-flex w-100 justify-content-between\\\">\\r\\n          <h5 class=\\\"mb-1 fonted\\\"></h5>\\r\\n          <small>{{order.createdOn | date:'MM/dd/yyyy h:mm'}}</small>\\r\\n\\r\\n        </div>\\r\\n        <p><ion-icon class=\\\"mr-2\\\" name=\\\"analytics-outline\\\"></ion-icon>{{order.location}}</p>\\r\\n        <hr />\\r\\n        <p><ion-icon class=\\\"mr-2\\\" name=\\\"arrow-forward-outline\\\"></ion-icon>{{order.destination}}</p>\\r\\n        <div class=\\\"d-flex w-100 justify-content-between\\\">\\r\\n          <h5 class=\\\"mb-1 fonted\\\"></h5>\\r\\n        </div>\\r\\n        <div class=\\\"row\\\">\\r\\n          <div class=\\\"col\\\">\\r\\n            <small\\r\\n              *ngIf=\\\"order.withPets == true || order.withStroller == true || order.special == true\\\">{{'Additional\\r\\n              options' | translate}}:</small>\\r\\n            <ul>\\r\\n              <li *ngIf=\\\"order.withPets == true\\\">{{'Pets' | translate}}</li>\\r\\n              <li *ngIf=\\\"order.withStroller == true\\\">{{'Baggage' | translate}}</li>\\r\\n              <li *ngIf=\\\"order.special == true\\\">{{'Special needs' | translate}}</li>\\r\\n            </ul>\\r\\n\\r\\n            <small *ngIf=\\\"order.carType\\\">{{'Desired car type' | translate}}:</small>\\r\\n            <ul *ngIf=\\\"order.carType\\\">\\r\\n              <li>{{order.carType}}</li>\\r\\n            </ul>\\r\\n\\r\\n            <small *ngIf=\\\"order.description\\\">{{'Additional requirements' | translate}}:</small>\\r\\n            <ul *ngIf=\\\"order.description\\\">\\r\\n              <li>{{order.description}}</li>\\r\\n             \\r\\n            </ul>\\r\\n\\r\\n            <div class=\\\"w-100\\\">\\r\\n              <h5>{{'Trip distance' | translate}}: {{order.tripDistance}} km</h5>\\r\\n              <br>\\r\\n              <!-- <h5 class=\\\"fonted\\\">Distance to user: \\r\\n                <small class=\\\"fonted\\\">{{distance}} km</small>\\r\\n              </h5> -->\\r\\n            </div>\\r\\n\\r\\n            <div class=\\\"d-flex w-100 justify-content-between\\\">\\r\\n\\r\\n              <small class=\\\"fonted\\\">{{'Total cost' | translate}}: {{order.totalPrice}} лв.</small>\\r\\n              <button class=\\\"fonted btn btn-info\\\" (click)=\\\"acceptOrder(order)\\\" type=\\\"button\\\">{{'Accept' |translate}}</button>\\r\\n            </div>\\r\\n            <hr />\\r\\n            <p *ngIf=\\\"canIncrease == true\\\" class=\\\"text-center\\\">{{'Offer more price to order' | translate}}</p>\\r\\n            <div *ngIf=\\\"canIncrease == true\\\" class=\\\"d-flex w-100 justify-content-between\\\">\\r\\n              <button type=\\\"button\\\" (click)=\\\"offer(1)\\\" class=\\\"btn btn-info btn-sm\\\">+1лв</button>\\r\\n              <button type=\\\"button\\\" (click)=\\\"offer(2)\\\" class=\\\"btn btn-info btn-sm\\\">+2лв</button>\\r\\n              <button type=\\\"button\\\" (click)=\\\"offer(3)\\\" class=\\\"btn btn-info btn-sm\\\">+3лв</button>\\r\\n              <button type=\\\"button\\\" (click)=\\\"offer(4)\\\" class=\\\"btn btn-info btn-sm\\\">+4лв</button>\\r\\n              <button type=\\\"button\\\" (click)=\\\"offer(5)\\\" class=\\\"btn btn-info btn-sm\\\">+5лв</button>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n        \\r\\n      </a>\\r\\n    </div>\\r\\n  </div>\\r\\n  <ion-content padding class=\\\"noScroll\\\"> \\r\\n    <div #map id=\\\"map\\\" >\\r\\n    </div>\\r\\n  </ion-content>\\r\\n</ion-content>\\r\\n\";","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { OrderDetailsPageRoutingModule } from './order-details-routing.module';\r\n\r\nimport { OrderDetailsPage } from './order-details.page';\r\nimport { TranslateLoader, TranslateModule } from '@ngx-translate/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { TranslateHttpLoader } from '@ngx-translate/http-loader';\r\nimport { LanguagePopoverPageModule } from '../language-popover/language-popover.module';\r\n\r\nexport function HttpLoaderFactory(http: HttpClient) {\r\n  return new TranslateHttpLoader(http);\r\n}\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    OrderDetailsPageRoutingModule,\r\n    TranslateModule.forChild({\r\n      loader: {\r\n        provide: TranslateLoader,\r\n        useFactory: HttpLoaderFactory,\r\n        deps: [HttpClient]\r\n      }\r\n    }),\r\n    LanguagePopoverPageModule\r\n  ],\r\n  declarations: [OrderDetailsPage]\r\n})\r\nexport class OrderDetailsPageModule {}\r\n","import { Component, ElementRef, OnDestroy, OnInit, ViewChild } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport * as signalR from '@aspnet/signalr';\r\nimport { Plugins } from '@capacitor/core';\r\nimport { AlertController, PopoverController } from '@ionic/angular';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { Subscription } from 'rxjs';\r\nimport { environment } from 'src/environments/environment';\r\nimport { Order } from 'src/_models';\r\nimport { AccountService } from 'src/_services';\r\nimport { DriverService } from 'src/_services/driver/driver.service';\r\nimport { OrderService } from 'src/_services/order/order.service';\r\nimport { TripService } from 'src/_services/trip/trip.service';\r\nimport { WalletService } from 'src/_services/wallet/wallet.service';\r\nimport { LanguagePopoverPage } from '../language-popover/language-popover.page';\r\n\r\nconst { Geolocation } = Plugins;\r\ndeclare var google: any;\r\n\r\n@Component({\r\n  selector: 'app-order-details',\r\n  templateUrl: './order-details.page.html',\r\n  styleUrls: ['./order-details.page.scss'],\r\n})\r\nexport class OrderDetailsPage implements OnInit {\r\n  public orderId = this.route.snapshot.params.id;\r\n  tripPriceForDriver: number;\r\n  applicationUserId = this.accountService.userValue.id;\r\n  isDrivingNow = this.accountService.userValue.isDrivingNow;\r\n  myLat;\r\n  myLng;\r\n\r\n  order: Order = {\r\n    id: '',\r\n    location: '',\r\n    locationLat: '',\r\n    locationLong: '',\r\n    destination: '',\r\n    destinationLat: '',\r\n    destinationLong: '',\r\n    increasePrice: '',\r\n    isAccepted: null,\r\n    isCompleted: null,\r\n    createdOn: null,\r\n    status: null,\r\n    applicationUser: null,\r\n    applicationUserId: null,\r\n    totalPrice: null,\r\n    acceptedBy: null,\r\n    tripDistance: null,\r\n    userDistance: null,\r\n    withPets: null,\r\n    withStroller: null,\r\n    carType: null,\r\n    isRated: null,\r\n    km: null,\r\n    distanceText: null,\r\n    eta: null,\r\n    isDeleted: null,\r\n    isDriverArrived: null,\r\n    increasedByDriver: null,\r\n    increaseAccepted: null,\r\n    increasedBy: null,\r\n    special: null,\r\n    pickUpTime: null,\r\n    description: null\r\n  };\r\n  mapId: any\r\n  orderDiv: any;\r\n  canIncrease: boolean;\r\n  eta: any;\r\n  distance: any;\r\n  newDistance: any;\r\n  map: any;\r\n  mapVisible = false;\r\n\r\n  private subscriptions: Subscription[] = [];\r\n\r\n  @ViewChild('map', { read: ElementRef, static: false }) mapRef: ElementRef;\r\n\r\n  constructor(private translate: TranslateService,\r\n    private popoverController: PopoverController,\r\n    private accountService: AccountService,\r\n    private router: Router,\r\n    private route: ActivatedRoute,\r\n    private orderService: OrderService,\r\n    private driverService: DriverService,\r\n    private walletService: WalletService,\r\n    private tripService: TripService,\r\n    private alertController: AlertController) {\r\n    this.translate.setDefaultLang(this.accountService.userValue.choosenLanguage);\r\n\r\n  }\r\n  ngOnInit() {\r\n    this.mapId = document.getElementById(\"map\");\r\n    this.mapId.style.display = 'none';\r\n    this.orderDiv = document.getElementById(\"order\");\r\n    this.orderDiv.style.display = 'block';\r\n\r\n    const connection = new signalR.HubConnectionBuilder()\r\n      .configureLogging(signalR.LogLevel.Information)\r\n      .withUrl(`${environment.signalRUrl}/orderHub`)\r\n      .build();\r\n\r\n    connection.start().then(function () {\r\n      console.log('signalR Connected in travel-mode');\r\n    }).catch(function (err) {\r\n      console.log(\"Reconnecting in 1 sec.\");\r\n      setTimeout(() => connection.start(), 1000);\r\n    });\r\n\r\n    connection.on('NotifyDriver', (orderId: string) => {\r\n      this.subscriptions.push(this.orderService.getOrderById(orderId)\r\n        .subscribe(order => {\r\n          if (this.order.id == order.id) {\r\n            if (order.increaseAccepted == true) {\r\n              this.IncreaseAccepted(order);\r\n\r\n            } else if (order.increaseAccepted == false) {\r\n              this.IncreaseRefused();\r\n            }\r\n          }\r\n        }))\r\n    });\r\n\r\n    connection.on('OrderDeleted', (orderId: string) => {\r\n      this.subscriptions.push(this.orderService.getOrderById(orderId)\r\n        .subscribe(order => {\r\n          if (this.order.id == order.id) {\r\n            this.OrderTaken();\r\n          }\r\n        }))\r\n    });\r\n  }\r\n\r\n  ionViewDidEnter() {\r\n    this.orderDiv.style.display = 'block';\r\n    this.mapId.style.display = 'none';\r\n\r\n    this.subscriptions.push(this.orderService.getOrderById(this.orderId)\r\n      .subscribe(order => {\r\n        if (order == null) {\r\n          return this.OrderTaken();\r\n        }\r\n        if (order.totalPrice <= 3.50) {\r\n          this.canIncrease = true;\r\n        }\r\n        else {\r\n          this.canIncrease = false;\r\n        }\r\n        this.order = order;\r\n        //this.calculateDistance(this.order);\r\n        this.calculateEta(this.order);\r\n        this.loadMap(this.mapRef);\r\n\r\n      }))\r\n\r\n  }\r\n\r\n  async loadMap(mapRef: ElementRef) {\r\n    const userLocationLatLng = { lat: +this.order.locationLat, lng: +this.order.locationLong };\r\n    const options: google.maps.MapOptions = {\r\n      center: new google.maps.LatLng(userLocationLatLng.lat, userLocationLatLng.lng),\r\n      zoom: 14,\r\n      disableDefaultUI: true,\r\n      mapTypeId: google.maps.MapTypeId.ROADMAP,\r\n      zoomControl: false\r\n    };\r\n\r\n    if (mapRef != null) {\r\n      this.map = new google.maps.Map(mapRef.nativeElement, options);\r\n    }\r\n\r\n    var icon = {\r\n      url: 'https://www.freeiconspng.com/uploads/-human-male-man-people-person-profile-red-user-icon--icon--23.png',\r\n      scaledSize: new window.google.maps.Size(25, 25),\r\n      anchor: { x: 10, y: 10 }\r\n    };\r\n\r\n    var marker = new google.maps.Marker({\r\n      position: new google.maps.LatLng(userLocationLatLng),\r\n      icon: icon,\r\n      map: this.map\r\n    });\r\n    this.navigateToUserAndCalculateDistance(marker);\r\n  }\r\n\r\n  async navigateToUserAndCalculateDistance(marker) {\r\n    const directionsService = new google.maps.DirectionsService();\r\n    const directionsRenderer = new google.maps.DirectionsRenderer();\r\n    const coordinates = await Geolocation.getCurrentPosition();\r\n    const myLatLng = { lat: coordinates.coords.latitude, lng: coordinates.coords.longitude };\r\n    const userLatLng = { lat: this.order.locationLat, lng: this.order.locationLong };\r\n    let userLat = +userLatLng.lat;\r\n    let userLng = +userLatLng.lng;\r\n\r\n    directionsService.route(\r\n      {\r\n        origin: {\r\n          lat: myLatLng.lat,\r\n          lng: myLatLng.lng\r\n        },\r\n        destination: {\r\n          lat: userLat,\r\n          lng: userLng,\r\n        },\r\n        travelMode: google.maps.TravelMode.DRIVING,\r\n      },\r\n      (response, status) => {\r\n        if (status === \"OK\") {\r\n          directionsRenderer.setDirections(response);\r\n\r\n          var p1 = new google.maps.LatLng(myLatLng.lat, myLatLng.lng);\r\n          var p2 = new google.maps.LatLng(userLat, userLng);\r\n\r\n          this.distance = (google.maps.geometry.spherical.computeDistanceBetween(p1, p2) / 1000).toFixed(2);\r\n\r\n          var infowindow = new google.maps.InfoWindow({\r\n            content: `${this.distance} km from you.`\r\n          });\r\n          infowindow.open(this.map, marker);\r\n\r\n        } else {\r\n          window.alert(\"Directions request failed due to \" + status);\r\n        }\r\n      }\r\n    );\r\n    directionsRenderer.setMap(this.map);\r\n  }\r\n\r\n  hideMap() {\r\n    this.orderDiv.style.display = 'block';\r\n    this.mapId.style.display = 'none';\r\n    this.mapVisible = false;\r\n\r\n    if (this.orderDiv.cancelable) {\r\n      this.orderDiv.preventDefault();\r\n    }\r\n\r\n    if (this.mapId.cancelable) {\r\n      this.mapId.preventDefault();\r\n    }\r\n  }\r\n\r\n  showMap() {\r\n    this.orderDiv.style.display = 'none';\r\n    this.mapId.style.display = 'block';\r\n    this.mapVisible = true;\r\n    this.loadMap(this.mapRef);\r\n\r\n\r\n    if (this.orderDiv.cancelable) {\r\n      this.orderDiv.preventDefault();\r\n    }\r\n\r\n    if (this.mapId.cancelable) {\r\n      this.mapId.preventDefault();\r\n    }\r\n  }\r\n\r\n  offer(value) {\r\n    this.subscriptions.push(this.orderService.getOrderById(this.order.id)\r\n      .subscribe(x => {\r\n        if (x.status == 'Canceled') {\r\n          this.OrderTaken();\r\n          this.router.navigate(['menu/driving']);\r\n          return;\r\n        } else {\r\n          this.subscriptions.push(this.orderService.driverIncreaseOrderPrice(this.order.id, value, this.accountService.userValue.driverId)\r\n            .subscribe(() => { }))\r\n        }\r\n      }));\r\n\r\n  }\r\n\r\n  // async calculateDistance(order) {\r\n  //   const coordinates = await Geolocation.getCurrentPosition();\r\n  //   const myLatLng = { lat: coordinates.coords.latitude, lng: coordinates.coords.longitude };\r\n\r\n  //   const orderLatLng = { lat: order.locationLat, lng: order.locationLong };\r\n  //   var p1 = new google.maps.LatLng(myLatLng.lat, myLatLng.lng);\r\n  //   var p2 = new google.maps.LatLng(orderLatLng.lat, orderLatLng.lng);\r\n\r\n  //   this.distance = (google.maps.geometry.spherical.computeDistanceBetween(p1, p2) / 1000).toFixed(2);\r\n\r\n  //   if (this.distance == null || this.distance == undefined) {\r\n  //     this.distance = (google.maps.geometry.spherical.computeDistanceBetween(p1, p2) / 1000).toFixed(2);\r\n  //   }\r\n  // }\r\n\r\n  async calculateEta(order) {\r\n    const coordinates = await Geolocation.getCurrentPosition();\r\n    const myLatLng = { lat: coordinates.coords.latitude, lng: coordinates.coords.longitude };\r\n    this.myLat = myLatLng.lat;\r\n    this.myLng = myLatLng.lng;\r\n\r\n    const directionsService = new google.maps.DirectionsService();\r\n    const orderLatLng = { lat: order.locationLat, lng: order.locationLong };\r\n    let orderLat = +orderLatLng.lat;\r\n    let orderLng = +orderLatLng.lng;\r\n\r\n    directionsService.route(\r\n      {\r\n        origin: {\r\n          lat: +this.myLat,\r\n          lng: +this.myLng\r\n        },\r\n        destination: {\r\n          lat: orderLat,\r\n          lng: orderLng,\r\n        },\r\n        travelMode: google.maps.TravelMode.DRIVING,\r\n      },\r\n      (response, status) => {\r\n        if (status === \"OK\") {\r\n          order.eta = response.routes[0].legs[0].duration.text;\r\n        }\r\n      }\r\n    );\r\n  }\r\n\r\n  acceptOrder(order) {\r\n    this.subscriptions.push(this.orderService.getOrderById(order.id)\r\n      .subscribe(x => {\r\n        if (x.status == 'Canceled') {\r\n          this.OrderTaken();\r\n          this.router.navigate(['menu/driving']);\r\n          return;\r\n        } else {\r\n          this.subscriptions.push(this.driverService.getDriverActiveCar(this.accountService.userValue.driverId)\r\n            .subscribe(car => {\r\n              if (car.typeId == 1 && order.carType == 'Comfort') {\r\n                return this.WrongCarAlert();\r\n              } else {\r\n                //Get user's id to get drivers data\r\n\r\n                //Get driver's data\r\n                this.subscriptions.push(this.driverService.getDriver(this.accountService.userValue.driverId)\r\n                  .subscribe(driver => {\r\n                    this.tripPriceForDriver = (order.totalPrice * (driver.comission / 100));\r\n\r\n                    //Get drivers wallet\r\n                    this.subscriptions.push(this.walletService.getMyWallet(this.applicationUserId)\r\n                      .subscribe(wallet => {\r\n                        if (wallet.ammount < this.tripPriceForDriver) {\r\n                          this.NotEnoughCashAlert();\r\n                          return;\r\n                        } else {\r\n\r\n\r\n                          let applicationUserId = this.accountService.userValue.id;\r\n                          this.accountService.userValue.isDrivingNow = true;\r\n                          this.subscriptions.push(this.accountService.updateDriving(this.applicationUserId, true)\r\n                            .subscribe(() => {\r\n                            }));\r\n\r\n                          this.isDrivingNow = this.accountService.userValue.isDrivingNow;\r\n                          order.acceptedBy = applicationUserId;\r\n\r\n                          //Accepting order\r\n                          this.subscriptions.push(this.orderService.acceptOrder(order.id, applicationUserId)\r\n                            .subscribe(() => {\r\n\r\n                              this.subscriptions.push(this.orderService.updateOrderEta(orderId, order.eta)\r\n                                .subscribe());\r\n                            }));\r\n\r\n                          let orderId = order.id;\r\n                          let data = { orderId, applicationUserId, order };\r\n\r\n                          //Creating trip to manage data\r\n                          this.subscriptions.push(this.tripService.createTrip(data)\r\n                            .subscribe(() => {\r\n                            }));\r\n                          this.router.navigate(['menu/driving-mode'])\r\n                        }\r\n                      }));\r\n                  }));\r\n              }\r\n            }));\r\n        }\r\n      }))\r\n  }\r\n\r\n  async openLanguagePopover(ev) {\r\n    const popover = await this.popoverController.create({\r\n      component: LanguagePopoverPage,\r\n      event: ev\r\n    });\r\n    await popover.present();\r\n  }\r\n\r\n  async NotEnoughCashAlert() {\r\n    this.translate.get(['Balance', 'Your wallet balance is not enough for this order!']).subscribe(async text => {\r\n      const alert = await this.alertController.create({\r\n        cssClass: 'my-custom-class',\r\n        header: text['Balance'],\r\n        message: text['Your wallet balance is not enough for this order!'],\r\n        buttons: ['OK']\r\n      });\r\n\r\n      await alert.present();\r\n    })\r\n\r\n  }\r\n\r\n  async OrderTaken() {\r\n    this.translate.get(['Sorry', 'This order is no longer active'])\r\n      .subscribe(async text => {\r\n        const alert = await this.alertController.create({\r\n          cssClass: 'my-custom-class',\r\n          header: text['Sorry'],\r\n          message: text['This order is no longer active'],\r\n          buttons: [{\r\n            text: 'OK',\r\n            handler: () => {\r\n              this.router.navigate(['menu/driving']);\r\n            }\r\n          },\r\n          ],\r\n        });\r\n\r\n        await alert.present();\r\n      })\r\n\r\n  }\r\n\r\n  async IncreaseRefused() {\r\n    this.translate.get(['Order increasing refused.'])\r\n      .subscribe(async text => {\r\n        const alert = await this.alertController.create({\r\n          cssClass: 'my-custom-class',\r\n          header: text['Order increasing refused.'],\r\n          buttons: [{\r\n            text: 'Ok',\r\n            role: 'cancel'\r\n          },\r\n          ],\r\n        });\r\n    \r\n        await alert.present();\r\n      })\r\n   \r\n  }\r\n\r\n  async IncreaseAccepted(order) {\r\n    this.translate.get(['Order increasing accepted.', 'You can accept the order now', 'Accept', 'Cancel'])\r\n    .subscribe(async text => {\r\n      const alert = await this.alertController.create({\r\n        cssClass: 'my-custom-class',\r\n        header: text['Order increasing accepted.'],\r\n        message: text['You can accept the order now'],\r\n        buttons: [\r\n          {\r\n            text: text['Accept'],\r\n            handler: () => {\r\n              this.acceptOrder(order);\r\n            }\r\n          },\r\n          {\r\n            text: text['Cancel'],\r\n            role: 'cancel'\r\n          },\r\n        ],\r\n      });\r\n  \r\n      await alert.present();\r\n    })\r\n    \r\n  }\r\n\r\n  async WrongCarAlert() {\r\n    this.translate.get(['Order information', \"Your car is of type 'Normal' but the order desired car type is 'Comfort'!\"])\r\n    .subscribe(async text => {\r\n      const alert = await this.alertController.create({\r\n        cssClass: 'my-custom-class',\r\n        header: text['Order information'],\r\n        message: text['Your car is of type \"Normal\" but the order desired car type is \"Comfort\"!'],\r\n        buttons: ['OK'],\r\n  \r\n      });\r\n  \r\n      await alert.present();\r\n    })\r\n    \r\n  }\r\n}\r\n"]}