(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"8k+r":function(e,r,t){"use strict";t.d(r,"a",function(){return d});var i=t("z6cu"),n=t("JIr8"),o=t("vkgz"),a=t("AytR"),s=t("fXoL"),c=t("tk/3"),h=t("Dsd+");let d=(()=>{class e{constructor(e,r){this.http=e,this.sharedService=r,this.orders=[],this.completedOrder=!1}createOrder(e){const r=this.sharedService.headerGerneration();return this.http.post(`${a.a.apiUrl}/api/order`,e,{headers:r,responseType:"text"}).pipe(Object(n.a)(this.handleError))}addToFavourites(e){const r=this.sharedService.headerGerneration();return this.http.post(`${a.a.apiUrl}/api/order/favourites`,e,{headers:r,responseType:"text"}).pipe(Object(n.a)(this.handleError))}getMyFavourites(e){const r=this.sharedService.headerGerneration();return this.http.get(`${a.a.apiUrl}/api/order/favourites/${e}`,{headers:r}).pipe(Object(n.a)(this.handleError))}deleteFavouriteOrder(e){const r=this.sharedService.headerGerneration();return this.http.delete(`${a.a.apiUrl}/api/order/favourites/${e}`,{headers:r}).pipe(Object(o.a)(e=>console.log("deleted favourite order: ",JSON.stringify(e))),Object(n.a)(this.handleError))}getDirections(e,r,t,i){const o=this.sharedService.headerGerneration();return this.http.post(`https://maps.googleapis.com/maps/api/distancematrix/json?units=imperial&origins=${e},${r}&destinations=${t}%2C${i}%7C&key=AIzaSyAEvlXdM4joG4bNVT5l-tJSk9lUSGhxMNw`,{headers:o,responseType:"text"}).pipe(Object(n.a)(this.handleError))}getOrderById(e){const r=this.sharedService.headerGerneration();return this.http.get(`${a.a.apiUrl}/api/order/id/${e}`,{headers:r}).pipe(Object(o.a)(e=>this.order=e))}getCanceledOrderById(e){const r=this.sharedService.headerGerneration();return this.http.get(`${a.a.apiUrl}/api/order/canceled/${e}`,{headers:r}).pipe(Object(o.a)(e=>this.order=e))}getLastCompletedOrder(e){const r=this.sharedService.headerGerneration();return this.http.get(`${a.a.apiUrl}/api/order/completed/${e}`,{headers:r}).pipe(Object(n.a)(this.handleError))}getMyOrder(e){const r=this.sharedService.headerGerneration();return this.http.get(`${a.a.apiUrl}/api/order/${e}`,{headers:r}).pipe(Object(n.a)(this.handleError))}getOrderForChat(e){const r=this.sharedService.headerGerneration();return this.http.get(`${a.a.apiUrl}/api/order/chat/${e}`,{headers:r}).pipe(Object(n.a)(this.handleError))}getAllOrders(){const e=this.sharedService.headerGerneration();return this.http.get(`${a.a.apiUrl}/api/order`,{headers:e}).pipe(Object(n.a)(this.handleError))}getNormalOrders(){const e=this.sharedService.headerGerneration();return this.http.get(`${a.a.apiUrl}/api/order/normal`,{headers:e}).pipe(Object(n.a)(this.handleError))}getComfortOrders(){const e=this.sharedService.headerGerneration();return this.http.get(`${a.a.apiUrl}/api/order/comfort`,{headers:e}).pipe(Object(n.a)(this.handleError))}acceptOrder(e,r){const t=this.sharedService.headerGerneration();return this.http.put(`${a.a.apiUrl}/api/order/${e}/${r}`,{headers:t,responseType:"json"}).pipe(Object(o.a)(e=>this.driverId=r),Object(n.a)(this.handleError))}updateOrderEta(e,r){const t=this.sharedService.headerGerneration();return this.http.put(`${a.a.apiUrl}/api/order/eta/${e}/${r}`,{headers:t,responseType:"json"}).pipe(Object(n.a)(this.handleError))}updateDriverArrived(e){const r=this.sharedService.headerGerneration();return this.http.put(`${a.a.apiUrl}/api/order/arrived/${e}`,{headers:r,responseType:"json"}).pipe(Object(n.a)(this.handleError))}rateOrder(e){const r=this.sharedService.headerGerneration();return this.http.put(`${a.a.apiUrl}/api/order/rate/${e}`,{headers:r,responseType:"json"}).pipe(Object(n.a)(this.handleError))}increaseOrderPrice(e,r){const t=this.sharedService.headerGerneration();return this.http.put(`${a.a.apiUrl}/api/order/increase/${e}/${r}`,{headers:t,responseType:"json"}).pipe(Object(n.a)(this.handleError))}completeOrder(e){const r=this.sharedService.headerGerneration();return this.http.put(`${a.a.apiUrl}/api/order/${e}`,{headers:r,responseType:"json"}).pipe(Object(n.a)(this.handleError))}deleteOrder(e){const r=this.sharedService.headerGerneration();return this.http.delete(`${a.a.apiUrl}/api/order/${e}`,{headers:r}).pipe(Object(o.a)(e=>console.log("deleted order: ",JSON.stringify(e))),Object(n.a)(this.handleError))}driverIncreaseOrderPrice(e,r,t){const i=this.sharedService.headerGerneration();return this.http.put(`${a.a.apiUrl}/api/order/increased/${e}/${r}/${t}`,{headers:i,responseType:"json"}).pipe(Object(n.a)(this.handleError))}resetIncreasing(e){const r=this.sharedService.headerGerneration();return this.http.put(`${a.a.apiUrl}/api/order/reset/${e}`,{headers:r,responseType:"json"}).pipe(Object(n.a)(this.handleError))}increasedOrderAccept(e,r){const t=this.sharedService.headerGerneration();return this.http.put(`${a.a.apiUrl}/api/order/accepted/increase/${e}/${r}`,{headers:t,responseType:"json"}).pipe(Object(n.a)(this.handleError))}incrementOrderPrice(e){const r=this.sharedService.headerGerneration();return this.http.put(`${a.a.apiUrl}/api/order/increment/${e}`,{headers:r,responseType:"json"}).pipe(Object(n.a)(this.handleError))}decrementOrderPrice(e){const r=this.sharedService.headerGerneration();return this.http.put(`${a.a.apiUrl}/api/order/decrement/${e}`,{headers:r,responseType:"json"}).pipe(Object(n.a)(this.handleError))}handleError(e){let r="";return e.error instanceof ErrorEvent?(console.log("Client side error."),r=`Error: ${e.error.message}`):(console.log("Server side error."),r=`Error Code: ${e.status}\nMessage: ${e.message}`),console.log(r),Object(i.a)(r)}}return e.\u0275fac=function(r){return new(r||e)(s.Rb(c.a),s.Rb(h.a))},e.\u0275prov=s.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},kMJQ:function(e,r,t){"use strict";t.r(r),t.d(r,"HttpLoaderFactory",function(){return M}),t.d(r,"CategoriesPageModule",function(){return N});var i=t("ofXK"),n=t("3Pt+"),o=t("TEn/"),a=t("tyNb"),s=t("mrSG"),c=t("Gpoy"),h=t("AytR"),d=t("oXKM"),p=t("fXoL"),l=t("sYmb"),b=t("8Xdb"),u=t("exMm"),g=t("8k+r");function v(e,r){1&e&&(p.Nb(0,"ion-title"),p.Nb(1,"ion-label"),p.pc(2),p.Yb(3,"translate"),p.Mb(),p.Mb()),2&e&&(p.zb(2),p.qc(p.Zb(3,1,"Categories")))}function f(e,r){if(1&e&&(p.Nb(0,"ion-chip"),p.pc(1),p.Mb()),2&e){const e=p.Xb();p.zb(1),p.qc(e.driverService.categoryCloseCount)}}function m(e,r){if(1&e&&(p.Nb(0,"ion-chip"),p.pc(1),p.Mb()),2&e){const e=p.Xb();p.zb(1),p.qc(e.allCount)}}const O=[{path:"",component:(()=>{class e{constructor(e,r,t,i,n,o){this.popoverController=e,this.translate=r,this.accountService=t,this.route=i,this.driverService=n,this.orderService=o,this.subscriptions=[],this.isDrivingNow=this.accountService.userValue.isDrivingNow,this.translate.setDefaultLang(this.accountService.userValue.choosenLanguage)}ngOnInit(){this.getNormalCount(),this.getComfortCount(),this.getAllCount();const e=(new c.b).configureLogging(c.c.Information).withUrl(`${h.a.signalRUrl}/orderHub`).build();e.start().then(function(){console.log("signalR Connected in travelling")}).catch(function(e){return console.log(e)}),e.on("BroadcastMessage",()=>{this.getNormalCount(),this.getComfortCount(),this.getAllCount()}),1==this.isDrivingNow&&this.route.navigate(["menu/driving"])}all(){this.driverService.categoryType="All",this.route.navigate(["menu/driving"])}closest(){this.driverService.categoryType="Closest",this.route.navigate(["menu/driving"])}normal(){this.driverService.categoryType="Normal",this.route.navigate(["menu/driving"])}comfort(){this.driverService.categoryType="Comfort",this.route.navigate(["menu/driving"])}outOfTown(){this.driverService.categoryType="Out of town",this.route.navigate(["menu/driving"])}booked(){this.route.navigate(["menu/booked-travels"])}getNormalCount(){this.subscriptions.push(this.orderService.getNormalOrders().subscribe(e=>this.normalCount=e.length))}getComfortCount(){this.subscriptions.push(this.orderService.getComfortOrders().subscribe(e=>this.comfortCount=e.length))}getAllCount(){this.subscriptions.push(this.orderService.getAllOrders().subscribe(e=>this.allCount=e.length))}openLanguagePopover(e){return Object(s.a)(this,void 0,void 0,function*(){const r=yield this.popoverController.create({component:d.a,event:e});yield r.present()})}ionViewDidLeave(){for(const e of this.subscriptions)console.log(e),e.unsubscribe()}}return e.\u0275fac=function(r){return new(r||e)(p.Kb(o.H),p.Kb(l.d),p.Kb(b.a),p.Kb(a.f),p.Kb(u.a),p.Kb(g.a))},e.\u0275cmp=p.Eb({type:e,selectors:[["app-categories"]],decls:47,vars:24,consts:[["slot","start"],[4,"ngIf"],["slot","end"],["id","toolbarIcon","name","language-outline",3,"click"],["padding","",1,"background"],[1,"row","mt-2","text-center"],[1,"col-md-12"],[3,"click"]],template:function(e,r){1&e&&(p.Nb(0,"ion-header"),p.Nb(1,"ion-toolbar"),p.Nb(2,"ion-buttons",0),p.Lb(3,"ion-menu-button"),p.Mb(),p.oc(4,v,4,3,"ion-title",1),p.Nb(5,"ion-buttons",2),p.Nb(6,"ion-icon",3),p.Vb("click",function(e){return r.openLanguagePopover(e)}),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Nb(7,"ion-content",4),p.Nb(8,"div",5),p.Nb(9,"div",6),p.Nb(10,"ion-list"),p.Nb(11,"ion-item",7),p.Vb("click",function(){return r.all()}),p.Nb(12,"ion-label"),p.pc(13),p.Yb(14,"translate"),p.Mb(),p.Nb(15,"ion-chip"),p.pc(16),p.Mb(),p.Mb(),p.Nb(17,"ion-item",7),p.Vb("click",function(){return r.closest()}),p.Nb(18,"ion-label"),p.pc(19),p.Yb(20,"translate"),p.Mb(),p.oc(21,f,2,1,"ion-chip",1),p.oc(22,m,2,1,"ion-chip",1),p.Mb(),p.Nb(23,"ion-item",7),p.Vb("click",function(){return r.normal()}),p.Nb(24,"ion-label"),p.pc(25),p.Yb(26,"translate"),p.Mb(),p.Nb(27,"ion-chip"),p.pc(28),p.Mb(),p.Mb(),p.Nb(29,"ion-item",7),p.Vb("click",function(){return r.comfort()}),p.Nb(30,"ion-label"),p.pc(31),p.Yb(32,"translate"),p.Mb(),p.Nb(33,"ion-chip"),p.pc(34),p.Mb(),p.Mb(),p.Nb(35,"ion-item",7),p.Vb("click",function(){return r.outOfTown()}),p.Nb(36,"ion-label"),p.pc(37),p.Yb(38,"translate"),p.Mb(),p.Nb(39,"ion-chip"),p.pc(40,"0"),p.Mb(),p.Mb(),p.Nb(41,"ion-item",7),p.Vb("click",function(){return r.booked()}),p.Nb(42,"ion-label"),p.pc(43),p.Yb(44,"translate"),p.Mb(),p.Nb(45,"ion-chip"),p.pc(46,"0"),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Mb(),p.Mb()),2&e&&(p.zb(4),p.dc("ngIf",0==r.isDrivingNow),p.zb(9),p.qc(p.Zb(14,12,"All")),p.zb(3),p.qc(r.allCount),p.zb(3),p.qc(p.Zb(20,14,"Closest")),p.zb(2),p.dc("ngIf",null!=r.driverService.categoryCloseCount),p.zb(1),p.dc("ngIf",null==r.driverService.categoryCloseCount),p.zb(3),p.qc(p.Zb(26,16,"Normal")),p.zb(3),p.qc(r.normalCount),p.zb(3),p.qc(p.Zb(32,18,"Comfort")),p.zb(3),p.qc(r.comfortCount),p.zb(3),p.qc(p.Zb(38,20,"Out of town")),p.zb(6),p.qc(p.Zb(44,22,"Booked")))},directives:[o.l,o.B,o.e,o.s,i.l,o.m,o.i,o.q,o.o,o.p,o.h,o.A],pipes:[l.c],styles:["ion-content[_ngcontent-%COMP%], ion-toolbar[_ngcontent-%COMP%]{--ion-background-color:#eee}ion-title[_ngcontent-%COMP%]{text-align:center}#toolbarIcon[_ngcontent-%COMP%]{font-size:1.7em}.fonted[_ngcontent-%COMP%]{font-family:Open Sans Light}.centered[_ngcontent-%COMP%]{text-align:center}.text[_ngcontent-%COMP%]{font-family:Open Sans Light}hr[_ngcontent-%COMP%]{background:#eee;width:70%!important}"]}),e})()}];let $=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=p.Ib({type:e}),e.\u0275inj=p.Hb({imports:[[a.h.forChild(O)],a.h]}),e})();var C=t("tk/3"),S=t("mqiu"),y=t("QhVT");function M(e){return new S.a(e)}let N=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=p.Ib({type:e}),e.\u0275inj=p.Hb({imports:[[i.b,n.e,o.C,$,l.b.forChild({loader:{provide:l.a,useFactory:M,deps:[C.a]}}),y.LanguagePopoverPageModule]]}),e})()}}]);