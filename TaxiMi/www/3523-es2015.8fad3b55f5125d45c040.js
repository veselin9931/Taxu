(self.webpackChunkcsharpcornerauthor=self.webpackChunkcsharpcornerauthor||[]).push([[3523],{297:function(e,r,t){"use strict";t.d(r,{p:function(){return c}});var i=t(205),o=t(5304),n=t(3342),s=t(2340),a=t(3018),d=t(1841),h=t(728);let c=(()=>{class e{constructor(e,r){this.http=e,this.sharedService=r,this.orders=[],this.completedOrder=!1}createOrder(e){const r=this.sharedService.headerGerneration();return this.http.post(`${s.N.apiUrl}/api/order`,e,{headers:r,responseType:"text"}).pipe((0,o.K)(this.handleError))}addToFavourites(e){const r=this.sharedService.headerGerneration();return this.http.post(`${s.N.apiUrl}/api/order/favourites`,e,{headers:r,responseType:"text"}).pipe((0,o.K)(this.handleError))}getMyFavourites(e){const r=this.sharedService.headerGerneration();return this.http.get(`${s.N.apiUrl}/api/order/favourites/${e}`,{headers:r}).pipe((0,o.K)(this.handleError))}deleteFavouriteOrder(e){const r=this.sharedService.headerGerneration();return this.http.delete(`${s.N.apiUrl}/api/order/favourites/${e}`,{headers:r}).pipe((0,n.b)(e=>console.log("deleted favourite order: ",JSON.stringify(e))),(0,o.K)(this.handleError))}getDirections(e,r,t,i){const n=this.sharedService.headerGerneration();return this.http.post(`https://maps.googleapis.com/maps/api/distancematrix/json?units=imperial&origins=${e},${r}&destinations=${t}%2C${i}%7C&key=AIzaSyAEvlXdM4joG4bNVT5l-tJSk9lUSGhxMNw`,{headers:n,responseType:"text"}).pipe((0,o.K)(this.handleError))}getOrderById(e){const r=this.sharedService.headerGerneration();return this.http.get(`${s.N.apiUrl}/api/order/id/${e}`,{headers:r}).pipe((0,n.b)(e=>this.order=e))}getCanceledOrderById(e){const r=this.sharedService.headerGerneration();return this.http.get(`${s.N.apiUrl}/api/order/canceled/${e}`,{headers:r}).pipe((0,n.b)(e=>this.order=e))}getLastCompletedOrder(e){const r=this.sharedService.headerGerneration();return this.http.get(`${s.N.apiUrl}/api/order/completed/${e}`,{headers:r}).pipe((0,o.K)(this.handleError))}getMyOrder(e){const r=this.sharedService.headerGerneration();return this.http.get(`${s.N.apiUrl}/api/order/${e}`,{headers:r}).pipe((0,o.K)(this.handleError))}getOrderForChat(e){const r=this.sharedService.headerGerneration();return this.http.get(`${s.N.apiUrl}/api/order/chat/${e}`,{headers:r}).pipe((0,o.K)(this.handleError))}getAllOrders(){const e=this.sharedService.headerGerneration();return this.http.get(`${s.N.apiUrl}/api/order`,{headers:e}).pipe((0,o.K)(this.handleError))}getNormalOrders(){const e=this.sharedService.headerGerneration();return this.http.get(`${s.N.apiUrl}/api/order/normal`,{headers:e}).pipe((0,o.K)(this.handleError))}getComfortOrders(){const e=this.sharedService.headerGerneration();return this.http.get(`${s.N.apiUrl}/api/order/comfort`,{headers:e}).pipe((0,o.K)(this.handleError))}acceptOrder(e,r){const t=this.sharedService.headerGerneration();return this.http.put(`${s.N.apiUrl}/api/order/${e}/${r}`,{headers:t,responseType:"json"}).pipe((0,n.b)(e=>this.driverId=r),(0,o.K)(this.handleError))}updateOrderEta(e,r){const t=this.sharedService.headerGerneration();return this.http.put(`${s.N.apiUrl}/api/order/eta/${e}/${r}`,{headers:t,responseType:"json"}).pipe((0,o.K)(this.handleError))}updateDriverArrived(e){const r=this.sharedService.headerGerneration();return this.http.put(`${s.N.apiUrl}/api/order/arrived/${e}`,{headers:r,responseType:"json"}).pipe((0,o.K)(this.handleError))}rateOrder(e){const r=this.sharedService.headerGerneration();return this.http.put(`${s.N.apiUrl}/api/order/rate/${e}`,{headers:r,responseType:"json"}).pipe((0,o.K)(this.handleError))}increaseOrderPrice(e,r){const t=this.sharedService.headerGerneration();return this.http.put(`${s.N.apiUrl}/api/order/increase/${e}/${r}`,{headers:t,responseType:"json"}).pipe((0,o.K)(this.handleError))}completeOrder(e){const r=this.sharedService.headerGerneration();return this.http.put(`${s.N.apiUrl}/api/order/${e}`,{headers:r,responseType:"json"}).pipe((0,o.K)(this.handleError))}deleteOrder(e){const r=this.sharedService.headerGerneration();return this.http.delete(`${s.N.apiUrl}/api/order/${e}`,{headers:r}).pipe((0,n.b)(e=>console.log("deleted order: ",JSON.stringify(e))),(0,o.K)(this.handleError))}driverIncreaseOrderPrice(e,r,t){const i=this.sharedService.headerGerneration();return this.http.put(`${s.N.apiUrl}/api/order/increased/${e}/${r}/${t}`,{headers:i,responseType:"json"}).pipe((0,o.K)(this.handleError))}resetIncreasing(e){const r=this.sharedService.headerGerneration();return this.http.put(`${s.N.apiUrl}/api/order/reset/${e}`,{headers:r,responseType:"json"}).pipe((0,o.K)(this.handleError))}increasedOrderAccept(e,r){const t=this.sharedService.headerGerneration();return this.http.put(`${s.N.apiUrl}/api/order/accepted/increase/${e}/${r}`,{headers:t,responseType:"json"}).pipe((0,o.K)(this.handleError))}incrementOrderPrice(e){const r=this.sharedService.headerGerneration();return this.http.put(`${s.N.apiUrl}/api/order/increment/${e}`,{headers:r,responseType:"json"}).pipe((0,o.K)(this.handleError))}decrementOrderPrice(e){const r=this.sharedService.headerGerneration();return this.http.put(`${s.N.apiUrl}/api/order/decrement/${e}`,{headers:r,responseType:"json"}).pipe((0,o.K)(this.handleError))}handleError(e){let r="";return e.error instanceof ErrorEvent?(console.log("Client side error."),r=`Error: ${e.error.message}`):(console.log("Server side error."),r=`Error Code: ${e.status}\nMessage: ${e.message}`),console.log(r),(0,i._)(r)}}return e.\u0275fac=function(r){return new(r||e)(a.LFG(d.eN),a.LFG(h.F))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},3523:function(e,r,t){"use strict";t.r(r),t.d(r,{FavouriteOrdersPageModule:function(){return y},HttpLoaderFactory:function(){return S}});var i=t(8583),o=t(3679),n=t(7823),s=t(4481),a=t(4762),d=t(4426),h=t(2340),c=t(6522),p=t(3018),l=t(297),u=t(5056),g=t(7800);function v(e,r){1&e&&(p.TgZ(0,"ion-text",10),p.TgZ(1,"h2",11),p._uU(2),p.ALo(3,"translate"),p.qZA(),p._UZ(4,"hr"),p.qZA()),2&e&&(p.xp6(2),p.hij("",p.lcZ(3,1,"You dont have saved trips"),"!"))}function f(e,r){if(1&e){const e=p.EpF();p.TgZ(0,"div",12),p.TgZ(1,"a",13),p.TgZ(2,"p",14),p._uU(3),p.ALo(4,"translate"),p.qZA(),p.TgZ(5,"p",14),p._uU(6),p.ALo(7,"translate"),p.qZA(),p.TgZ(8,"div",7),p.TgZ(9,"div",6),p.TgZ(10,"div",15),p.TgZ(11,"small"),p._uU(12),p.ALo(13,"translate"),p.qZA(),p.qZA(),p.qZA(),p.TgZ(14,"div",16),p.TgZ(15,"small"),p._uU(16),p.ALo(17,"translate"),p.qZA(),p.qZA(),p._UZ(18,"hr"),p.qZA(),p.TgZ(19,"ion-toolbar",17),p.TgZ(20,"ion-buttons",0),p.TgZ(21,"ion-button",18),p.NdJ("click",function(){p.CHM(e);const t=r.$implicit;return p.oxw().useThis(t)}),p._uU(22),p.ALo(23,"translate"),p.qZA(),p.qZA(),p.TgZ(24,"ion-buttons",1),p.TgZ(25,"ion-button",19),p.NdJ("click",function(){p.CHM(e);const t=r.$implicit;return p.oxw().remove(t.id)}),p._uU(26),p.ALo(27,"translate"),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA()}if(2&e){const e=r.$implicit;p.xp6(3),p.AsE("",p.lcZ(4,10,"Location"),": ",e.location,""),p.xp6(3),p.AsE("",p.lcZ(7,12,"Destination"),": ",e.destination,""),p.xp6(6),p.AsE("",p.lcZ(13,14,"Trip distance"),": ",e.tripDistance," km"),p.xp6(4),p.AsE("",p.lcZ(17,16,"Total cost"),": ",e.totalPrice," \u043b\u0432."),p.xp6(6),p.Oqu(p.lcZ(23,18,"Use this trip")),p.xp6(4),p.Oqu(p.lcZ(27,20,"Delete"))}}const m=[{path:"",component:(()=>{class e{constructor(e,r,t,i,o,n){this.orderService=e,this.accountService=r,this.alertController=t,this.route=i,this.translate=o,this.popoverController=n,this.favourites=[],this.subscriptions=[],this.translate.setDefaultLang(this.accountService.userValue.choosenLanguage)}ngOnInit(){this.getMyOrders();const e=(new d.su).configureLogging(d.in.Information).withUrl(`${h.N.signalRUrl}/orderHub`).build();e.start().then(function(){console.log("signalR Connected in travelling")}).catch(function(e){return console.log(e.toString())}),e.on("BroadcastMessage",()=>{this.getMyOrders()})}getMyOrders(){this.subscriptions.push(this.orderService.getMyFavourites(this.accountService.userValue.id).subscribe(e=>{this.favourites=e}))}useThis(e){this.orderService.selectedFavourite=e,this.route.navigate(["menu/travelling"])}remove(e){this.deleteConfirmation(e)}openLanguagePopover(e){return(0,a.mG)(this,void 0,void 0,function*(){const r=yield this.popoverController.create({component:c.m,event:e});yield r.present()})}deleteConfirmation(e){return(0,a.mG)(this,void 0,void 0,function*(){this.translate.get(["Delete from favourites?","Yes","No"]).subscribe(r=>(0,a.mG)(this,void 0,void 0,function*(){const t=yield this.alertController.create({header:r["Delete from favourites?"],buttons:[{text:r.Yes,handler:()=>{this.subscriptions.push(this.orderService.deleteFavouriteOrder(e).subscribe(e=>{this.successDeletedFavourite()}))}},{text:r.No}]});yield t.present()}))})}successDeletedFavourite(){return(0,a.mG)(this,void 0,void 0,function*(){this.translate.get(["Successfully removed the trip!"]).subscribe(e=>(0,a.mG)(this,void 0,void 0,function*(){const r=yield this.alertController.create({header:e["Successfully removed the trip!"],buttons:[{text:"Ok"}]});yield r.present()}))})}}return e.\u0275fac=function(r){return new(r||e)(p.Y36(l.p),p.Y36(u.B),p.Y36(n.Br),p.Y36(s.F0),p.Y36(g.sK),p.Y36(n.Dh))},e.\u0275cmp=p.Xpm({type:e,selectors:[["app-favourite-orders"]],decls:17,vars:5,consts:[["slot","start"],["slot","end"],["id","toolbarIcon","name","language-outline",3,"click"],["padding","",1,"background"],["class","centered","color","dark",4,"ngIf"],[1,"row","mt-2"],[1,"col"],[1,"row"],[1,"col-md-10"],["class","list-group mt-2",4,"ngFor","ngForOf"],["color","dark",1,"centered"],[1,"fonted","mt-2"],[1,"list-group","mt-2"],[1,"text","list-group-item","list-group-item-action","flex-column","align-items-start"],[1,"mb-1","fonted"],[1,"d-flex","w-100","justify-content-between"],[1,"col-md-12"],["color","light"],["type","submit","color","dark",1,"fonted",3,"click"],["type","submit","color","danger",1,"fonted",3,"click"]],template:function(e,r){1&e&&(p.TgZ(0,"ion-header"),p.TgZ(1,"ion-toolbar"),p.TgZ(2,"ion-buttons",0),p._UZ(3,"ion-menu-button"),p.qZA(),p.TgZ(4,"ion-title"),p.TgZ(5,"ion-label"),p._uU(6),p.ALo(7,"translate"),p.qZA(),p.qZA(),p.TgZ(8,"ion-buttons",1),p.TgZ(9,"ion-icon",2),p.NdJ("click",function(e){return r.openLanguagePopover(e)}),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.TgZ(10,"ion-content",3),p.YNc(11,v,5,3,"ion-text",4),p.TgZ(12,"div",5),p.TgZ(13,"div",6),p.TgZ(14,"div",7),p.TgZ(15,"div",8),p.YNc(16,f,28,22,"div",9),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA()),2&e&&(p.xp6(6),p.Oqu(p.lcZ(7,3,"Favourites")),p.xp6(5),p.Q6J("ngIf",0==r.favourites.length),p.xp6(5),p.Q6J("ngForOf",r.favourites))},directives:[n.Gu,n.sr,n.Sm,n.fG,n.wd,n.Q$,n.gu,n.W2,i.O5,i.sg,n.yW,n.YG],pipes:[g.X$],styles:["ion-content[_ngcontent-%COMP%]{--ion-background-color:#e9e9e9}ion-toolbar[_ngcontent-%COMP%]{--ion-background-color:#eee}.noScroll[_ngcontent-%COMP%]{overflow:hidden}#map[_ngcontent-%COMP%]{height:100%;width:100%}ion-title[_ngcontent-%COMP%]{text-align:center}#toolbarIcon[_ngcontent-%COMP%]{font-size:1.7em}.fonted[_ngcontent-%COMP%]{font-family:Open Sans Light}.centered[_ngcontent-%COMP%]{text-align:center}hr[_ngcontent-%COMP%]{background:#eee;width:70%!important}"]}),e})()}];let Z=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=p.oAB({type:e}),e.\u0275inj=p.cJS({imports:[[s.Bz.forChild(m)],s.Bz]}),e})();var $=t(1841),T=t(2472),A=t(3577);function S(e){return new T.w(e)}let y=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=p.oAB({type:e}),e.\u0275inj=p.cJS({imports:[[i.ez,o.u5,n.Pc,Z,g.aw.forChild({loader:{provide:g.Zw,useFactory:S,deps:[$.eN]}}),A.LanguagePopoverPageModule]]}),e})()}}]);