{"version":3,"sources":["webpack:///src/app/driving/driving.page.scss","webpack:///src/_services/order/order.service.ts","webpack:///src/app/driving/driving.page.html","webpack:///src/app/driving/driving.page.ts","webpack:///src/app/driving/driving.module.ts","webpack:///src/app/driving/driving-routing.module.ts"],"names":["OrderService","http","sharedService","orders","completedOrder","data","headers","headerGerneration","post","apiUrl","responseType","pipe","handleError","userId","get","orderId","console","log","JSON","stringify","locationLat","locationLng","destinationLat","destinationLng","id","order","driverId","put","value","amount","error","errorMessage","ErrorEvent","message","status","providedIn","Geolocation","DrivingPage","route","orderService","accountService","driverService","translate","popoverController","subOrderService","optionService","subOrders","closeOrders","subscriptions","setDefaultLang","userValue","choosenLanguage","getMyLocation","isSubOreder","connection","configureLogging","Information","withUrl","signalRUrl","WebSockets","LongPolling","build","start","then","err","setTimeout","on","getData","categoryType","getCurrentPosition","coordinates","myLatLng","lat","coords","latitude","lng","longitude","myLat","toString","myLng","isDrivingNow","navigate","getDriver","subscribe","x","getNormalOrders","rating","getComfortOrders","getOutOfTown","getClosestOrders","getAllOrders","undefined","push","getAllSubOrders","forEach","o","optionsId","getOptionById","opt","location","destination","subOrder","editStatus","acceptedBy","length","sort","a","b","Date","createdOn","calculateClosest","calculateEta","categoryCloseCount","orderLatLng","locationLong","p1","google","maps","LatLng","p2","distance","geometry","spherical","computeDistanceBetween","toFixed","calcDistance","km","index","indexOf","splice","ev","create","component","event","popover","present","selector","template","HttpLoaderFactory","DrivingPageModule","imports","forChild","loader","provide","useFactory","deps","declarations","routes","path","DrivingPageRoutingModule","exports"],"mappings":"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","file":"driving-driving-module-es5.js","sourcesContent":["export default \"ion-content {\\n  --ion-background-color:#e9e9e9;\\n}\\n\\nion-toolbar {\\n  --ion-background-color:#eeeeee;\\n}\\n\\n#map {\\n  height: 100%;\\n  width: 100%;\\n}\\n\\nion-title {\\n  text-align: center;\\n}\\n\\nh5 {\\n  font-size: 0.9em;\\n}\\n\\n#toolbarIcon {\\n  font-size: 1.7em;\\n}\\n\\n.fonted {\\n  font-family: Open Sans Light;\\n}\\n\\n.centered {\\n  text-align: center;\\n}\\n\\n.text {\\n  font-family: Open Sans Light;\\n}\\n\\nhr {\\n  background: #eeeeee;\\n  width: 70% !important;\\n}\\n\\n.blink_me {\\n  -webkit-animation: blinker 1s linear infinite;\\n          animation: blinker 1s linear infinite;\\n}\\n\\n@-webkit-keyframes blinker {\\n  50% {\\n    opacity: 0;\\n  }\\n}\\n\\n@keyframes blinker {\\n  50% {\\n    opacity: 0;\\n  }\\n}\\n\\n.msg-box {\\n  width: 100%;\\n  height: 140px;\\n  padding: 10px 30px;\\n  font-size: 14px;\\n  font-family: Open Sans Light;\\n  overflow: auto;\\n}\\n\\n.msg-box ul {\\n  margin: -5px;\\n  list-style: none;\\n}\\n\\n.msg-box ul .ex-msg {\\n  text-align: right;\\n}\\n\\n.msg-box ul .in-msg {\\n  text-align: left;\\n  margin-left: -60px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uXFwuLlxcLi5cXGRyaXZpbmcucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBRUksOEJBQUE7QUFBSjs7QUFHQTtFQUNJLDhCQUFBO0FBQUo7O0FBR0k7RUFDQSxZQUFBO0VBQ0EsV0FBQTtBQUFKOztBQUlBO0VBQ0ksa0JBQUE7QUFESjs7QUFJQTtFQUNJLGdCQUFBO0FBREo7O0FBR0E7RUFDSSxnQkFBQTtBQUFKOztBQUdBO0VBQ0ksNEJBQUE7QUFBSjs7QUFHQTtFQUNJLGtCQUFBO0FBQUo7O0FBR0E7RUFFSSw0QkFBQTtBQURKOztBQUlBO0VBQ0ksbUJBQUE7RUFDQSxxQkFBQTtBQURKOztBQU1BO0VBQ0ksNkNBQUE7VUFBQSxxQ0FBQTtBQUhKOztBQU1FO0VBQ0U7SUFDRSxVQUFBO0VBSEo7QUFDRjs7QUFBRTtFQUNFO0lBQ0UsVUFBQTtFQUhKO0FBQ0Y7O0FBT0E7RUFDSSxXQUFBO0VBQ0EsYUFBQTtFQUNBLGtCQUFBO0VBQ0EsZUFBQTtFQUNBLDRCQUFBO0VBQ0EsY0FBQTtBQUxKOztBQU9JO0VBQ0ksWUFBQTtFQUVBLGdCQUFBO0FBTlI7O0FBT1E7RUFDSSxpQkFBQTtBQUxaOztBQVFRO0VBQ0ksZ0JBQUE7RUFDQSxrQkFBQTtBQU5aIiwiZmlsZSI6ImRyaXZpbmcucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiaW9uLWNvbnRlbnR7XHJcbiAgICAvLy0tYmFja2dyb3VuZDogdXJsKC4uLy4uL2Fzc2V0cy93cDQ3OTI3ODAtZGFyay1waG9uZS13YWxscGFwZXJzLmpwZykgMCAwLzEwMCUgMTAwJSBuby1yZXBlYXQ7XHJcbiAgICAtLWlvbi1iYWNrZ3JvdW5kLWNvbG9yOiNlOWU5ZTk7XHJcbn1cclxuXHJcbmlvbi10b29sYmFye1xyXG4gICAgLS1pb24tYmFja2dyb3VuZC1jb2xvcjojZWVlZWVlO1xyXG59XHJcblxyXG4gICAgI21hcCB7XHJcbiAgICBoZWlnaHQ6IDEwMCU7XHJcbiAgICB3aWR0aDogMTAwJTtcclxuICAgIH1cclxuICAgIFxyXG5cclxuaW9uLXRpdGxlIHtcclxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxufVxyXG5cclxuaDV7XHJcbiAgICBmb250LXNpemU6IDAuOWVtO1xyXG59XHJcbiN0b29sYmFySWNvbntcclxuICAgIGZvbnQtc2l6ZTogMS43ZW07XHJcbn1cclxuXHJcbi5mb250ZWR7XHJcbiAgICBmb250LWZhbWlseTogT3BlbiBTYW5zIExpZ2h0O1xyXG59XHJcblxyXG4uY2VudGVyZWR7XHJcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbn1cclxuXHJcbi50ZXh0eyAgXHJcbiAgICAvL2ZvbnQtZmFtaWx5OiAnRnJhbmtsaW4gR290aGljIE1lZGl1bScsICdBcmlhbCBOYXJyb3cnLCBBcmlhbCwgc2Fucy1zZXJpZjtcclxuICAgIGZvbnQtZmFtaWx5OiBPcGVuIFNhbnMgTGlnaHQ7XHJcbn1cclxuXHJcbmhye1xyXG4gICAgYmFja2dyb3VuZDojZWVlZWVlO1xyXG4gICAgd2lkdGg6IDcwJSAhaW1wb3J0YW50O1xyXG59XHJcblxyXG4vL2NoYXRcclxuXHJcbi5ibGlua19tZSB7XHJcbiAgICBhbmltYXRpb246IGJsaW5rZXIgMXMgbGluZWFyIGluZmluaXRlO1xyXG4gIH1cclxuICBcclxuICBAa2V5ZnJhbWVzIGJsaW5rZXIge1xyXG4gICAgNTAlIHtcclxuICAgICAgb3BhY2l0eTogMDtcclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuLm1zZy1ib3gge1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICBoZWlnaHQ6IDE0MHB4O1xyXG4gICAgcGFkZGluZzogMTBweCAzMHB4O1xyXG4gICAgZm9udC1zaXplOiAxNHB4O1xyXG4gICAgZm9udC1mYW1pbHk6IE9wZW4gU2FucyBMaWdodDtcclxuICAgIG92ZXJmbG93OiBhdXRvO1xyXG5cclxuICAgIHVsIHtcclxuICAgICAgICBtYXJnaW46IC01cHg7XHJcblxyXG4gICAgICAgIGxpc3Qtc3R5bGU6IG5vbmU7XHJcbiAgICAgICAgLmV4LW1zZyB7XHJcbiAgICAgICAgICAgIHRleHQtYWxpZ246IHJpZ2h0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLmluLW1zZyB7XHJcbiAgICAgICAgICAgIHRleHQtYWxpZ246IGxlZnQ7XHJcbiAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiAtNjBweDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxufVxyXG5cclxuIl19 */\";","import { HttpClient, HttpHeaders } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { Observable, throwError } from 'rxjs';\r\nimport { catchError, tap } from 'rxjs/operators';\r\nimport { environment } from 'src/environments/environment';\r\nimport { FavouriteOrder, Order } from 'src/_models';\r\nimport { SharedService } from '../shared/shared.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class OrderService {\r\n  public selectedFavourite: FavouriteOrder;\r\n\r\n  public order: Order;\r\n  public orders = [];\r\n  public currentOrderId: string;\r\n\r\n  public driverId: string;\r\n  public completedOrder = false;\r\n  public alertForcomplete: string;\r\n\r\n  public chosenLocation: string;\r\n  public chosenDestination: string;\r\n\r\n  public userLocationLat: number;\r\n  public userLocationLong: number;\r\n\r\n  public userDestinationLat: number;\r\n  public userDestinationLong: number;\r\n\r\n\r\n  constructor(private http: HttpClient, private sharedService: SharedService) { }\r\n\r\n  public createOrder(data) {\r\n    const headers = this.sharedService.headerGerneration();\r\n\r\n    return this.http.post(`${environment.apiUrl}/api/order`, data, { headers, responseType: 'text' })\r\n      .pipe(\r\n        catchError(this.handleError)\r\n      );\r\n  }\r\n\r\n  addToFavourites(data) {\r\n    const headers = this.sharedService.headerGerneration();\r\n\r\n    return this.http.post(`${environment.apiUrl}/api/order/favourites`, data, { headers, responseType: 'text' })\r\n      .pipe(\r\n        catchError(this.handleError)\r\n      );\r\n  }\r\n\r\n  getMyFavourites(userId: string): Observable<FavouriteOrder[]> {\r\n    const headers = this.sharedService.headerGerneration();\r\n    return this.http.get<FavouriteOrder[]>(`${environment.apiUrl}/api/order/favourites/${userId}`, {headers})\r\n      .pipe(\r\n        catchError(this.handleError)\r\n      );\r\n  }\r\n\r\n  deleteFavouriteOrder(orderId: string): Observable<FavouriteOrder> {\r\n    const headers = this.sharedService.headerGerneration();\r\n    return this.http.delete<FavouriteOrder>(`${environment.apiUrl}/api/order/favourites/${orderId}`, {headers})\r\n      .pipe(\r\n        tap(data => console.log('deleted favourite order: ', JSON.stringify(data))),\r\n        catchError(this.handleError)\r\n      );\r\n  }\r\n\r\n  public getDirections(locationLat, locationLng, destinationLat, destinationLng) {\r\n    const headers = this.sharedService.headerGerneration();\r\n\r\n    return this.http.post(`https://maps.googleapis.com/maps/api/distancematrix/json?units=imperial&origins=${locationLat},${locationLng}&destinations=${destinationLat}%2C${destinationLng}%7C&key=AIzaSyAEvlXdM4joG4bNVT5l-tJSk9lUSGhxMNw`, { headers, responseType: 'text' })\r\n      .pipe(\r\n        catchError(this.handleError)\r\n      );\r\n  }\r\n\r\n  getOrderById(id: string): Observable<Order> {\r\n    const headers = this.sharedService.headerGerneration();\r\n    return this.http.get<Order>(`${environment.apiUrl}/api/order/id/${id}`, {headers})\r\n      .pipe(\r\n        tap(data => this.order = data)\r\n      );\r\n  }\r\n\r\n  getCanceledOrderById(id: string): Observable<Order> {\r\n    const headers = this.sharedService.headerGerneration();\r\n    return this.http.get<Order>(`${environment.apiUrl}/api/order/canceled/${id}`, {headers})\r\n      .pipe(\r\n        tap(data => this.order = data)\r\n      );\r\n  }\r\n\r\n  getLastCompletedOrder(userId: string): Observable<Order> {\r\n    const headers = this.sharedService.headerGerneration();\r\n    return this.http.get<Order>(`${environment.apiUrl}/api/order/completed/${userId}`, {headers})\r\n      .pipe(\r\n        catchError(this.handleError)\r\n      );\r\n  }\r\n\r\n  getMyOrder(userId: string): Observable<Order> {\r\n    const headers = this.sharedService.headerGerneration();\r\n    return this.http.get<Order>(`${environment.apiUrl}/api/order/${userId}`, {headers})\r\n      .pipe(\r\n        catchError(this.handleError)\r\n      );\r\n  }\r\n\r\n  getOrderForChat(userId: string): Observable<Order> {\r\n    const headers = this.sharedService.headerGerneration();\r\n    return this.http.get<Order>(`${environment.apiUrl}/api/order/chat/${userId}`, {headers})\r\n      .pipe(\r\n        catchError(this.handleError)\r\n      );\r\n  }\r\n\r\n  getAllOrders(): Observable<Order[]> {\r\n    const headers = this.sharedService.headerGerneration();\r\n    return this.http.get<Order[]>(`${environment.apiUrl}/api/order`, {headers})\r\n      .pipe(\r\n        catchError(this.handleError)\r\n      )\r\n  }\r\n\r\n  getNormalOrders(): Observable<Order[]> {\r\n    const headers = this.sharedService.headerGerneration();\r\n    return this.http.get<Order[]>(`${environment.apiUrl}/api/order/normal`, {headers})\r\n      .pipe(\r\n        catchError(this.handleError)\r\n      )\r\n  }\r\n\r\n  getComfortOrders(): Observable<Order[]> {\r\n    const headers = this.sharedService.headerGerneration();\r\n    return this.http.get<Order[]>(`${environment.apiUrl}/api/order/comfort`, {headers})\r\n      .pipe(\r\n        catchError(this.handleError)\r\n      )\r\n  }\r\n\r\n  acceptOrder(orderId: string, driverId: string): Observable<Order> {\r\n    const headers = this.sharedService.headerGerneration();\r\n    return this.http.put<Order>(`${environment.apiUrl}/api/order/${orderId}/${driverId}`, { headers, responseType: 'json' },)\r\n      .pipe(\r\n        tap(data => this.driverId = driverId),\r\n        catchError(this.handleError)\r\n      );\r\n\r\n  }\r\n\r\n  updateOrderEta(orderId: string, value: string): Observable<Order> {\r\n    const headers = this.sharedService.headerGerneration();\r\n    return this.http.put<Order>(`${environment.apiUrl}/api/order/eta/${orderId}/${value}`, { headers, responseType: 'json' },)\r\n      .pipe(\r\n        catchError(this.handleError)\r\n      );\r\n  }\r\n\r\n  updateDriverArrived(orderId: string): Observable<Order> {\r\n    const headers = this.sharedService.headerGerneration();\r\n    return this.http.put<Order>(`${environment.apiUrl}/api/order/arrived/${orderId}`, { headers, responseType: 'json' },)\r\n      .pipe(\r\n        catchError(this.handleError)\r\n      );\r\n  }\r\n\r\n  rateOrder(orderId: string): Observable<Order> {\r\n    const headers = this.sharedService.headerGerneration();\r\n    return this.http.put<Order>(`${environment.apiUrl}/api/order/rate/${orderId}`, { headers, responseType: 'json' },)\r\n      .pipe(\r\n        catchError(this.handleError)\r\n      );\r\n  }\r\n\r\n  increaseOrderPrice(id: string, amount: number): Observable<Order> {\r\n    const headers = this.sharedService.headerGerneration();\r\n    return this.http.put<Order>(`${environment.apiUrl}/api/order/increase/${id}/${amount}`, { headers, responseType: 'json' },)\r\n      .pipe(\r\n        catchError(this.handleError)\r\n      );\r\n\r\n  }\r\n\r\n  completeOrder(orderId: string): Observable<Order> {\r\n    const headers = this.sharedService.headerGerneration();\r\n    return this.http.put<Order>(`${environment.apiUrl}/api/order/${orderId}`, { headers, responseType: 'json' },)\r\n      .pipe(\r\n        catchError(this.handleError)\r\n      );\r\n\r\n  }\r\n\r\n  deleteOrder(orderId: string): Observable<Order> {\r\n    const headers = this.sharedService.headerGerneration();\r\n    return this.http.delete<Order>(`${environment.apiUrl}/api/order/${orderId}`, {headers})\r\n      .pipe(\r\n        tap(data => console.log('deleted order: ', JSON.stringify(data))),\r\n        catchError(this.handleError)\r\n      );\r\n  }\r\n\r\n  driverIncreaseOrderPrice(orderId: string, amount: number, driverId: string): Observable<Order> {\r\n    const headers = this.sharedService.headerGerneration();\r\n    return this.http.put<Order>(`${environment.apiUrl}/api/order/increased/${orderId}/${amount}/${driverId}`, { headers, responseType: 'json' },)\r\n      .pipe(\r\n        catchError(this.handleError)\r\n      );\r\n  }\r\n\r\n  resetIncreasing(orderId: string): Observable<Order> {\r\n    const headers = this.sharedService.headerGerneration();\r\n\r\n    return this.http.put<Order>(`${environment.apiUrl}/api/order/reset/${orderId}`, { headers, responseType: 'json' },)\r\n      .pipe(\r\n        catchError(this.handleError)\r\n      );\r\n  }\r\n\r\n\r\n  increasedOrderAccept(orderId: string, value: boolean): Observable<Order> {\r\n    const headers = this.sharedService.headerGerneration();;\r\n\r\n    return this.http.put<Order>(`${environment.apiUrl}/api/order/accepted/increase/${orderId}/${value}`, { headers, responseType: 'json' },)\r\n      .pipe(\r\n        catchError(this.handleError)\r\n      );\r\n  }\r\n\r\n  incrementOrderPrice(orderId: string): Observable<Order> {\r\n    const headers = this.sharedService.headerGerneration();\r\n\r\n    return this.http.put<Order>(`${environment.apiUrl}/api/order/increment/${orderId}`, { headers, responseType: 'json' },)\r\n      .pipe(\r\n        catchError(this.handleError)\r\n      );\r\n  }\r\n\r\n  decrementOrderPrice(orderId: string): Observable<Order> {\r\n    const headers = this.sharedService.headerGerneration();\r\n\r\n    return this.http.put<Order>(`${environment.apiUrl}/api/order/decrement/${orderId}`, { headers, responseType: 'json' },)\r\n      .pipe(\r\n        catchError(this.handleError)\r\n      );\r\n  }\r\n\r\n  handleError(error) {\r\n    let errorMessage = '';\r\n    if (error.error instanceof ErrorEvent) {\r\n      // client-side error\r\n      console.log('Client side error.')\r\n      errorMessage = `Error: ${error.error.message}`;\r\n    } else {\r\n      // server-side error\r\n      console.log('Server side error.')\r\n      errorMessage = `Error Code: ${error.status}\\nMessage: ${error.message}`;\r\n    }\r\n    console.log(errorMessage);\r\n    return throwError(errorMessage);\r\n  }\r\n}\r\n","export default \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-menu-button></ion-menu-button>\\r\\n    </ion-buttons>\\r\\n\\r\\n    <ion-title>\\r\\n      <ion-label>{{'Orders' | translate}}</ion-label>\\r\\n    </ion-title>\\r\\n\\r\\n    <ion-buttons slot=\\\"end\\\">\\r\\n      <ion-icon (click)='openLanguagePopover($event)' id=\\\"toolbarIcon\\\" name=\\\"language-outline\\\"></ion-icon>\\r\\n    </ion-buttons>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n<ion-content padding class=\\\"background\\\">\\r\\n    <div class=\\\"row mt-2\\\">\\r\\n        <div class=\\\"col\\\">\\r\\n            <div class=\\\"row\\\">\\r\\n                <div class=\\\"col-md-12 text-center\\\">\\r\\n                    <ion-text class=\\\"centered\\\" color=\\\"dark\\\">\\r\\n                        <h2 class=\\\"fonted blink_me\\\">{{'Waiting for orders' | translate}}</h2>\\r\\n                        <hr>\\r\\n                    </ion-text>\\r\\n                </div>\\r\\n\\r\\n                <!-- style=\\\"display: none;\\\" -- for distributing orders -->\\r\\n\\r\\n                <div class=\\\"col-md-10\\\" *ngIf=\\\"!isSubOreder\\\">\\r\\n                    <div *ngFor=\\\"let oldOrder of orders\\\" id=\\\"orderDiv\\\" class=\\\"list-group mt-2\\\">\\r\\n\\r\\n                        <a class=\\\"text list-group-item list-group-item-action flex-column align-items-start\\\">\\r\\n                            <div class=\\\"d-flex w-100 justify-content-between\\\">\\r\\n                                <h5 class=\\\"mb-1 fonted\\\"></h5>\\r\\n                                <small>{{oldOrder.createdOn | date:'MM/dd/yyyy h:mm'}}</small>\\r\\n                            </div>\\r\\n                            <p><ion-icon class=\\\"mr-2\\\" name=\\\"analytics-outline\\\"></ion-icon>{{oldOrder.location}}</p>\\r\\n                            <hr />\\r\\n                            <p><ion-icon class=\\\"mr-2\\\" name=\\\"arrow-forward-outline\\\"></ion-icon>{{oldOrder.destination}}</p>\\r\\n                            <div class=\\\"d-flex w-100 justify-content-between\\\">\\r\\n                                <h5 class=\\\"mb-1 fonted\\\"></h5>\\r\\n                                <button class=\\\"btn btn-info\\\" [routerLink]='[\\\"/menu/order-details\\\",oldOrder.id]'>{{'Order details' | translate}}</button>\\r\\n                            </div>\\r\\n                        </a>\\r\\n                    </div>\\r\\n                </div>\\r\\n\\r\\n                <div class=\\\"col-md-10\\\" *ngIf=\\\"isSubOreder\\\">\\r\\n                    <div *ngFor=\\\"let subOrder of subOrders\\\" id=\\\"orderDiv\\\" class=\\\"list-group mt-2\\\">\\r\\n\\r\\n                        <a class=\\\"text list-group-item list-group-item-action flex-column align-items-start\\\">\\r\\n                            <div class=\\\"d-flex w-100 justify-content-between\\\">\\r\\n                                <small>{{subOrder.createdOn | date:'MM/dd/yyyy h:mm'}}</small>\\r\\n                                <small><i class=\\\"fa fa-calendar\\\"></i> {{subOrder.date}}</small>\\r\\n                            </div>\\r\\n\\r\\n                            <h4 class=\\\"mt-1 text-center \\\">{{subOrder.location}} <ion-icon class=\\\"mr-2\\\" name=\\\"arrow-forward-outline\\\"></ion-icon> {{subOrder.destination}}</h4>\\r\\n                            <hr />\\r\\n                            <div class=\\\"row pl-3\\\">\\r\\n                                <p>{{subOrder.info}}</p><br />\\r\\n                            </div>\\r\\n                            <div class=\\\"row pl-3\\\">\\r\\n                               <p><ion-icon name=\\\"person\\\"></ion-icon>  {{subOrder.applicationUser.firstName}}  {{subOrder.applicationUser.lastName}} </p>\\r\\n                            </div>\\r\\n                            <div class=\\\"d-flex w-100 justify-content-between\\\">\\r\\n                                <button class=\\\"fonted btn btn-info\\\" (click)=\\\"acceptSubOrder(subOrder)\\\" type=\\\"button\\\">{{'Accept' | translate}}</button>\\r\\n                            </div>\\r\\n                        </a>\\r\\n\\r\\n                        \\r\\n                    </div>\\r\\n                </div>\\r\\n            </div>\\r\\n        </div>\\r\\n    </div>\\r\\n\\r\\n\\r\\n    <div class=\\\"row mt-2\\\" *ngIf=\\\"subOrders\\\">\\r\\n       \\r\\n                <!-- style=\\\"display: none;\\\" -- for distributing orders -->\\r\\n\\r\\n    </div>\\r\\n\\r\\n\\r\\n</ion-content>\";","import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport * as signalR from '@aspnet/signalr';\r\nimport { Order } from 'src/_models';\r\nimport { SubOrder } from 'src/_models/suborder';\r\nimport { AccountService } from 'src/_services';\r\nimport { OrderService } from 'src/_services/order/order.service';\r\nimport { PopoverController } from '@ionic/angular';\r\nimport { DriverService } from 'src/_services/driver/driver.service';\r\nimport { environment } from 'src/environments/environment';\r\nimport { Plugins } from '@capacitor/core';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { LanguagePopoverPage } from '../language-popover/language-popover.page';\r\nimport { Subscription } from 'rxjs';\r\nimport { HttpTransportType } from '@aspnet/signalr';\r\nimport { SuborderService } from '../../_services/suborder/suborder.service';\r\nimport { OptionsService } from '../../_services/suborder/options.service';\r\nimport { SubOrderOpt } from '../../_models/suporder-opt';\r\n\r\nconst { Geolocation } = Plugins;\r\ndeclare var google: any;\r\n\r\n@Component({\r\n  selector: 'app-driving',\r\n  templateUrl: './driving.page.html',\r\n  styleUrls: ['./driving.page.scss'],\r\n})\r\nexport class DrivingPage implements OnInit {\r\n    categoryType;\r\n    isSubOreder;\r\n\r\n    orders: Order[] = [];\r\n    subOrders: SubOrder[] = [];\r\n    closeOrders: Order[] = [];\r\n  //Map\r\n  distance: any;\r\n\r\n  myLat: string;\r\n  myLng: string;\r\n  private subscriptions: Subscription[] = [];\r\n\r\n  constructor(private route: Router,\r\n    private orderService: OrderService,\r\n    private accountService: AccountService,\r\n    private driverService: DriverService,\r\n    private translate: TranslateService,\r\n      private popoverController: PopoverController,\r\n      private subOrderService: SuborderService,\r\n      private optionService: OptionsService\r\n\r\n  ) {\r\n    this.translate.setDefaultLang(this.accountService.userValue.choosenLanguage);\r\n    this.getMyLocation();\r\n  }\r\n\r\n    ngOnInit(): void {\r\n\r\n    this.isSubOreder = false;\r\n\r\n    const connection = new signalR.HubConnectionBuilder()\r\n      .configureLogging(signalR.LogLevel.Information)\r\n      .withUrl(`${environment.signalRUrl}/orderHub`, HttpTransportType.WebSockets | HttpTransportType.LongPolling)\r\n      .build();\r\n\r\n    connection.start().then(function () {\r\n      console.log('signalR Connected in driving');\r\n    }).catch(function (err) {\r\n      console.log(\"Reconnecting in 1 sec.\");\r\n      setTimeout(() => connection.start(), 1000);\r\n    });\r\n\r\n\r\n    connection.on('BroadcastMessage', () => {\r\n      console.log('broadcasted from driving')\r\n    });\r\n\r\n    connection.on('CreatedOrder', () => {\r\n      this.getData();\r\n    });\r\n\r\n    connection.on('OrderDeleted', () => {\r\n      this.getData();\r\n    });\r\n  }\r\n\r\n  ionViewDidEnter() {\r\n    this.getMyLocation();\r\n    this.categoryType = this.driverService.categoryType;\r\n    this.getData();\r\n  }\r\n\r\n  async getMyLocation() {\r\n    const coordinates = await Geolocation.getCurrentPosition();\r\n    const myLatLng = { lat: coordinates.coords.latitude, lng: coordinates.coords.longitude };\r\n\r\n    this.myLat = myLatLng.lat.toString();\r\n    this.myLng = myLatLng.lng.toString();\r\n\r\n  }\r\n\r\n\r\n  getData() {\r\n    if (this.accountService.userValue.isDrivingNow === true) {\r\n      this.route.navigate(['menu/driving-mode'])\r\n    }\r\n    this.driverService.getDriver(this.accountService.userValue.driverId)\r\n      .subscribe(x => {\r\n          if (this.driverService.categoryType == 'Normal') {\r\n              this.isSubOreder = false;\r\n          this.getNormalOrders(x.rating);\r\n          } else if (this.driverService.categoryType == 'Comfort') {\r\n              this.isSubOreder = false;\r\n            this.getComfortOrders(x.rating);\r\n        } else if (this.driverService.categoryType == 'Out of town') {\r\n            this.getOutOfTown();\r\n          } else if (this.driverService.categoryType == 'Closest') {\r\n              this.isSubOreder = false;\r\n          this.getClosestOrders(x.rating);\r\n          } else if (this.driverService.categoryType == 'All') {\r\n              this.isSubOreder = false;\r\n          this.getAllOrders(x.rating);\r\n          } else if (this.driverService.categoryType == undefined) {\r\n              this.isSubOreder = false;\r\n          this.driverService.categoryType == 'All';\r\n          this.getAllOrders(x.rating);\r\n        }\r\n      })\r\n\r\n  }\r\n\r\n    getOutOfTown() {\r\n        this.subscriptions.push(this.subOrderService.getAllSubOrders('Waiting')\r\n            .subscribe(data => {\r\n                if (data == null) {\r\n                    return;\r\n                }\r\n\r\n                this.isSubOreder = true;\r\n\r\n                this.subOrders = data\r\n\r\n                this.subOrders.forEach(o => {\r\n                    let id = o.optionsId;\r\n                    this.optionService.getOptionById(id).subscribe(data => {\r\n                        let opt: SubOrderOpt = data;\r\n\r\n                        o.location = opt.location\r\n                        o.destination = opt.destination\r\n\r\n                    });\r\n                })\r\n\r\n                console.log(this.subOrders);\r\n            } ));\r\n    }\r\n\r\n    acceptSubOrder(subOrder: SubOrder) {\r\n        this.subscriptions.push(this.subOrderService.editStatus(subOrder.id, { acceptedBy: this.accountService.userValue.id, status: 'Accepted' })\r\n            .subscribe(data => {\r\n                if (data) {\r\n                    this.route.navigate(['menu/reservations'])  \r\n                }\r\n\r\n                \r\n            }))\r\n    }\r\n\r\n  getAllOrders(rating) {\r\n    this.subscriptions.push(this.orderService.getAllOrders()\r\n      .subscribe(data => {\r\n        if (data == null) {\r\n          return;\r\n        }\r\n\r\n        if (data.length < this.orders.length) {\r\n          this.orders = data;\r\n          return;\r\n        }\r\n\r\n        data.sort((a, b) => {\r\n          return <any>new Date(b.createdOn) - <any>new Date(a.createdOn);\r\n        });\r\n\r\n        if (rating >= 0 && rating <= 2) {\r\n          setTimeout(() => {\r\n            this.orders = data;\r\n          }, 10000);\r\n        }\r\n        if (rating >= 2 && rating <= 4) {\r\n          setTimeout(() => {\r\n            this.orders = data;\r\n          }, 8000);\r\n        }\r\n        if (rating >= 4 && rating <= 6) {\r\n          setTimeout(() => {\r\n            this.orders = data;\r\n          }, 5000);\r\n        }\r\n        if (rating >= 6 && rating <= 8) {\r\n          setTimeout(() => {\r\n            this.orders = data;\r\n          }, 3000);\r\n        }\r\n        if (rating >= 8 && rating <= 10) {\r\n          setTimeout(() => {\r\n            this.orders = data;\r\n          }, 1000);\r\n        }\r\n        this.calculateClosest();\r\n      }))\r\n  }\r\n\r\n  //Get normal orders based by rating\r\n  getNormalOrders(rating) {\r\n    this.subscriptions.push(this.orderService.getNormalOrders()\r\n      .subscribe(data => {\r\n        if (data == null) {\r\n          return;\r\n        }\r\n\r\n        if (data.length < this.orders.length) {\r\n          this.orders = data;\r\n          return;\r\n        }\r\n        if (rating >= 0 && rating <= 2) {\r\n          setTimeout(() => {\r\n            this.orders = data;\r\n          }, 10000);\r\n        }\r\n        if (rating >= 2 && rating <= 4) {\r\n          setTimeout(() => {\r\n            this.orders = data;\r\n          }, 8000);\r\n        }\r\n        if (rating >= 4 && rating <= 6) {\r\n          setTimeout(() => {\r\n            this.orders = data;\r\n          }, 5000);\r\n        }\r\n        if (rating >= 6 && rating <= 8) {\r\n          setTimeout(() => {\r\n            this.orders = data;\r\n          }, 3000);\r\n        }\r\n        if (rating >= 8 && rating <= 10) {\r\n          setTimeout(() => {\r\n            this.orders = data;\r\n          }, 1000);\r\n        }\r\n      }))\r\n  }\r\n\r\n  //Get comfort orders based by rating\r\n  getComfortOrders(rating) {\r\n    this.subscriptions.push(this.orderService.getComfortOrders()\r\n      .subscribe(data => {\r\n        if (data == null) {\r\n          return;\r\n        }\r\n\r\n        if (data.length < this.orders.length) {\r\n          this.orders = data;\r\n          return;\r\n        }\r\n        if (rating >= 0 && rating <= 2) {\r\n          setTimeout(() => {\r\n            this.orders = data;\r\n          }, 10000);\r\n        }\r\n        if (rating >= 2 && rating <= 4) {\r\n          setTimeout(() => {\r\n            this.orders = data;\r\n          }, 8000);\r\n        }\r\n        if (rating >= 4 && rating <= 6) {\r\n          setTimeout(() => {\r\n            this.orders = data;\r\n          }, 5000);\r\n        }\r\n        if (rating >= 6 && rating <= 8) {\r\n          setTimeout(() => {\r\n            this.orders = data;\r\n          }, 3000);\r\n        }\r\n        if (rating >= 8 && rating <= 10) {\r\n          setTimeout(() => {\r\n            this.orders = data;\r\n          }, 1000);\r\n        }\r\n      }))\r\n\r\n  }\r\n\r\n  getClosestOrders(rating) {\r\n    this.subscriptions.push(this.orderService.getAllOrders()\r\n      .subscribe(data => {\r\n        if (data == null) {\r\n          return;\r\n        }\r\n        this.calculateEta(data);\r\n        this.driverService.categoryCloseCount = this.orders.length;\r\n\r\n      }))\r\n  }\r\n\r\n  calculateClosest() {\r\n    this.closeOrders = [];\r\n    this.orders.forEach(async order => {\r\n      const coordinates = await Geolocation.getCurrentPosition();\r\n      const myLatLng = { lat: coordinates.coords.latitude, lng: coordinates.coords.longitude };\r\n\r\n      const orderLatLng = { lat: order.locationLat, lng: order.locationLong };\r\n      var p1 = new google.maps.LatLng(myLatLng.lat, myLatLng.lng);\r\n      var p2 = new google.maps.LatLng(orderLatLng.lat, orderLatLng.lng);\r\n      //calculates distance between two points in km's\r\n      this.distance = (google.maps.geometry.spherical.computeDistanceBetween(p1, p2) / 1000).toFixed(2);\r\n\r\n      if (this.distance > 5) {\r\n        this.closeOrders.push(order);\r\n      }\r\n      this.driverService.categoryCloseCount = this.closeOrders.length;\r\n\r\n    });\r\n  }\r\n\r\n  calculateEta(orders) {\r\n    this.orders = [];\r\n    orders.forEach(async order => {\r\n      const coordinates = await Geolocation.getCurrentPosition();\r\n      const myLatLng = { lat: coordinates.coords.latitude, lng: coordinates.coords.longitude };\r\n\r\n      const orderLatLng = { lat: order.locationLat, lng: order.locationLong };\r\n      var p1 = new google.maps.LatLng(myLatLng.lat, myLatLng.lng);\r\n      var p2 = new google.maps.LatLng(orderLatLng.lat, orderLatLng.lng);\r\n      this.distance = calcDistance(p1, p2);\r\n      order.km = +this.distance;\r\n      //calculates distance between two points in km's\r\n      function calcDistance(p1, p2) {\r\n        return (google.maps.geometry.spherical.computeDistanceBetween(p1, p2) / 1000).toFixed(2);\r\n      }\r\n\r\n      if (order.km > 5) {\r\n        let index = orders.indexOf(order);\r\n        orders.splice(index, 1);\r\n      }\r\n      this.driverService.categoryCloseCount = orders.length;\r\n    });\r\n    this.closeOrders = orders;\r\n    this.orders = orders;\r\n  }\r\n\r\n  async openLanguagePopover(ev) {\r\n    const popover = await this.popoverController.create({\r\n      component: LanguagePopoverPage,\r\n      event: ev\r\n    });\r\n    await popover.present();\r\n  }\r\n}","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { DrivingPageRoutingModule } from './driving-routing.module';\r\n\r\nimport { DrivingPage } from './driving.page';\r\nimport { TranslateModule, TranslateLoader } from '@ngx-translate/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { TranslateHttpLoader } from '@ngx-translate/http-loader';\r\nimport { LanguagePopoverPageModule } from '../language-popover/language-popover.module';\r\n\r\n\r\nexport function HttpLoaderFactory(http: HttpClient) {\r\n  return new TranslateHttpLoader(http);\r\n}\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    DrivingPageRoutingModule,\r\n    TranslateModule.forChild({\r\n      loader: {\r\n        provide: TranslateLoader,\r\n        useFactory: HttpLoaderFactory,\r\n        deps: [HttpClient]\r\n      }\r\n    }),\r\n    LanguagePopoverPageModule,\r\n    ReactiveFormsModule\r\n  ],\r\n  declarations: [DrivingPage]\r\n})\r\nexport class DrivingPageModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { DrivingPage } from './driving.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: DrivingPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class DrivingPageRoutingModule {}\r\n"]}