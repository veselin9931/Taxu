(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{wZQh:function(t,e,n){"use strict";n.r(e),n.d(e,"HttpLoaderFactory",function(){return z}),n.d(e,"OutOfTownPageModule",function(){return E});var o=n("ofXK"),r=n("3Pt+"),i=n("TEn/"),s=n("tyNb"),c=n("mrSG"),b=n("Gpoy"),a=n("AytR"),l=n("oXKM"),d=n("fXoL"),u=n("z6cu"),p=n("JIr8"),f=n("tk/3"),h=n("Dsd+");let g=(()=>{class t{constructor(t,e){this.http=t,this.sharedService=e,this.orders=[]}getOptions(){const t=this.sharedService.headerGerneration();return this.http.get(`${a.a.apiUrl}/api/suborder/options`,{headers:t}).pipe(Object(p.a)(this.handleError))}handleError(t){let e="";return t.error instanceof ErrorEvent?(console.log("Client side error."),e=`Error: ${t.error.message}`):(console.log("Server side error."),e=`Error Code: ${t.status}\nMessage: ${t.message}`),console.log(e),Object(u.a)(e)}}return t.\u0275fac=function(e){return new(e||t)(d.Rb(f.a),d.Rb(h.a))},t.\u0275prov=d.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),m=(()=>{class t{constructor(t,e){this.http=t,this.sharedService=e}createSubOrder(t){const e=this.sharedService.headerGerneration();return this.http.post(`${a.a.apiUrl}/api/suborder`,t,{headers:e,responseType:"text"}).pipe(Object(p.a)(this.handleError))}handleError(t){let e="";return t.error instanceof ErrorEvent?(console.log("Client side error."),e=`Error: ${t.error.message}`):(console.log("Server side error."),e=`Error Code: ${t.status}\nMessage: ${t.message}`),console.log(e),Object(u.a)(e)}}return t.\u0275fac=function(e){return new(e||t)(d.Rb(f.a),d.Rb(h.a))},t.\u0275prov=d.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var M=n("8Xdb"),v=n("sYmb");function O(t,e){if(1&t&&(d.Nb(0,"ion-select-option",13),d.pc(1),d.Mb()),2&t){const t=e.$implicit;d.ec("value",t.id),d.zb(1),d.tc("",t.location," --\x3e ",t.destination," | ",t.totalPrice," BGN")}}function C(t,e){1&t&&d.Lb(0,"span",14)}function N(t,e){1&t&&(d.Nb(0,"button",21),d.pc(1," {{'Cost'| translate'}} : {{orderTotalPrice | number : '1.2-2'}} \ufffd\ufffd. "),d.Mb())}function w(t,e){1&t&&(d.Nb(0,"button",22),d.pc(1),d.Yb(2,"translate"),d.Mb()),2&t&&(d.zb(1),d.rc(" ",d.Zb(2,1,"Cancel")," "))}function y(t,e){if(1&t&&(d.Nb(0,"ion-footer",15),d.Nb(1,"ion-toolbar"),d.Nb(2,"div",16),d.Nb(3,"div",17),d.Nb(4,"div",18),d.oc(5,N,2,0,"button",19),d.oc(6,w,3,3,"button",20),d.Mb(),d.Mb(),d.Mb(),d.Mb(),d.Mb()),2&t){const t=d.Xb();d.zb(5),d.dc("ngIf",1==t.isCompleted),d.zb(1),d.dc("ngIf",1==t.isCompleted)}}const S=[{path:"",component:(()=>{class t{constructor(t,e,n,o,r){this.popoverController=t,this.optionService=e,this.formBuilder=n,this.subOrderService=o,this.accountService=r,this.options=[],this.subscriptions=[],this.user=this.accountService.userValue,this.status="",this.isSubmitted=!1,this.isCompleted=!1}ngOnInit(){this.form=this.formBuilder.group({applicationUserId:[""],status:"Waiting",info:"",date:"",time:"",optionId:""});const t=(new b.b).configureLogging(b.c.Information).withUrl(`${a.a.signalRUrl}/orderHub`).build();t.start().then(function(){console.log("signalR Connected in travelling")}).catch(function(t){return console.log(t)}),t.on("CreatedSubOrder",()=>{}),this.getMyOptions()}getMyOptions(){this.subscriptions.push(this.optionService.getOptions().subscribe(t=>{this.options=t}))}onSubmit(){this.isSubmitted=!0,this.form.valid&&(this.subscriptions.push(this.subOrderService.createSubOrder(this.form.value).subscribe(t=>{this.status=this.form.value.status})),console.log(this.subOrder))}openLanguagePopover(t){return Object(c.a)(this,void 0,void 0,function*(){const e=yield this.popoverController.create({component:l.a,event:t});yield e.present()})}}return t.\u0275fac=function(e){return new(e||t)(d.Kb(i.H),d.Kb(g),d.Kb(r.b),d.Kb(m),d.Kb(M.a))},t.\u0275cmp=d.Eb({type:t,selectors:[["app-out-of-town"]],decls:35,vars:11,consts:[["slot","start"],["slot","end"],["id","toolbarIcon","name","language-outline",3,"click"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["displayFormat","MM-DD","placeholder","Select date"],["displayFormat","THH:m\ufffd","placeholder","Select time"],["position","floating"],[1,"row","text-center","pt-4"],[1,"col-md-12"],["type","button",1,"mt-1","btn","btn-warning","fonted",3,"disabled","click"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],["class","ion-no-border",4,"ngIf"],[3,"value"],[1,"spinner-border","spinner-border-sm","mr-1"],[1,"ion-no-border"],[1,"row"],[1,"col"],[1,"d-flex","w-100","justify-content-between"],["class","ml-3 btn btn-info fonted",4,"ngIf"],["class","mr-3 btn btn-danger fonted",4,"ngIf"],[1,"ml-3","btn","btn-info","fonted"],[1,"mr-3","btn","btn-danger","fonted"]],template:function(t,e){1&t&&(d.Nb(0,"ion-header"),d.Nb(1,"ion-toolbar"),d.Nb(2,"ion-buttons",0),d.Lb(3,"ion-menu-button"),d.Mb(),d.Nb(4,"ion-title"),d.Nb(5,"ion-label"),d.pc(6),d.Yb(7,"translate"),d.Mb(),d.Mb(),d.Nb(8,"ion-buttons",1),d.Nb(9,"ion-icon",2),d.Vb("click",function(t){return e.openLanguagePopover(t)}),d.Mb(),d.Mb(),d.Mb(),d.Mb(),d.Nb(10,"ion-content"),d.Nb(11,"ion-item"),d.Nb(12,"ion-label"),d.pc(13,"Trip"),d.Mb(),d.Nb(14,"ion-select",3),d.Vb("ngModelChange",function(t){return e.options=t}),d.oc(15,O,2,4,"ion-select-option",4),d.Mb(),d.Mb(),d.Nb(16,"ion-item"),d.Nb(17,"ion-label"),d.pc(18,"Data"),d.Mb(),d.Lb(19,"ion-datetime",5),d.Mb(),d.Nb(20,"ion-item"),d.Nb(21,"ion-label"),d.pc(22,"Time"),d.Mb(),d.Lb(23,"ion-datetime",6),d.Mb(),d.Nb(24,"ion-item"),d.Nb(25,"ion-label",7),d.pc(26,"Info"),d.Mb(),d.Lb(27,"ion-input"),d.Mb(),d.Nb(28,"div",8),d.Nb(29,"div",9),d.Nb(30,"button",10),d.Vb("click",function(){return e.onSubmit()}),d.pc(31),d.Yb(32,"translate"),d.oc(33,C,1,0,"span",11),d.Mb(),d.Mb(),d.Mb(),d.Mb(),d.oc(34,y,7,2,"ion-footer",12)),2&t&&(d.zb(6),d.qc(d.Zb(7,7,"Out of town")),d.zb(8),d.dc("ngModel",e.options),d.zb(1),d.dc("ngForOf",e.options),d.zb(15),d.dc("disabled",e.isSubmitted),d.zb(1),d.rc(" ",d.Zb(32,9,"Make a order")," "),d.zb(2),d.dc("ngIf",e.isSubmitted),d.zb(1),d.dc("ngIf",1==e.isCompleted))},directives:[i.l,i.B,i.e,i.s,i.A,i.p,i.m,i.i,i.o,i.w,i.J,r.h,r.j,o.k,i.j,i.n,i.K,o.l,i.x,i.k],pipes:[v.c],styles:["ion-content[_ngcontent-%COMP%]{--ion-background-color:#e9e9e9}ion-toolbar[_ngcontent-%COMP%]{--ion-background-color:#eee}#map[_ngcontent-%COMP%]{height:100%;width:100%}ion-title[_ngcontent-%COMP%]{text-align:center}h5[_ngcontent-%COMP%]{font-size:.9em}#toolbarIcon[_ngcontent-%COMP%]{font-size:1.7em}.fonted[_ngcontent-%COMP%]{font-family:Open Sans Light}.centered[_ngcontent-%COMP%]{text-align:center}.text[_ngcontent-%COMP%]{font-family:Open Sans Light}hr[_ngcontent-%COMP%]{background:#eee;width:70%!important}.blink_me[_ngcontent-%COMP%]{-webkit-animation:blinker 1s linear infinite;animation:blinker 1s linear infinite}@-webkit-keyframes blinker{50%{opacity:0}}@keyframes blinker{50%{opacity:0}}"]}),t})()}];let k=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=d.Ib({type:t}),t.\u0275inj=d.Hb({imports:[[s.h.forChild(S)],s.h]}),t})();var I=n("mqiu"),P=n("QhVT");function z(t){return new I.a(t)}let E=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=d.Ib({type:t}),t.\u0275inj=d.Hb({imports:[[o.b,r.e,i.C,k,v.b.forChild({loader:{provide:v.a,useFactory:z,deps:[f.a]}}),P.LanguagePopoverPageModule]]}),t})()}}]);