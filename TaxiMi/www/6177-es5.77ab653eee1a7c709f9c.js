!function(){function e(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function r(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function t(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(self.webpackChunkcsharpcornerauthor=self.webpackChunkcsharpcornerauthor||[]).push([[6177],{297:function(r,n,o){"use strict";o.d(n,{p:function(){return l}});var i=o(205),a=o(5304),s=o(3342),c=o(2340),u=o(3018),d=o(1841),p=o(728),l=function(){var r=function(){function r(t,n){e(this,r),this.http=t,this.sharedService=n,this.orders=[],this.completedOrder=!1}return t(r,[{key:"createOrder",value:function(e){var r=this.sharedService.headerGerneration();return this.http.post("".concat(c.N.apiUrl,"/api/order"),e,{headers:r,responseType:"text"}).pipe((0,a.K)(this.handleError))}},{key:"addToFavourites",value:function(e){var r=this.sharedService.headerGerneration();return this.http.post("".concat(c.N.apiUrl,"/api/order/favourites"),e,{headers:r,responseType:"text"}).pipe((0,a.K)(this.handleError))}},{key:"getMyFavourites",value:function(e){var r=this.sharedService.headerGerneration();return this.http.get("".concat(c.N.apiUrl,"/api/order/favourites/").concat(e),{headers:r}).pipe((0,a.K)(this.handleError))}},{key:"deleteFavouriteOrder",value:function(e){var r=this.sharedService.headerGerneration();return this.http.delete("".concat(c.N.apiUrl,"/api/order/favourites/").concat(e),{headers:r}).pipe((0,s.b)(function(e){return console.log("deleted favourite order: ",JSON.stringify(e))}),(0,a.K)(this.handleError))}},{key:"getDirections",value:function(e,r,t,n){var o=this.sharedService.headerGerneration();return this.http.post("https://maps.googleapis.com/maps/api/distancematrix/json?units=imperial&origins=".concat(e,",").concat(r,"&destinations=").concat(t,"%2C").concat(n,"%7C&key=AIzaSyAEvlXdM4joG4bNVT5l-tJSk9lUSGhxMNw"),{headers:o,responseType:"text"}).pipe((0,a.K)(this.handleError))}},{key:"getOrderById",value:function(e){var r=this,t=this.sharedService.headerGerneration();return this.http.get("".concat(c.N.apiUrl,"/api/order/id/").concat(e),{headers:t}).pipe((0,s.b)(function(e){return r.order=e}))}},{key:"getCanceledOrderById",value:function(e){var r=this,t=this.sharedService.headerGerneration();return this.http.get("".concat(c.N.apiUrl,"/api/order/canceled/").concat(e),{headers:t}).pipe((0,s.b)(function(e){return r.order=e}))}},{key:"getLastCompletedOrder",value:function(e){var r=this.sharedService.headerGerneration();return this.http.get("".concat(c.N.apiUrl,"/api/order/completed/").concat(e),{headers:r}).pipe((0,a.K)(this.handleError))}},{key:"getMyOrder",value:function(e){var r=this.sharedService.headerGerneration();return this.http.get("".concat(c.N.apiUrl,"/api/order/").concat(e),{headers:r}).pipe((0,a.K)(this.handleError))}},{key:"getOrderForChat",value:function(e){var r=this.sharedService.headerGerneration();return this.http.get("".concat(c.N.apiUrl,"/api/order/chat/").concat(e),{headers:r}).pipe((0,a.K)(this.handleError))}},{key:"getAllOrders",value:function(){var e=this.sharedService.headerGerneration();return this.http.get("".concat(c.N.apiUrl,"/api/order"),{headers:e}).pipe((0,a.K)(this.handleError))}},{key:"getNormalOrders",value:function(){var e=this.sharedService.headerGerneration();return this.http.get("".concat(c.N.apiUrl,"/api/order/normal"),{headers:e}).pipe((0,a.K)(this.handleError))}},{key:"getComfortOrders",value:function(){var e=this.sharedService.headerGerneration();return this.http.get("".concat(c.N.apiUrl,"/api/order/comfort"),{headers:e}).pipe((0,a.K)(this.handleError))}},{key:"acceptOrder",value:function(e,r){var t=this,n=this.sharedService.headerGerneration();return this.http.put("".concat(c.N.apiUrl,"/api/order/").concat(e,"/").concat(r),{headers:n,responseType:"json"}).pipe((0,s.b)(function(e){return t.driverId=r}),(0,a.K)(this.handleError))}},{key:"updateOrderEta",value:function(e,r){var t=this.sharedService.headerGerneration();return this.http.put("".concat(c.N.apiUrl,"/api/order/eta/").concat(e,"/").concat(r),{headers:t,responseType:"json"}).pipe((0,a.K)(this.handleError))}},{key:"updateDriverArrived",value:function(e){var r=this.sharedService.headerGerneration();return this.http.put("".concat(c.N.apiUrl,"/api/order/arrived/").concat(e),{headers:r,responseType:"json"}).pipe((0,a.K)(this.handleError))}},{key:"rateOrder",value:function(e){var r=this.sharedService.headerGerneration();return this.http.put("".concat(c.N.apiUrl,"/api/order/rate/").concat(e),{headers:r,responseType:"json"}).pipe((0,a.K)(this.handleError))}},{key:"increaseOrderPrice",value:function(e,r){var t=this.sharedService.headerGerneration();return this.http.put("".concat(c.N.apiUrl,"/api/order/increase/").concat(e,"/").concat(r),{headers:t,responseType:"json"}).pipe((0,a.K)(this.handleError))}},{key:"completeOrder",value:function(e){var r=this.sharedService.headerGerneration();return this.http.put("".concat(c.N.apiUrl,"/api/order/").concat(e),{headers:r,responseType:"json"}).pipe((0,a.K)(this.handleError))}},{key:"deleteOrder",value:function(e){var r=this.sharedService.headerGerneration();return this.http.delete("".concat(c.N.apiUrl,"/api/order/").concat(e),{headers:r}).pipe((0,s.b)(function(e){return console.log("deleted order: ",JSON.stringify(e))}),(0,a.K)(this.handleError))}},{key:"driverIncreaseOrderPrice",value:function(e,r,t){var n=this.sharedService.headerGerneration();return this.http.put("".concat(c.N.apiUrl,"/api/order/increased/").concat(e,"/").concat(r,"/").concat(t),{headers:n,responseType:"json"}).pipe((0,a.K)(this.handleError))}},{key:"resetIncreasing",value:function(e){var r=this.sharedService.headerGerneration();return this.http.put("".concat(c.N.apiUrl,"/api/order/reset/").concat(e),{headers:r,responseType:"json"}).pipe((0,a.K)(this.handleError))}},{key:"increasedOrderAccept",value:function(e,r){var t=this.sharedService.headerGerneration();return this.http.put("".concat(c.N.apiUrl,"/api/order/accepted/increase/").concat(e,"/").concat(r),{headers:t,responseType:"json"}).pipe((0,a.K)(this.handleError))}},{key:"incrementOrderPrice",value:function(e){var r=this.sharedService.headerGerneration();return this.http.put("".concat(c.N.apiUrl,"/api/order/increment/").concat(e),{headers:r,responseType:"json"}).pipe((0,a.K)(this.handleError))}},{key:"decrementOrderPrice",value:function(e){var r=this.sharedService.headerGerneration();return this.http.put("".concat(c.N.apiUrl,"/api/order/decrement/").concat(e),{headers:r,responseType:"json"}).pipe((0,a.K)(this.handleError))}},{key:"handleError",value:function(e){var r="";return e.error instanceof ErrorEvent?(console.log("Client side error."),r="Error: ".concat(e.error.message)):(console.log("Server side error."),r="Error Code: ".concat(e.status,"\nMessage: ").concat(e.message)),console.log(r),(0,i._)(r)}}]),r}();return r.\u0275fac=function(e){return new(e||r)(u.LFG(d.eN),u.LFG(p.F))},r.\u0275prov=u.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r}()},6177:function(r,n,o){"use strict";o.r(n),o.d(n,{HttpLoaderFactory:function(){return w},ReportPageModule:function(){return _}});var i=o(8583),a=o(3679),s=o(7823),c=o(4481),u=o(4762),d=o(6522),p=o(3018),l=o(205),h=o(5304),v=o(2340),f=o(1841),g=o(728),m=function(){var r=function(){function r(t,n){e(this,r),this.http=t,this.sharedService=n}return t(r,[{key:"createReport",value:function(e){var r=this.sharedService.headerGerneration();return this.http.post("".concat(v.N.apiUrl,"/api/report"),e,{headers:r,responseType:"text"}).pipe((0,h.K)(this.handleError))}},{key:"handleError",value:function(e){var r="";return e.error instanceof ErrorEvent?(console.log("Client side error."),r="Error: ".concat(e.error.message)):(console.log("Server side error."),r="Error Code: ".concat(e.status,"\nMessage: ").concat(e.message)),console.log(r),(0,l._)(r)}}]),r}();return r.\u0275fac=function(e){return new(e||r)(p.LFG(f.eN),p.LFG(g.F))},r.\u0275prov=p.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r}(),y=o(1799),Z=o(5056),b=o(297),k=o(7800);function I(e,r){1&e&&(p.TgZ(0,"div"),p._uU(1),p.ALo(2,"translate"),p.qZA()),2&e&&(p.xp6(1),p.hij("",p.lcZ(2,1,"The field is required"),"!"))}function T(e,r){if(1&e&&(p.TgZ(0,"div",25),p.YNc(1,I,3,3,"div",26),p.qZA()),2&e){var t=p.oxw();p.xp6(1),p.Q6J("ngIf",t.f.typeId.errors.required)}}function x(e,r){if(1&e&&(p.TgZ(0,"div",27),p.TgZ(1,"ion-text",8),p.TgZ(2,"h4",9),p._uU(3),p.ALo(4,"translate"),p.qZA(),p.qZA(),p._UZ(5,"ion-input",28),p.qZA()),2&e){var t=p.oxw();p.xp6(3),p.Oqu(p.lcZ(4,3,"Last user")),p.xp6(2),p.hYB("value","",t.userFirstName," ",t.userLastName,"")}}function N(e,r){1&e&&(p.TgZ(0,"div"),p._uU(1),p.ALo(2,"translate"),p.qZA()),2&e&&(p.xp6(1),p.hij("",p.lcZ(2,1,"The field is required"),"!"))}function S(e,r){if(1&e&&(p.TgZ(0,"div",29),p.YNc(1,N,3,3,"div",26),p.qZA()),2&e){var t=p.oxw();p.xp6(1),p.Q6J("ngIf",t.f.title.errors.required)}}function q(e,r){1&e&&(p.TgZ(0,"div"),p._uU(1),p.ALo(2,"translate"),p.qZA()),2&e&&(p.xp6(1),p.hij("",p.lcZ(2,1,"The field is required"),"!"))}function A(e,r){if(1&e&&(p.TgZ(0,"div",29),p.YNc(1,q,3,3,"div",26),p.qZA()),2&e){var t=p.oxw();p.xp6(1),p.Q6J("ngIf",t.f.description.errors.required)}}var O,U=function(e){return{"is-invalid":e}},C=[{path:"",component:(O=function(){function r(t,n,o,i,a,s,c,u,d,p){e(this,r),this.reportService=t,this.route=n,this.formBuilder=o,this.driverService=i,this.accountService=a,this.location=s,this.orderService=c,this.alertController=u,this.translate=d,this.popoverController=p,this.subscriptions=[],this.submitted=!1,this.loading=!1,this.userId=this.accountService.userValue.id,this.translate.setDefaultLang(this.accountService.userValue.choosenLanguage)}return t(r,[{key:"ngOnInit",value:function(){this.form=this.formBuilder.group({title:["",a.kI.required],description:["",a.kI.required],reporterId:[""],suspectedUserId:[""],typeId:[""]})}},{key:"f",get:function(){return this.form.controls}},{key:"reportType",value:function(e){var r=this;this.selectedReportType=e,1==this.selectedReportType&&this.subscriptions.push(this.accountService.getById(this.userId).subscribe(function(e){r.isDriver=e.isDriver,r.subscriptions.push(e.isDriver?r.orderService.getLastCompletedOrder(r.userId).subscribe(function(e){r.lastOrder=e,r.subscriptions.push(r.accountService.getById(e.applicationUserId).subscribe(function(e){r.userFirstName=e.firstName,r.userLastName=e.lastName,r.suspectedUserId=r.lastOrder.applicationUserId,r.reporterId=r.userId}))}):r.orderService.getLastCompletedOrder(r.userId).subscribe(function(e){r.lastOrder=e,r.subscriptions.push(r.accountService.getById(e.acceptedBy).subscribe(function(e){r.userFirstName=e.firstName,r.userLastName=e.lastName,r.subscriptions.push(r.driverService.getDriverActiveCar(e.driverId).subscribe(function(t){r.carModel=t.model,r.form.value.typeId=+r.form.value.typeId,r.suspectedUserId=e.driverId,r.reporterId=r.userId}))}))}))}))}},{key:"onSubmit",value:function(){var e=this;this.submitted=!0,this.form.valid?(this.form.value.typeId=+this.form.value.typeId,1==this.form.value.typeId?(this.form.value.suspectedUserId=this.suspectedUserId,this.form.value.reporterId=this.reporterId,this.subscriptions.push(this.reportService.createReport(this.form.value).subscribe(function(r){console.log("report created:"),console.log(r),e.reportCompleted(),e.clearForm()}))):(this.form.value.reporterId=this.userId,this.subscriptions.push(this.reportService.createReport(this.form.value).subscribe(function(r){console.log("report created:"),console.log(r),e.reportCompleted(),e.clearForm()}))),console.log(this.form.value)):console.log("Please provide all the required values!")}},{key:"openLanguagePopover",value:function(e){return(0,u.mG)(this,void 0,void 0,regeneratorRuntime.mark(function r(){var t;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.popoverController.create({component:d.m,event:e});case 2:return t=r.sent,r.next=5,t.present();case 5:case"end":return r.stop()}},r,this)}))}},{key:"reportCompleted",value:function(){return(0,u.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.translate.get(["Report","Your report is sent successfully","Confirm"]).subscribe(function(e){return(0,u.mG)(r,void 0,void 0,regeneratorRuntime.mark(function r(){var t,n=this;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.alertController.create({message:e["Your report is sent successfully"],buttons:[{text:e.Confirm,handler:function(){n.route.navigate(1==n.isDriver?["menu/driving"]:["menu/travelling"])}}]});case 2:return t=r.sent,r.next=5,t.present();case 5:case"end":return r.stop()}},r,this)}))});case 1:case"end":return e.stop()}},e,this)}))}},{key:"clearForm",value:function(){this.form.reset({title:"",description:"",typeId:"",suspectedDriverId:"",reporterId:""})}},{key:"goBack",value:function(){this.location.back()}}]),r}(),O.\u0275fac=function(e){return new(e||O)(p.Y36(m),p.Y36(c.F0),p.Y36(a.qu),p.Y36(y.F),p.Y36(Z.B),p.Y36(i.Ye),p.Y36(b.p),p.Y36(s.Br),p.Y36(k.sK),p.Y36(s.Dh))},O.\u0275cmp=p.Xpm({type:O,selectors:[["app-report"]],decls:51,vars:41,consts:[["slot","start"],["slot","end"],["id","toolbarIcon","name","language-outline",3,"click"],["padding","",1,"background"],[1,"row"],[1,"col"],[1,"row","mt-2"],[1,"col","text-center"],["color","dark",1,"centered"],[1,"text"],["novalidate","",1,"col-md-6",3,"formGroup"],[1,"form-group","col","mt-5","text-center"],["formControlName","typeId","id","exampleFormControlSelect1",1,"form-control","text",3,"ngClass","change"],["value","","disabled","","selected","","hidden",""],["value","1"],["value","2"],["value","3"],["class","invalid-feedback text",4,"ngIf"],["class","form-group col mt-5 text-center text",4,"ngIf"],[1,"form-group","col","mt-5"],["formControlName","title","type","text",1,"form-control","text",3,"placeholder","ngClass"],["class","invalid-feedback",4,"ngIf"],["formControlName","description","type","text",1,"form-control","text",3,"placeholder","ngClass"],[1,"col-md-12","mt-3"],["type","button","color","dark",1,"btn","btn-info",3,"click"],[1,"invalid-feedback","text"],[4,"ngIf"],[1,"form-group","col","mt-5","text-center","text"],[1,"form-control",3,"value"],[1,"invalid-feedback"]],template:function(e,r){1&e&&(p.TgZ(0,"ion-header"),p.TgZ(1,"ion-toolbar"),p.TgZ(2,"ion-buttons",0),p._UZ(3,"ion-menu-button"),p.qZA(),p.TgZ(4,"ion-title"),p.TgZ(5,"ion-label"),p._uU(6),p.ALo(7,"translate"),p.qZA(),p.qZA(),p.TgZ(8,"ion-buttons",1),p.TgZ(9,"ion-icon",2),p.NdJ("click",function(e){return r.openLanguagePopover(e)}),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.TgZ(10,"ion-content",3),p.TgZ(11,"div",4),p.TgZ(12,"div",5),p._UZ(13,"div",6),p.TgZ(14,"div",4),p.TgZ(15,"div",7),p.TgZ(16,"ion-text",8),p.TgZ(17,"h2",9),p._uU(18),p.ALo(19,"translate"),p.qZA(),p._UZ(20,"hr"),p.qZA(),p.TgZ(21,"form",10),p.TgZ(22,"div",11),p.TgZ(23,"select",12),p.NdJ("change",function(e){return r.reportType(e.target.value)}),p.TgZ(24,"option",13),p._uU(25),p.ALo(26,"translate"),p.qZA(),p.TgZ(27,"option",14),p._uU(28),p.ALo(29,"translate"),p.qZA(),p.TgZ(30,"option",15),p._uU(31),p.ALo(32,"translate"),p.qZA(),p.TgZ(33,"option",16),p._uU(34),p.ALo(35,"translate"),p.qZA(),p.qZA(),p.YNc(36,T,2,1,"div",17),p.qZA(),p.YNc(37,x,6,5,"div",18),p.TgZ(38,"div",19),p._UZ(39,"ion-input",20),p.ALo(40,"translate"),p.YNc(41,S,2,1,"div",21),p.qZA(),p.TgZ(42,"div",19),p.TgZ(43,"textarea",22),p.ALo(44,"translate"),p._uU(45,"                "),p.qZA(),p.YNc(46,A,2,1,"div",21),p.qZA(),p.TgZ(47,"div",23),p.TgZ(48,"button",24),p.NdJ("click",function(){return r.onSubmit()}),p._uU(49),p.ALo(50,"translate"),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA()),2&e&&(p.xp6(6),p.Oqu(p.lcZ(7,17,"Report")),p.xp6(12),p.Oqu(p.lcZ(19,19,"Report a problem")),p.xp6(3),p.Q6J("formGroup",r.form),p.xp6(2),p.Q6J("ngClass",p.VKq(35,U,r.submitted&&r.f.typeId.errors)),p.xp6(2),p.Oqu(p.lcZ(26,21,"Choose report type")),p.xp6(3),p.Oqu(p.lcZ(29,23,"Complaint")),p.xp6(3),p.Oqu(p.lcZ(32,25,"Technical")),p.xp6(3),p.Oqu(p.lcZ(35,27,"Other")),p.xp6(2),p.Q6J("ngIf",r.submitted&&r.f.typeId.errors),p.xp6(1),p.Q6J("ngIf",1==r.selectedReportType),p.xp6(2),p.Q6J("placeholder",p.lcZ(40,29,"Title"))("ngClass",p.VKq(37,U,r.submitted&&r.f.title.errors)),p.xp6(2),p.Q6J("ngIf",r.submitted&&r.f.title.errors),p.xp6(2),p.Q6J("placeholder",p.lcZ(44,31,"Description"))("ngClass",p.VKq(39,U,r.submitted&&r.f.description.errors)),p.xp6(3),p.Q6J("ngIf",r.submitted&&r.f.description.errors),p.xp6(3),p.Oqu(p.lcZ(50,33,"Submit")))},directives:[s.Gu,s.sr,s.Sm,s.fG,s.wd,s.Q$,s.gu,s.W2,s.yW,a.Y7,a.JL,a.sg,a.EJ,a.JJ,a.u,i.mk,a.YN,a.$B,i.O5,s.pK,s.j9,a.Fj],pipes:[k.X$],styles:["ion-content[_ngcontent-%COMP%]{--ion-background-color:#e9e9e9}.centered[_ngcontent-%COMP%]{text-align:center}.text[_ngcontent-%COMP%]{font-family:Open Sans Light}hr[_ngcontent-%COMP%]{background:#eee;width:70%!important}.backIcon[_ngcontent-%COMP%]{font-size:150%}.back[_ngcontent-%COMP%], .backIcon[_ngcontent-%COMP%]{color:#ffae00}ion-toolbar[_ngcontent-%COMP%]{--ion-background-color:#eee}ion-title[_ngcontent-%COMP%]{text-align:center}#toolbarIcon[_ngcontent-%COMP%]{font-size:1.7em}"]}),O)}],G=function(){var r=function r(){e(this,r)};return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=p.oAB({type:r}),r.\u0275inj=p.cJS({imports:[[c.Bz.forChild(C)],c.Bz]}),r}(),E=o(2472),L=o(3577);function w(e){return new E.w(e)}var K,_=((K=function r(){e(this,r)}).\u0275fac=function(e){return new(e||K)},K.\u0275mod=p.oAB({type:K}),K.\u0275inj=p.cJS({imports:[[i.ez,a.u5,s.Pc,G,a.UX,k.aw.forChild({loader:{provide:k.Zw,useFactory:w,deps:[f.eN]}}),L.LanguagePopoverPageModule]]}),K)}}])}();